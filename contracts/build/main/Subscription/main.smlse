(storage (record 110 (allowance (literal (intOrNat 0) 110)) (balance (literal (intOrNat 0) 110)) (extraNonce (type_annotation (map 119 ) (map (unknown 1) (record ((value "nat")) None)) 119)) (owner (literal (address "tz1iW8VsjiskuidR5EwSv7JUkttVZHDgKtfi") -1)) (reqGasPrice (variant "None" (unit) -1)) (reqPeriodSeconds (variant "None" (unit) -1)) (reqToAddress (variant "None" (unit) -1)) (reqTokenAddress (variant "None" (unit) -1)) (reqTokenAmount (variant "None" (unit) -1)) (times (type_annotation (big_map 111 ) (bigmap "bytes" (record ((active "bool") (nextValidTimeStamp "timestamp") (ready "bool")) None)) 111)))
storage_type (())
messages ((cancelSub True ((set_type (params 272) (record ((gasPrice "nat") (nonce "nat") (periodSeconds "int") (publisher "address") (subs_pub_key "key") (subscriber "address") (tokenAddress "address") (tokenAmount "nat") (userSignature "signature")) (Some (("subscriber") (("publisher") (("tokenAddress") (("tokenAmount") (("periodSeconds") (("gasPrice") (("nonce") (("userSignature") ("subs_pub_key"))))))))))) 273) (set_type (record 274 (gasPrice (attr (params 272) "gasPrice" 280)) (nonce (attr (params 272) "nonce" 281)) (periodSeconds (attr (params 272) "periodSeconds" 279)) (publisher (attr (params 272) "publisher" 276)) (subscriber (attr (params 272) "subscriber" 275)) (tokenAddress (attr (params 272) "tokenAddress" 277)) (tokenAmount (attr (params 272) "tokenAmount" 278))) (record ((gasPrice "nat") (nonce "nat") (periodSeconds "int") (publisher "address") (subscriber "address") (tokenAddress "address") (tokenAmount "nat")) (Some (("subscriber") (("publisher") (("tokenAddress") (("tokenAmount") (("periodSeconds") (("gasPrice") ("nonce"))))))))) 181) (verify (or (invert (isVariant (attr (data) "reqToAddress" 182) "Some" 182) 182) (and (isVariant (attr (data) "reqToAddress" 182) "Some" 182) (eq (openVariant (attr (data) "reqToAddress" 182) "Some" 182) (attr (params 272) "publisher" 276) 182) 182) 182) False 182) (verify (or (invert (isVariant (attr (data) "reqTokenAddress" 183) "Some" 183) 183) (and (isVariant (attr (data) "reqTokenAddress" 183) "Some" 183) (eq (openVariant (attr (data) "reqTokenAddress" 183) "Some" 183) (attr (params 272) "tokenAddress" 277) 183) 183) 183) False 183) (verify (or (invert (isVariant (attr (data) "reqTokenAmount" 184) "Some" 184) 184) (and (isVariant (attr (data) "reqTokenAmount" 184) "Some" 184) (eq (openVariant (attr (data) "reqTokenAmount" 184) "Some" 184) (attr (params 272) "tokenAmount" 278) 184) 184) 184) False 184) (verify (or (invert (isVariant (attr (data) "reqPeriodSeconds" 185) "Some" 185) 185) (and (isVariant (attr (data) "reqPeriodSeconds" 185) "Some" 185) (eq (openVariant (attr (data) "reqPeriodSeconds" 185) "Some" 185) (attr (params 272) "periodSeconds" 279) 185) 185) 185) False 185) (verify (or (invert (isVariant (attr (data) "reqGasPrice" 186) "Some" 186) 186) (and (isVariant (attr (data) "reqGasPrice" 186) "Some" 186) (eq (openVariant (attr (data) "reqGasPrice" 186) "Some" 186) (attr (params 272) "gasPrice" 280) 186) 186) 186) False 186) (defineLocal "elements" (pack (record 189 (a (attr (params 272) "subscriber" 275)) (b (attr (params 272) "publisher" 276)) (c (attr (params 272) "tokenAddress" 277)) (d (attr (params 272) "tokenAmount" 278)) (e (attr (params 272) "periodSeconds" 279)) (f (attr (params 272) "gasPrice" 280)) (g (attr (params 272) "nonce" 281))) 188) 274) (verify (check_signature (attr (params 272) "subs_pub_key" 284) (attr (params 272) "userSignature" 284) (getLocal "elements" 284) 284) False 284) (verify (eq (sender) (attr (params 272) "subscriber" 275) 285) False 285) (set (attr (getItem (attr (data) "times" 286) (getLocal "elements" 286) 286) "nextValidTimeStamp" 286) (literal (timestamp -1) 286) 286))) (executeSubs True ((set_type (params 232) (record ((gasPrice "nat") (nonce "nat") (periodSeconds "int") (publisher "address") (subs_pub_key "key") (subscriber "address") (tokenAddress "address") (tokenAmount "nat") (userSignature "signature")) (Some (("subscriber") (("publisher") (("tokenAddress") (("tokenAmount") (("periodSeconds") (("gasPrice") (("nonce") (("userSignature") ("subs_pub_key"))))))))))) 233) (set_type (record 234 (gasPrice (attr (params 232) "gasPrice" 240)) (nonce (attr (params 232) "nonce" 241)) (periodSeconds (attr (params 232) "periodSeconds" 239)) (publisher (attr (params 232) "publisher" 236)) (subscriber (attr (params 232) "subscriber" 235)) (tokenAddress (attr (params 232) "tokenAddress" 237)) (tokenAmount (attr (params 232) "tokenAmount" 238))) (record ((gasPrice "nat") (nonce "nat") (periodSeconds "int") (publisher "address") (subscriber "address") (tokenAddress "address") (tokenAmount "nat")) (Some (("subscriber") (("publisher") (("tokenAddress") (("tokenAmount") (("periodSeconds") (("gasPrice") ("nonce"))))))))) 181) (verify (or (invert (isVariant (attr (data) "reqToAddress" 182) "Some" 182) 182) (and (isVariant (attr (data) "reqToAddress" 182) "Some" 182) (eq (openVariant (attr (data) "reqToAddress" 182) "Some" 182) (attr (params 232) "publisher" 236) 182) 182) 182) False 182) (verify (or (invert (isVariant (attr (data) "reqTokenAddress" 183) "Some" 183) 183) (and (isVariant (attr (data) "reqTokenAddress" 183) "Some" 183) (eq (openVariant (attr (data) "reqTokenAddress" 183) "Some" 183) (attr (params 232) "tokenAddress" 237) 183) 183) 183) False 183) (verify (or (invert (isVariant (attr (data) "reqTokenAmount" 184) "Some" 184) 184) (and (isVariant (attr (data) "reqTokenAmount" 184) "Some" 184) (eq (openVariant (attr (data) "reqTokenAmount" 184) "Some" 184) (attr (params 232) "tokenAmount" 238) 184) 184) 184) False 184) (verify (or (invert (isVariant (attr (data) "reqPeriodSeconds" 185) "Some" 185) 185) (and (isVariant (attr (data) "reqPeriodSeconds" 185) "Some" 185) (eq (openVariant (attr (data) "reqPeriodSeconds" 185) "Some" 185) (attr (params 232) "periodSeconds" 239) 185) 185) 185) False 185) (verify (or (invert (isVariant (attr (data) "reqGasPrice" 186) "Some" 186) 186) (and (isVariant (attr (data) "reqGasPrice" 186) "Some" 186) (eq (openVariant (attr (data) "reqGasPrice" 186) "Some" 186) (attr (params 232) "gasPrice" 240) 186) 186) 186) False 186) (defineLocal "elements" (pack (record 189 (a (attr (params 232) "subscriber" 235)) (b (attr (params 232) "publisher" 236)) (c (attr (params 232) "tokenAddress" 237)) (d (attr (params 232) "tokenAmount" 238)) (e (attr (params 232) "periodSeconds" 239)) (f (attr (params 232) "gasPrice" 240)) (g (attr (params 232) "nonce" 241))) 188) 234) (set_type (record 244 (gasPrice (attr (params 232) "gasPrice" 240)) (nonce (attr (params 232) "nonce" 241)) (periodSeconds (attr (params 232) "periodSeconds" 239)) (publisher (attr (params 232) "publisher" 236)) (subs_pub_key (attr (params 232) "subs_pub_key" 253)) (subscriber (attr (params 232) "subscriber" 235)) (tokenAddress (attr (params 232) "tokenAddress" 237)) (tokenAmount (attr (params 232) "tokenAmount" 238)) (userSignature (attr (params 232) "userSignature" 252))) (record ((gasPrice "nat") (nonce "nat") (periodSeconds "int") (publisher "address") (subs_pub_key "key") (subscriber "address") (tokenAddress "address") (tokenAmount "nat") (userSignature "signature")) (Some (("subscriber") (("publisher") (("tokenAddress") (("tokenAmount") (("periodSeconds") (("gasPrice") (("nonce") (("userSignature") ("subs_pub_key"))))))))))) 202) (set_type (record 204 (gasPrice (attr (params 232) "gasPrice" 240)) (nonce (attr (params 232) "nonce" 241)) (periodSeconds (attr (params 232) "periodSeconds" 239)) (publisher (attr (params 232) "publisher" 236)) (subscriber (attr (params 232) "subscriber" 235)) (tokenAddress (attr (params 232) "tokenAddress" 237)) (tokenAmount (attr (params 232) "tokenAmount" 238))) (record ((gasPrice "nat") (nonce "nat") (periodSeconds "int") (publisher "address") (subscriber "address") (tokenAddress "address") (tokenAmount "nat")) (Some (("subscriber") (("publisher") (("tokenAddress") (("tokenAmount") (("periodSeconds") (("gasPrice") ("nonce"))))))))) 181) (verify (or (invert (isVariant (attr (data) "reqToAddress" 182) "Some" 182) 182) (and (isVariant (attr (data) "reqToAddress" 182) "Some" 182) (eq (openVariant (attr (data) "reqToAddress" 182) "Some" 182) (attr (params 232) "publisher" 236) 182) 182) 182) False 182) (verify (or (invert (isVariant (attr (data) "reqTokenAddress" 183) "Some" 183) 183) (and (isVariant (attr (data) "reqTokenAddress" 183) "Some" 183) (eq (openVariant (attr (data) "reqTokenAddress" 183) "Some" 183) (attr (params 232) "tokenAddress" 237) 183) 183) 183) False 183) (verify (or (invert (isVariant (attr (data) "reqTokenAmount" 184) "Some" 184) 184) (and (isVariant (attr (data) "reqTokenAmount" 184) "Some" 184) (eq (openVariant (attr (data) "reqTokenAmount" 184) "Some" 184) (attr (params 232) "tokenAmount" 238) 184) 184) 184) False 184) (verify (or (invert (isVariant (attr (data) "reqPeriodSeconds" 185) "Some" 185) 185) (and (isVariant (attr (data) "reqPeriodSeconds" 185) "Some" 185) (eq (openVariant (attr (data) "reqPeriodSeconds" 185) "Some" 185) (attr (params 232) "periodSeconds" 239) 185) 185) 185) False 185) (verify (or (invert (isVariant (attr (data) "reqGasPrice" 186) "Some" 186) 186) (and (isVariant (attr (data) "reqGasPrice" 186) "Some" 186) (eq (openVariant (attr (data) "reqGasPrice" 186) "Some" 186) (attr (params 232) "gasPrice" 240) 186) 186) 186) False 186) (defineLocal "element" (pack (record 189 (a (attr (params 232) "subscriber" 235)) (b (attr (params 232) "publisher" 236)) (c (attr (params 232) "tokenAddress" 237)) (d (attr (params 232) "tokenAmount" 238)) (e (attr (params 232) "periodSeconds" 239)) (f (attr (params 232) "gasPrice" 240)) (g (attr (params 232) "nonce" 241))) 188) 203) (ifBlock (invert (contains (attr (data) "times" 286) (getLocal "element" 214) 144) 144) ((set (getItem (attr (data) "times" 286) (getLocal "element" 214) 145) (record 145 (active (literal (bool False) 145)) (nextValidTimeStamp (literal (timestamp -1) 145)) (ready (literal (bool False) 145))) 145)) 144) (set (attr (getItem (attr (data) "times" 286) (getLocal "element" 215) 215) "ready" 215) (literal (bool False) 215) 215) (verify (check_signature (attr (params 232) "subs_pub_key" 253) (attr (params 232) "userSignature" 252) (getLocal "element" 216) 216) False 216) (verify (neq (attr (params 232) "subscriber" 235) (attr (params 232) "publisher" 236) 217) False 217) (verify (ge (now) (attr (getItem (attr (data) "times" 286) (getLocal "element" 218) 218) "nextValidTimeStamp" 218) 218) False 218) (set (attr (getItem (attr (data) "times" 286) (getLocal "element" 219) 219) "ready" 219) (literal (bool True) 219) 219) (verify (eq (attr (getItem (attr (data) "times" 286) (getLocal "elements" 256) 256) "ready" 256) (literal (bool True) 256) 256) False 256) (set (attr (getItem (attr (data) "times" 286) (getLocal "elements" 257) 257) "nextValidTimeStamp" 257) (add_seconds (now) (attr (params 232) "periodSeconds" 239) 257) 257) (ifBlock (invert (contains (attr (data) "extraNonce" 148) (attr (params 232) "subscriber" 235) 148) 148) ((set (getItem (attr (data) "extraNonce" 148) (attr (params 232) "subscriber" 235) 149) (record 149 (value (literal (intOrNat 0) 149))) 149)) 148) (ifBlock (gt (attr (params 232) "nonce" 241) (attr (getItem (attr (data) "extraNonce" 148) (attr (params 232) "subscriber" 235) 259) "value" 259) 259) ((set (attr (getItem (attr (data) "extraNonce" 148) (attr (params 232) "subscriber" 235) 260) "value" 260) (attr (params 232) "nonce" 241) 260)) 259) (set (operations 264) (cons (transfer (record 263 (from_ (attr (params 232) "subscriber" 235)) (to_ (attr (params 232) "publisher" 236)) (value (attr (params 232) "tokenAmount" 238))) (literal (mutez 0) 264) (openVariant (contract "transfer" (record ((from_ "address") (to_ "address") (value "nat")) None) (attr (params 232) "tokenAddress" 237) 262) "Some" 262) 264) (operations 264) 264) 264) (ifBlock (gt (attr (params 232) "gasPrice" 240) (literal (intOrNat 0) 266) 266) ((set (operations 269) (cons (transfer (record 268 (from_ (attr (params 232) "subscriber" 235)) (to_ (sender)) (value (attr (params 232) "gasPrice" 240))) (literal (mutez 0) 269) (openVariant (contract "transfer" (record ((from_ "address") (to_ "address") (value "nat")) None) (attr (params 232) "tokenAddress" 237) 267) "Some" 267) 269) (operations 269) 269) 269)) 266))) (updateAllowance True ((set_type (params 166) (record ((spender "address") (subscriber "address") (tokenAddress "address")) (Some (("spender") (("subscriber") ("tokenAddress"))))) 167) (set (operations 178) (cons (transfer (record 177 (contractAddress (to_address (self) 177)) (owner (attr (params 166) "subscriber" 177)) (spender (attr (params 166) "spender" 177))) (literal (mutez 0) 178) (openVariant (contract "getAllowance" (record ((contractAddress "address") (owner "address") (spender "address")) None) (attr (params 166) "tokenAddress" 174) 168) "Some" 168) 178) (operations 178) 178) 178))) (updateBalance True ((set_type (params 152) (record ((subscriber "address") (tokenAddress "address")) (Some (("subscriber") ("tokenAddress")))) 153) (set (operations 163) (cons (transfer (record 162 (contractAddress (to_address (self) 162)) (owner (attr (params 152) "subscriber" 162))) (literal (mutez 0) 163) (openVariant (contract "getBalance" (record ((contractAddress "address") (owner "address")) None) (attr (params 152) "tokenAddress" 159) 154) "Some" 154) 163) (operations 163) 163) 163))) (viewAllowance True ((set_type (params 227) "nat" 228) (set (attr (data) "allowance" 229) (params 227) 229))) (viewBalance True ((set_type (params 222) "nat" 223) (set (attr (data) "balance" 224) (params 222) 224))))
flags ()
globals ()
storage_layout ()
entry_points_layout ())