(storage (record 111 (allowance (literal (intOrNat 0) 111)) (balance (literal (intOrNat 0) 111)) (extraNonce (type_annotation (map 120 ) (map (unknown 1) (record ((value "nat")) None)) 120)) (owner (literal (address "tz1iW8VsjiskuidR5EwSv7JUkttVZHDgKtfi") -1)) (reqGasPrice (variant "None" (unit) -1)) (reqPeriodSeconds (variant "None" (unit) -1)) (reqToAddress (variant "None" (unit) -1)) (reqTokenAddress (variant "None" (unit) -1)) (reqTokenAmount (variant "None" (unit) -1)) (times (type_annotation (big_map 112 ) (bigmap "bytes" (record ((active "bool") (nextValidTimeStamp "timestamp") (ready "bool")) None)) 112)))
storage_type (())
messages ((cancelSub True ((set_type (params 234) (record ((gasPrice "nat") (nonce "nat") (periodSeconds "int") (publisher "address") (subs_pub_key "key") (subscriber "address") (tokenAddress "address") (tokenAmount "nat") (userSignature "signature")) (Some (("subscriber") (("publisher") (("tokenAddress") (("tokenAmount") (("periodSeconds") (("gasPrice") (("nonce") (("userSignature") ("subs_pub_key"))))))))))) 235) (set_type (record 236 (gasPrice (attr (params 234) "gasPrice" 242)) (nonce (attr (params 234) "nonce" 243)) (periodSeconds (attr (params 234) "periodSeconds" 241)) (publisher (attr (params 234) "publisher" 238)) (subscriber (attr (params 234) "subscriber" 237)) (tokenAddress (attr (params 234) "tokenAddress" 239)) (tokenAmount (attr (params 234) "tokenAmount" 240))) (record ((gasPrice "nat") (nonce "nat") (periodSeconds "int") (publisher "address") (subscriber "address") (tokenAddress "address") (tokenAmount "nat")) (Some (("subscriber") (("publisher") (("tokenAddress") (("tokenAmount") (("periodSeconds") (("gasPrice") ("nonce"))))))))) 153) (verify (or (invert (isVariant (attr (data) "reqToAddress" 154) "Some" 154) 154) (and (isVariant (attr (data) "reqToAddress" 154) "Some" 154) (eq (openVariant (attr (data) "reqToAddress" 154) "Some" 154) (attr (params 234) "publisher" 238) 154) 154) 154) False 154) (verify (or (invert (isVariant (attr (data) "reqTokenAddress" 155) "Some" 155) 155) (and (isVariant (attr (data) "reqTokenAddress" 155) "Some" 155) (eq (openVariant (attr (data) "reqTokenAddress" 155) "Some" 155) (attr (params 234) "tokenAddress" 239) 155) 155) 155) False 155) (verify (or (invert (isVariant (attr (data) "reqTokenAmount" 156) "Some" 156) 156) (and (isVariant (attr (data) "reqTokenAmount" 156) "Some" 156) (eq (openVariant (attr (data) "reqTokenAmount" 156) "Some" 156) (attr (params 234) "tokenAmount" 240) 156) 156) 156) False 156) (verify (or (invert (isVariant (attr (data) "reqPeriodSeconds" 157) "Some" 157) 157) (and (isVariant (attr (data) "reqPeriodSeconds" 157) "Some" 157) (eq (openVariant (attr (data) "reqPeriodSeconds" 157) "Some" 157) (attr (params 234) "periodSeconds" 241) 157) 157) 157) False 157) (verify (or (invert (isVariant (attr (data) "reqGasPrice" 158) "Some" 158) 158) (and (isVariant (attr (data) "reqGasPrice" 158) "Some" 158) (eq (openVariant (attr (data) "reqGasPrice" 158) "Some" 158) (attr (params 234) "gasPrice" 242) 158) 158) 158) False 158) (defineLocal "elements" (pack (record 161 (a (attr (params 234) "subscriber" 237)) (b (attr (params 234) "publisher" 238)) (c (attr (params 234) "tokenAddress" 239)) (d (attr (params 234) "tokenAmount" 240)) (e (attr (params 234) "periodSeconds" 241)) (f (attr (params 234) "gasPrice" 242)) (g (attr (params 234) "nonce" 243))) 160) 236) (verify (check_signature (attr (params 234) "subs_pub_key" 246) (attr (params 234) "userSignature" 246) (getLocal "elements" 246) 246) False 246) (verify (eq (sender) (attr (params 234) "subscriber" 237) 247) False 247) (set (attr (getItem (attr (data) "times" 248) (getLocal "elements" 248) 248) "nextValidTimeStamp" 248) (literal (timestamp -1) 248) 248))) (executeSubs True ((set_type (params 194) (record ((gasPrice "nat") (nonce "nat") (periodSeconds "int") (publisher "address") (subs_pub_key "key") (subscriber "address") (tokenAddress "address") (tokenAmount "nat") (userSignature "signature")) (Some (("subscriber") (("publisher") (("tokenAddress") (("tokenAmount") (("periodSeconds") (("gasPrice") (("nonce") (("userSignature") ("subs_pub_key"))))))))))) 195) (set_type (record 196 (gasPrice (attr (params 194) "gasPrice" 202)) (nonce (attr (params 194) "nonce" 203)) (periodSeconds (attr (params 194) "periodSeconds" 201)) (publisher (attr (params 194) "publisher" 198)) (subscriber (attr (params 194) "subscriber" 197)) (tokenAddress (attr (params 194) "tokenAddress" 199)) (tokenAmount (attr (params 194) "tokenAmount" 200))) (record ((gasPrice "nat") (nonce "nat") (periodSeconds "int") (publisher "address") (subscriber "address") (tokenAddress "address") (tokenAmount "nat")) (Some (("subscriber") (("publisher") (("tokenAddress") (("tokenAmount") (("periodSeconds") (("gasPrice") ("nonce"))))))))) 153) (verify (or (invert (isVariant (attr (data) "reqToAddress" 154) "Some" 154) 154) (and (isVariant (attr (data) "reqToAddress" 154) "Some" 154) (eq (openVariant (attr (data) "reqToAddress" 154) "Some" 154) (attr (params 194) "publisher" 198) 154) 154) 154) False 154) (verify (or (invert (isVariant (attr (data) "reqTokenAddress" 155) "Some" 155) 155) (and (isVariant (attr (data) "reqTokenAddress" 155) "Some" 155) (eq (openVariant (attr (data) "reqTokenAddress" 155) "Some" 155) (attr (params 194) "tokenAddress" 199) 155) 155) 155) False 155) (verify (or (invert (isVariant (attr (data) "reqTokenAmount" 156) "Some" 156) 156) (and (isVariant (attr (data) "reqTokenAmount" 156) "Some" 156) (eq (openVariant (attr (data) "reqTokenAmount" 156) "Some" 156) (attr (params 194) "tokenAmount" 200) 156) 156) 156) False 156) (verify (or (invert (isVariant (attr (data) "reqPeriodSeconds" 157) "Some" 157) 157) (and (isVariant (attr (data) "reqPeriodSeconds" 157) "Some" 157) (eq (openVariant (attr (data) "reqPeriodSeconds" 157) "Some" 157) (attr (params 194) "periodSeconds" 201) 157) 157) 157) False 157) (verify (or (invert (isVariant (attr (data) "reqGasPrice" 158) "Some" 158) 158) (and (isVariant (attr (data) "reqGasPrice" 158) "Some" 158) (eq (openVariant (attr (data) "reqGasPrice" 158) "Some" 158) (attr (params 194) "gasPrice" 202) 158) 158) 158) False 158) (defineLocal "elements" (pack (record 161 (a (attr (params 194) "subscriber" 197)) (b (attr (params 194) "publisher" 198)) (c (attr (params 194) "tokenAddress" 199)) (d (attr (params 194) "tokenAmount" 200)) (e (attr (params 194) "periodSeconds" 201)) (f (attr (params 194) "gasPrice" 202)) (g (attr (params 194) "nonce" 203))) 160) 196) (set_type (record 206 (gasPrice (attr (params 194) "gasPrice" 202)) (nonce (attr (params 194) "nonce" 203)) (periodSeconds (attr (params 194) "periodSeconds" 201)) (publisher (attr (params 194) "publisher" 198)) (subs_pub_key (attr (params 194) "subs_pub_key" 215)) (subscriber (attr (params 194) "subscriber" 197)) (tokenAddress (attr (params 194) "tokenAddress" 199)) (tokenAmount (attr (params 194) "tokenAmount" 200)) (userSignature (attr (params 194) "userSignature" 214))) (record ((gasPrice "nat") (nonce "nat") (periodSeconds "int") (publisher "address") (subs_pub_key "key") (subscriber "address") (tokenAddress "address") (tokenAmount "nat") (userSignature "signature")) (Some (("subscriber") (("publisher") (("tokenAddress") (("tokenAmount") (("periodSeconds") (("gasPrice") (("nonce") (("userSignature") ("subs_pub_key"))))))))))) 174) (set_type (record 176 (gasPrice (attr (params 194) "gasPrice" 202)) (nonce (attr (params 194) "nonce" 203)) (periodSeconds (attr (params 194) "periodSeconds" 201)) (publisher (attr (params 194) "publisher" 198)) (subscriber (attr (params 194) "subscriber" 197)) (tokenAddress (attr (params 194) "tokenAddress" 199)) (tokenAmount (attr (params 194) "tokenAmount" 200))) (record ((gasPrice "nat") (nonce "nat") (periodSeconds "int") (publisher "address") (subscriber "address") (tokenAddress "address") (tokenAmount "nat")) (Some (("subscriber") (("publisher") (("tokenAddress") (("tokenAmount") (("periodSeconds") (("gasPrice") ("nonce"))))))))) 153) (verify (or (invert (isVariant (attr (data) "reqToAddress" 154) "Some" 154) 154) (and (isVariant (attr (data) "reqToAddress" 154) "Some" 154) (eq (openVariant (attr (data) "reqToAddress" 154) "Some" 154) (attr (params 194) "publisher" 198) 154) 154) 154) False 154) (verify (or (invert (isVariant (attr (data) "reqTokenAddress" 155) "Some" 155) 155) (and (isVariant (attr (data) "reqTokenAddress" 155) "Some" 155) (eq (openVariant (attr (data) "reqTokenAddress" 155) "Some" 155) (attr (params 194) "tokenAddress" 199) 155) 155) 155) False 155) (verify (or (invert (isVariant (attr (data) "reqTokenAmount" 156) "Some" 156) 156) (and (isVariant (attr (data) "reqTokenAmount" 156) "Some" 156) (eq (openVariant (attr (data) "reqTokenAmount" 156) "Some" 156) (attr (params 194) "tokenAmount" 200) 156) 156) 156) False 156) (verify (or (invert (isVariant (attr (data) "reqPeriodSeconds" 157) "Some" 157) 157) (and (isVariant (attr (data) "reqPeriodSeconds" 157) "Some" 157) (eq (openVariant (attr (data) "reqPeriodSeconds" 157) "Some" 157) (attr (params 194) "periodSeconds" 201) 157) 157) 157) False 157) (verify (or (invert (isVariant (attr (data) "reqGasPrice" 158) "Some" 158) 158) (and (isVariant (attr (data) "reqGasPrice" 158) "Some" 158) (eq (openVariant (attr (data) "reqGasPrice" 158) "Some" 158) (attr (params 194) "gasPrice" 202) 158) 158) 158) False 158) (defineLocal "element" (pack (record 161 (a (attr (params 194) "subscriber" 197)) (b (attr (params 194) "publisher" 198)) (c (attr (params 194) "tokenAddress" 199)) (d (attr (params 194) "tokenAmount" 200)) (e (attr (params 194) "periodSeconds" 201)) (f (attr (params 194) "gasPrice" 202)) (g (attr (params 194) "nonce" 203))) 160) 175) (ifBlock (invert (contains (attr (data) "times" 248) (getLocal "element" 186) 145) 145) ((set (getItem (attr (data) "times" 248) (getLocal "element" 186) 146) (record 146 (active (literal (bool False) 146)) (nextValidTimeStamp (literal (timestamp -1) 146)) (ready (literal (bool False) 146))) 146)) 145) (set (attr (getItem (attr (data) "times" 248) (getLocal "element" 187) 187) "ready" 187) (literal (bool False) 187) 187) (verify (check_signature (attr (params 194) "subs_pub_key" 215) (attr (params 194) "userSignature" 214) (getLocal "element" 188) 188) False 188) (verify (neq (attr (params 194) "subscriber" 197) (attr (params 194) "publisher" 198) 189) False 189) (verify (ge (now) (attr (getItem (attr (data) "times" 248) (getLocal "element" 190) 190) "nextValidTimeStamp" 190) 190) False 190) (set (attr (getItem (attr (data) "times" 248) (getLocal "element" 191) 191) "ready" 191) (literal (bool True) 191) 191) (verify (eq (attr (getItem (attr (data) "times" 248) (getLocal "elements" 218) 218) "ready" 218) (literal (bool True) 218) 218) False 218) (set (attr (getItem (attr (data) "times" 248) (getLocal "elements" 219) 219) "nextValidTimeStamp" 219) (add_seconds (now) (attr (params 194) "periodSeconds" 201) 219) 219) (ifBlock (invert (contains (attr (data) "extraNonce" 149) (attr (params 194) "subscriber" 197) 149) 149) ((set (getItem (attr (data) "extraNonce" 149) (attr (params 194) "subscriber" 197) 150) (record 150 (value (literal (intOrNat 0) 150))) 150)) 149) (ifBlock (gt (attr (params 194) "nonce" 203) (attr (getItem (attr (data) "extraNonce" 149) (attr (params 194) "subscriber" 197) 221) "value" 221) 221) ((set (attr (getItem (attr (data) "extraNonce" 149) (attr (params 194) "subscriber" 197) 222) "value" 222) (attr (params 194) "nonce" 203) 222)) 221) (set (operations 226) (cons (transfer (record 225 (from_ (attr (params 194) "subscriber" 197)) (to_ (attr (params 194) "publisher" 198)) (value (attr (params 194) "tokenAmount" 200))) (literal (mutez 0) 226) (openVariant (contract "transfer" (record ((from_ "address") (to_ "address") (value "nat")) None) (attr (params 194) "tokenAddress" 199) 224) "Some" 224) 226) (operations 226) 226) 226) (ifBlock (gt (attr (params 194) "gasPrice" 202) (literal (intOrNat 0) 228) 228) ((set (operations 231) (cons (transfer (record 230 (from_ (attr (params 194) "subscriber" 197)) (to_ (sender)) (value (attr (params 194) "gasPrice" 202))) (literal (mutez 0) 231) (openVariant (contract "transfer" (record ((from_ "address") (to_ "address") (value "nat")) None) (attr (params 194) "tokenAddress" 199) 229) "Some" 229) 231) (operations 231) 231) 231)) 228))))
flags ()
globals ()
storage_layout ()
entry_points_layout ())