(storage (record 93 (allowance (literal (intOrNat 0) 93)) (balance (literal (intOrNat 0) 93)) (extraNonce (type_annotation (map 102 ) (map (unknown 1) (record ((value "nat")) None)) 102)) (owner (literal (address "tz1NN5QooJWkW44KFfrXqLRaxEa5Wxw3f9FF") -1)) (reqGasPrice (variant "None" (unit) -1)) (reqPeriodSeconds (variant "None" (unit) -1)) (reqToAddress (variant "None" (unit) -1)) (reqTokenAddress (variant "None" (unit) -1)) (reqTokenAmount (variant "None" (unit) -1)) (times (type_annotation (big_map 94 ) (bigmap "bytes" (record ((active "bool") (nextValidTimeStamp "timestamp") (ready "bool")) None)) 94)))
storage_type (())
messages ((cancelSub True ((set_type (params 259) (record ((gasPrice "nat") (nonce "nat") (periodSeconds "int") (publisher "address") (subs_pub_key "key") (subscriber "address") (tokenAddress "address") (tokenAmount "nat") (userSignature "signature")) (Some (("subscriber") (("publisher") (("tokenAddress") (("tokenAmount") (("periodSeconds") (("gasPrice") (("nonce") (("userSignature") ("subs_pub_key"))))))))))) 260) (set_type (record 261 (gasPrice (attr (params 259) "gasPrice" 267)) (nonce (attr (params 259) "nonce" 268)) (periodSeconds (attr (params 259) "periodSeconds" 266)) (publisher (attr (params 259) "publisher" 263)) (subscriber (attr (params 259) "subscriber" 262)) (tokenAddress (attr (params 259) "tokenAddress" 264)) (tokenAmount (attr (params 259) "tokenAmount" 265))) (record ((gasPrice "nat") (nonce "nat") (periodSeconds "int") (publisher "address") (subscriber "address") (tokenAddress "address") (tokenAmount "nat")) (Some (("subscriber") (("publisher") (("tokenAddress") (("tokenAmount") (("periodSeconds") (("gasPrice") ("nonce"))))))))) 165) (verify (or (invert (isVariant (attr (data) "reqToAddress" 166) "Some" 166) 166) (and (isVariant (attr (data) "reqToAddress" 166) "Some" 166) (eq (openVariant (attr (data) "reqToAddress" 166) "Some" 166) (attr (params 259) "publisher" 263) 166) 166) 166) False 166) (verify (or (invert (isVariant (attr (data) "reqTokenAddress" 167) "Some" 167) 167) (and (isVariant (attr (data) "reqTokenAddress" 167) "Some" 167) (eq (openVariant (attr (data) "reqTokenAddress" 167) "Some" 167) (attr (params 259) "tokenAddress" 264) 167) 167) 167) False 167) (verify (or (invert (isVariant (attr (data) "reqTokenAmount" 168) "Some" 168) 168) (and (isVariant (attr (data) "reqTokenAmount" 168) "Some" 168) (eq (openVariant (attr (data) "reqTokenAmount" 168) "Some" 168) (attr (params 259) "tokenAmount" 265) 168) 168) 168) False 168) (verify (or (invert (isVariant (attr (data) "reqPeriodSeconds" 169) "Some" 169) 169) (and (isVariant (attr (data) "reqPeriodSeconds" 169) "Some" 169) (eq (openVariant (attr (data) "reqPeriodSeconds" 169) "Some" 169) (attr (params 259) "periodSeconds" 266) 169) 169) 169) False 169) (verify (or (invert (isVariant (attr (data) "reqGasPrice" 170) "Some" 170) 170) (and (isVariant (attr (data) "reqGasPrice" 170) "Some" 170) (eq (openVariant (attr (data) "reqGasPrice" 170) "Some" 170) (attr (params 259) "gasPrice" 267) 170) 170) 170) False 170) (defineLocal "elements" (pack (record 173 (a (attr (params 259) "tokenAmount" 265)) (gP (attr (params 259) "gasPrice" 267)) (n (attr (params 259) "nonce" 268)) (p (attr (params 259) "publisher" 263)) (pS (attr (params 259) "periodSeconds" 266)) (s (attr (params 259) "subscriber" 262)) (tA (attr (params 259) "tokenAddress" 264))) 172) (unknown 2) 261) (verify (check_signature (attr (params 259) "subs_pub_key" 271) (attr (params 259) "userSignature" 271) (getLocal "elements" 271) 271) False 271) (verify (eq (sender) (attr (params 259) "subscriber" 262) 272) False 272) (set (attr (getItem (attr (data) "times" 273) (getLocal "elements" 273) 273) "nextValidTimeStamp" 273) (literal (timestamp -1) 273) 273))) (executeSubs True ((set_type (params 219) (record ((gasPrice "nat") (nonce "nat") (periodSeconds "int") (publisher "address") (subs_pub_key "key") (subscriber "address") (tokenAddress "address") (tokenAmount "nat") (userSignature "signature")) (Some (("subscriber") (("publisher") (("tokenAddress") (("tokenAmount") (("periodSeconds") (("gasPrice") (("nonce") (("userSignature") ("subs_pub_key"))))))))))) 220) (set_type (record 221 (gasPrice (attr (params 219) "gasPrice" 227)) (nonce (attr (params 219) "nonce" 228)) (periodSeconds (attr (params 219) "periodSeconds" 226)) (publisher (attr (params 219) "publisher" 223)) (subscriber (attr (params 219) "subscriber" 222)) (tokenAddress (attr (params 219) "tokenAddress" 224)) (tokenAmount (attr (params 219) "tokenAmount" 225))) (record ((gasPrice "nat") (nonce "nat") (periodSeconds "int") (publisher "address") (subscriber "address") (tokenAddress "address") (tokenAmount "nat")) (Some (("subscriber") (("publisher") (("tokenAddress") (("tokenAmount") (("periodSeconds") (("gasPrice") ("nonce"))))))))) 165) (verify (or (invert (isVariant (attr (data) "reqToAddress" 166) "Some" 166) 166) (and (isVariant (attr (data) "reqToAddress" 166) "Some" 166) (eq (openVariant (attr (data) "reqToAddress" 166) "Some" 166) (attr (params 219) "publisher" 223) 166) 166) 166) False 166) (verify (or (invert (isVariant (attr (data) "reqTokenAddress" 167) "Some" 167) 167) (and (isVariant (attr (data) "reqTokenAddress" 167) "Some" 167) (eq (openVariant (attr (data) "reqTokenAddress" 167) "Some" 167) (attr (params 219) "tokenAddress" 224) 167) 167) 167) False 167) (verify (or (invert (isVariant (attr (data) "reqTokenAmount" 168) "Some" 168) 168) (and (isVariant (attr (data) "reqTokenAmount" 168) "Some" 168) (eq (openVariant (attr (data) "reqTokenAmount" 168) "Some" 168) (attr (params 219) "tokenAmount" 225) 168) 168) 168) False 168) (verify (or (invert (isVariant (attr (data) "reqPeriodSeconds" 169) "Some" 169) 169) (and (isVariant (attr (data) "reqPeriodSeconds" 169) "Some" 169) (eq (openVariant (attr (data) "reqPeriodSeconds" 169) "Some" 169) (attr (params 219) "periodSeconds" 226) 169) 169) 169) False 169) (verify (or (invert (isVariant (attr (data) "reqGasPrice" 170) "Some" 170) 170) (and (isVariant (attr (data) "reqGasPrice" 170) "Some" 170) (eq (openVariant (attr (data) "reqGasPrice" 170) "Some" 170) (attr (params 219) "gasPrice" 227) 170) 170) 170) False 170) (defineLocal "elements" (pack (record 173 (a (attr (params 219) "tokenAmount" 225)) (gP (attr (params 219) "gasPrice" 227)) (n (attr (params 219) "nonce" 228)) (p (attr (params 219) "publisher" 223)) (pS (attr (params 219) "periodSeconds" 226)) (s (attr (params 219) "subscriber" 222)) (tA (attr (params 219) "tokenAddress" 224))) 172) (unknown 3) 221) (set_type (record 231 (gasPrice (attr (params 219) "gasPrice" 227)) (nonce (attr (params 219) "nonce" 228)) (periodSeconds (attr (params 219) "periodSeconds" 226)) (publisher (attr (params 219) "publisher" 223)) (subs_pub_key (attr (params 219) "subs_pub_key" 240)) (subscriber (attr (params 219) "subscriber" 222)) (tokenAddress (attr (params 219) "tokenAddress" 224)) (tokenAmount (attr (params 219) "tokenAmount" 225)) (userSignature (attr (params 219) "userSignature" 239))) (record ((gasPrice "nat") (nonce "nat") (periodSeconds "int") (publisher "address") (subs_pub_key "key") (subscriber "address") (tokenAddress "address") (tokenAmount "nat") (userSignature "signature")) (Some (("subscriber") (("publisher") (("tokenAddress") (("tokenAmount") (("periodSeconds") (("gasPrice") (("nonce") (("userSignature") ("subs_pub_key"))))))))))) 186) (set_type (record 188 (gasPrice (attr (params 219) "gasPrice" 227)) (nonce (attr (params 219) "nonce" 228)) (periodSeconds (attr (params 219) "periodSeconds" 226)) (publisher (attr (params 219) "publisher" 223)) (subscriber (attr (params 219) "subscriber" 222)) (tokenAddress (attr (params 219) "tokenAddress" 224)) (tokenAmount (attr (params 219) "tokenAmount" 225))) (record ((gasPrice "nat") (nonce "nat") (periodSeconds "int") (publisher "address") (subscriber "address") (tokenAddress "address") (tokenAmount "nat")) (Some (("subscriber") (("publisher") (("tokenAddress") (("tokenAmount") (("periodSeconds") (("gasPrice") ("nonce"))))))))) 165) (verify (or (invert (isVariant (attr (data) "reqToAddress" 166) "Some" 166) 166) (and (isVariant (attr (data) "reqToAddress" 166) "Some" 166) (eq (openVariant (attr (data) "reqToAddress" 166) "Some" 166) (attr (params 219) "publisher" 223) 166) 166) 166) False 166) (verify (or (invert (isVariant (attr (data) "reqTokenAddress" 167) "Some" 167) 167) (and (isVariant (attr (data) "reqTokenAddress" 167) "Some" 167) (eq (openVariant (attr (data) "reqTokenAddress" 167) "Some" 167) (attr (params 219) "tokenAddress" 224) 167) 167) 167) False 167) (verify (or (invert (isVariant (attr (data) "reqTokenAmount" 168) "Some" 168) 168) (and (isVariant (attr (data) "reqTokenAmount" 168) "Some" 168) (eq (openVariant (attr (data) "reqTokenAmount" 168) "Some" 168) (attr (params 219) "tokenAmount" 225) 168) 168) 168) False 168) (verify (or (invert (isVariant (attr (data) "reqPeriodSeconds" 169) "Some" 169) 169) (and (isVariant (attr (data) "reqPeriodSeconds" 169) "Some" 169) (eq (openVariant (attr (data) "reqPeriodSeconds" 169) "Some" 169) (attr (params 219) "periodSeconds" 226) 169) 169) 169) False 169) (verify (or (invert (isVariant (attr (data) "reqGasPrice" 170) "Some" 170) 170) (and (isVariant (attr (data) "reqGasPrice" 170) "Some" 170) (eq (openVariant (attr (data) "reqGasPrice" 170) "Some" 170) (attr (params 219) "gasPrice" 227) 170) 170) 170) False 170) (defineLocal "element" (pack (record 173 (a (attr (params 219) "tokenAmount" 225)) (gP (attr (params 219) "gasPrice" 227)) (n (attr (params 219) "nonce" 228)) (p (attr (params 219) "publisher" 223)) (pS (attr (params 219) "periodSeconds" 226)) (s (attr (params 219) "subscriber" 222)) (tA (attr (params 219) "tokenAddress" 224))) 172) (unknown 4) 187) (ifBlock (invert (contains (attr (data) "times" 273) (getLocal "element" 198) 127) 127) ((set (getItem (attr (data) "times" 273) (getLocal "element" 198) 128) (record 128 (active (literal (bool False) 128)) (nextValidTimeStamp (literal (timestamp -1) 128)) (ready (literal (bool False) 128))) 128)) 127) (set (attr (getItem (attr (data) "times" 273) (getLocal "element" 199) 199) "ready" 199) (literal (bool False) 199) 199) (verify (check_signature (attr (params 219) "subs_pub_key" 240) (attr (params 219) "userSignature" 239) (getLocal "element" 200) 200) False 200) (verify (neq (attr (params 219) "subscriber" 222) (attr (params 219) "publisher" 223) 201) False 201) (verify (ge (now) (attr (getItem (attr (data) "times" 273) (getLocal "element" 202) 202) "nextValidTimeStamp" 202) 202) False 202) (verify (ge (attr (data) "allowance" 203) (add (attr (params 219) "tokenAmount" 225) (attr (params 219) "gasPrice" 227) 203) 203) False 203) (verify (ge (attr (data) "balance" 204) (add (attr (params 219) "tokenAmount" 225) (attr (params 219) "gasPrice" 227) 204) 204) False 204) (set (attr (getItem (attr (data) "times" 273) (getLocal "element" 205) 205) "ready" 205) (literal (bool True) 205) 205) (verify (eq (attr (getItem (attr (data) "times" 273) (getLocal "elements" 243) 243) "ready" 243) (literal (bool True) 243) 243) False 243) (set (attr (getItem (attr (data) "times" 273) (getLocal "elements" 244) 244) "nextValidTimeStamp" 244) (add_seconds (now) (attr (params 219) "periodSeconds" 226) 244) 244) (ifBlock (invert (contains (attr (data) "extraNonce" 131) (attr (params 219) "subscriber" 222) 131) 131) ((set (getItem (attr (data) "extraNonce" 131) (attr (params 219) "subscriber" 222) 132) (record 132 (value (literal (intOrNat 0) 132))) 132)) 131) (ifBlock (gt (attr (params 219) "nonce" 228) (attr (getItem (attr (data) "extraNonce" 131) (attr (params 219) "subscriber" 222) 246) "value" 246) 246) ((set (attr (getItem (attr (data) "extraNonce" 131) (attr (params 219) "subscriber" 222) 247) "value" 247) (attr (params 219) "nonce" 228) 247)) 246) (set (operations 251) (cons (transfer (record 250 (from_ (attr (params 219) "subscriber" 222)) (to_ (attr (params 219) "publisher" 223)) (value (attr (params 219) "tokenAmount" 225))) (literal (mutez 0) 251) (openVariant (contract "transfer" (record ((from_ "address") (to_ "address") (value "nat")) None) (attr (params 219) "tokenAddress" 224) 249) "Some" 249) 251) (operations 251) 251) 251) (ifBlock (gt (attr (params 219) "gasPrice" 227) (literal (intOrNat 0) 253) 253) ((set (operations 256) (cons (transfer (record 255 (from_ (attr (params 219) "subscriber" 222)) (to_ (sender)) (value (attr (params 219) "gasPrice" 227))) (literal (mutez 0) 256) (openVariant (contract "transfer" (record ((from_ "address") (to_ "address") (value "nat")) None) (attr (params 219) "tokenAddress" 224) 254) "Some" 254) 256) (operations 256) 256) 256)) 253))) (updateAllowance True ((set_type (params 149) (record ((spender "address") (subscriber "address") (tokenAddress "address")) (Some (("spender") (("subscriber") ("tokenAddress"))))) 150) (set (operations 161) (cons (transfer (record 160 (contractAddress (to_address (self) 160)) (owner (attr (params 149) "subscriber" 160)) (spender (attr (params 149) "spender" 160))) (literal (mutez 0) 161) (openVariant (contract "getAllowance" (record ((contractAddress "address") (owner "address") (spender "address")) None) (attr (params 149) "tokenAddress" 157) 151) "Some" 151) 161) (operations 161) 161) 161))) (updateBalance True ((set_type (params 135) (record ((subscriber "address") (tokenAddress "address")) (Some (("subscriber") ("tokenAddress")))) 136) (set (operations 146) (cons (transfer (record 145 (contractAddress (to_address (self) 145)) (owner (attr (params 135) "subscriber" 145))) (literal (mutez 0) 146) (openVariant (contract "getBalance" (record ((contractAddress "address") (owner "address")) None) (attr (params 135) "tokenAddress" 142) 137) "Some" 137) 146) (operations 146) 146) 146))) (viewAllowance True ((set_type (params 213) "nat" 214) (set (attr (data) "allowance" 203) (params 213) 215))) (viewBalance True ((set_type (params 208) "nat" 209) (set (attr (data) "balance" 204) (params 208) 210))))
flags ()
globals ()
storage_layout ()
entry_points_layout ())