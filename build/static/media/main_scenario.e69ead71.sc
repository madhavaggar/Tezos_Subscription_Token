[{"shortname": "Subscription", "longname": "Subscription", "scenario": [{"action": "html", "tag": "h1", "inner": "Subscription based Token", "line_no": 277}, {"action": "html", "tag": "p", "inner": "[[TABLEOFCONTENTS]]", "line_no": 279}, {"action": "html", "tag": "h1", "inner": "Accounts", "line_no": 287}, {"action": "show", "html": true, "stripStrings": false, "expression": "(list 288 (account_of_seed \"Administrator\" 282) (account_of_seed \"Alice\" 283) (account_of_seed \"Robert\" 284))", "line_no": 288}, {"action": "html", "tag": "h1", "inner": "Contract", "line_no": 290}, {"action": "html", "tag": "h1", "inner": "Entry points", "line_no": 294}, {"action": "newContract", "id": 1, "export": "(storage (record 5 (administrator (reduce (attr (account_of_seed \"Administrator\" 282) \"address\" 282) 282)) (balances (type_annotation (big_map 7 ) (bigmap (unknown 9) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 7)) (paused (literal (bool False) 5)) (totalSupply (literal (intOrNat 0) 5)))\nstorage_type (())\nmessages ((approve True ((set_type (params 35) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 36) (verify (invert (attr (data) \"paused\" 37) 37) False 37) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 38) (sender) 38) \"approvals\" 38) (attr (params 35) \"spender\" 38) (literal (intOrNat 0) 38) 38) (literal (intOrNat 0) 39) 39) (eq (attr (params 35) \"value\" 39) (literal (intOrNat 0) 39) 39) 39) \"UnsafeAllowanceChange\" 39) (set (getItem (attr (getItem (attr (data) \"balances\" 38) (sender) 40) \"approvals\" 40) (attr (params 35) \"spender\" 38) 40) (attr (params 35) \"value\" 39) 40))) (burn True ((set_type (params 63) (record ((address \"address\") (value \"nat\")) None) 64) (verify (eq (sender) (attr (data) \"administrator\" 65) 65) False 65) (verify (ge (attr (getItem (attr (data) \"balances\" 38) (attr (params 63) \"address\" 66) 66) \"balance\" 66) (attr (params 63) \"value\" 66) 66) False 66) (set (attr (getItem (attr (data) \"balances\" 38) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 38) (attr (params 63) \"address\" 66) 67) \"balance\" 67) (attr (params 63) \"value\" 66) 67) 67) \"Some\" 67) 67) (set (attr (data) \"totalSupply\" 68) (openVariant (isNat (sub (attr (data) \"totalSupply\" 68) (attr (params 63) \"value\" 66) 68) 68) \"Some\" 68) 68))) (getAdministrator True ((set (operations 89) (cons (transfer (attr (data) \"administrator\" 65) (literal (mutez 0) 89) (openVariant (contract \"\" \"address\" (attr (params 88) \"target\" 89) 89) \"Some\" 89) 89) (operations 89) 89) 89))) (getAllowance True ((set (operations 81) (cons (transfer (getItem (attr (getItem (attr (data) \"balances\" 38) (attr (params 80) \"owner\" 81) 81) \"approvals\" 81) (attr (params 80) \"spender\" 81) 81) (literal (mutez 0) 81) (openVariant (contract \"viewAllowance\" \"nat\" (attr (params 80) \"contractAddress\" 81) 81) \"Some\" 81) 81) (operations 81) 81) 81))) (getBalance True ((ifBlock (invert (contains (attr (data) \"balances\" 38) (attr (params 75) \"owner\" 76) 71) 71) ((set (getItem (attr (data) \"balances\" 38) (attr (params 75) \"owner\" 76) 72) (record 72 (approvals (map 72 )) (balance (literal (intOrNat 0) 72))) 72)) 71) (set (operations 77) (cons (transfer (attr (getItem (attr (data) \"balances\" 38) (attr (params 75) \"owner\" 76) 77) \"balance\" 77) (literal (mutez 0) 77) (openVariant (contract \"viewBalance\" \"nat\" (attr (params 75) \"contractAddress\" 77) 77) \"Some\" 77) 77) (operations 77) 77) 77))) (getTotalSupply True ((set (operations 85) (cons (transfer (attr (data) \"totalSupply\" 68) (literal (mutez 0) 85) (openVariant (contract \"\" \"nat\" (attr (params 84) \"target\" 85) 85) \"Some\" 85) 85) (operations 85) 85) 85))) (mint True ((set_type (params 55) (record ((address \"address\") (value \"nat\")) None) 56) (verify (eq (sender) (attr (data) \"administrator\" 65) 57) False 57) (ifBlock (invert (contains (attr (data) \"balances\" 38) (attr (params 55) \"address\" 58) 71) 71) ((set (getItem (attr (data) \"balances\" 38) (attr (params 55) \"address\" 58) 72) (record 72 (approvals (map 72 )) (balance (literal (intOrNat 0) 72))) 72)) 71) (set (attr (getItem (attr (data) \"balances\" 38) (attr (params 55) \"address\" 58) 59) \"balance\" 59) (add (attr (getItem (attr (data) \"balances\" 38) (attr (params 55) \"address\" 58) 59) \"balance\" 59) (attr (params 55) \"value\" 59) 59) 59) (set (attr (data) \"totalSupply\" 68) (add (attr (data) \"totalSupply\" 68) (attr (params 55) \"value\" 59) 60) 60))) (setAdministrator True ((set_type (params 49) \"address\" 50) (verify (eq (sender) (attr (data) \"administrator\" 65) 51) False 51) (set (attr (data) \"administrator\" 65) (params 49) 52))) (setPause True ((set_type (params 43) \"bool\" 44) (verify (eq (sender) (attr (data) \"administrator\" 65) 45) False 45) (set (attr (data) \"paused\" 37) (params 43) 46))) (transfer True ((set_type (params 21) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_\") ((\"to_\") (\"value\"))))) 22) (verify (or (eq (sender) (attr (data) \"administrator\" 65) 23) (and (invert (attr (data) \"paused\" 37) 24) (or (eq (attr (params 21) \"from_\" 25) (sender) 25) (ge (getItem (attr (getItem (attr (data) \"balances\" 38) (attr (params 21) \"from_\" 25) 26) \"approvals\" 26) (sender) 26) (attr (params 21) \"value\" 26) 26) 25) 24) 23) False 23) (ifBlock (invert (contains (attr (data) \"balances\" 38) (attr (params 21) \"to_\" 27) 71) 71) ((set (getItem (attr (data) \"balances\" 38) (attr (params 21) \"to_\" 27) 72) (record 72 (approvals (map 72 )) (balance (literal (intOrNat 0) 72))) 72)) 71) (verify (ge (attr (getItem (attr (data) \"balances\" 38) (attr (params 21) \"from_\" 25) 28) \"balance\" 28) (attr (params 21) \"value\" 26) 28) False 28) (set (attr (getItem (attr (data) \"balances\" 38) (attr (params 21) \"from_\" 25) 29) \"balance\" 29) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 38) (attr (params 21) \"from_\" 25) 29) \"balance\" 29) (attr (params 21) \"value\" 26) 29) 29) \"Some\" 29) 29) (set (attr (getItem (attr (data) \"balances\" 38) (attr (params 21) \"to_\" 27) 30) \"balance\" 30) (add (attr (getItem (attr (data) \"balances\" 38) (attr (params 21) \"to_\" 27) 30) \"balance\" 30) (attr (params 21) \"value\" 26) 30) 30) (ifBlock (and (neq (attr (params 21) \"from_\" 25) (sender) 31) (neq (attr (data) \"administrator\" 65) (sender) 31) 31) ((set (getItem (attr (getItem (attr (data) \"balances\" 38) (attr (params 21) \"from_\" 25) 32) \"approvals\" 32) (sender) 32) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 38) (attr (params 21) \"from_\" 25) 32) \"approvals\" 32) (sender) 32) (attr (params 21) \"value\" 26) 32) 32) \"Some\" 32) 32)) 31))))\nflags ()\nglobals ()\nstorage_layout ()\nentry_points_layout ())", "line_no": 312, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": 0, "export": "(storage (record 93 (allowance (literal (intOrNat 0) 93)) (balance (literal (intOrNat 0) 93)) (extraNonce (type_annotation (map 102 ) (map (unknown 5) (record ((value \"nat\")) None)) 102)) (owner (reduce (attr (account_of_seed \"Administrator\" 282) \"address\" 282) 282)) (reqGasPrice (variant \"None\" (unit) -1)) (reqPeriodSeconds (variant \"None\" (unit) -1)) (reqToAddress (variant \"None\" (unit) -1)) (reqTokenAddress (variant \"None\" (unit) -1)) (reqTokenAmount (variant \"None\" (unit) -1)) (times (type_annotation (big_map 94 ) (bigmap \"bytes\" (record ((active \"bool\") (nextValidTimeStamp \"timestamp\") (ready \"bool\")) None)) 94)))\nstorage_type (())\nmessages ((cancelSub True ((set_type (params 255) (record ((gasPrice \"nat\") (nonce \"nat\") (periodSeconds \"int\") (publisher \"address\") (subs_pub_key \"key\") (subscriber \"address\") (tokenAddress \"address\") (tokenAmount \"nat\") (userSignature \"signature\")) (Some ((\"subscriber\") ((\"publisher\") ((\"tokenAddress\") ((\"tokenAmount\") ((\"periodSeconds\") ((\"gasPrice\") ((\"nonce\") ((\"userSignature\") (\"subs_pub_key\"))))))))))) 256) (set_type (record 257 (gasPrice (attr (params 255) \"gasPrice\" 263)) (nonce (attr (params 255) \"nonce\" 264)) (periodSeconds (attr (params 255) \"periodSeconds\" 262)) (publisher (attr (params 255) \"publisher\" 259)) (subscriber (attr (params 255) \"subscriber\" 258)) (tokenAddress (attr (params 255) \"tokenAddress\" 260)) (tokenAmount (attr (params 255) \"tokenAmount\" 261))) (record ((gasPrice \"nat\") (nonce \"nat\") (periodSeconds \"int\") (publisher \"address\") (subscriber \"address\") (tokenAddress \"address\") (tokenAmount \"nat\")) (Some ((\"subscriber\") ((\"publisher\") ((\"tokenAddress\") ((\"tokenAmount\") ((\"periodSeconds\") ((\"gasPrice\") (\"nonce\"))))))))) 164) (verify (or (invert (isVariant (attr (data) \"reqToAddress\" 165) \"Some\" 165) 165) (and (isVariant (attr (data) \"reqToAddress\" 165) \"Some\" 165) (eq (openVariant (attr (data) \"reqToAddress\" 165) \"Some\" 165) (attr (params 255) \"publisher\" 259) 165) 165) 165) False 165) (verify (or (invert (isVariant (attr (data) \"reqTokenAddress\" 166) \"Some\" 166) 166) (and (isVariant (attr (data) \"reqTokenAddress\" 166) \"Some\" 166) (eq (openVariant (attr (data) \"reqTokenAddress\" 166) \"Some\" 166) (attr (params 255) \"tokenAddress\" 260) 166) 166) 166) False 166) (verify (or (invert (isVariant (attr (data) \"reqTokenAmount\" 167) \"Some\" 167) 167) (and (isVariant (attr (data) \"reqTokenAmount\" 167) \"Some\" 167) (eq (openVariant (attr (data) \"reqTokenAmount\" 167) \"Some\" 167) (attr (params 255) \"tokenAmount\" 261) 167) 167) 167) False 167) (verify (or (invert (isVariant (attr (data) \"reqPeriodSeconds\" 168) \"Some\" 168) 168) (and (isVariant (attr (data) \"reqPeriodSeconds\" 168) \"Some\" 168) (eq (openVariant (attr (data) \"reqPeriodSeconds\" 168) \"Some\" 168) (attr (params 255) \"periodSeconds\" 262) 168) 168) 168) False 168) (verify (or (invert (isVariant (attr (data) \"reqGasPrice\" 169) \"Some\" 169) 169) (and (isVariant (attr (data) \"reqGasPrice\" 169) \"Some\" 169) (eq (openVariant (attr (data) \"reqGasPrice\" 169) \"Some\" 169) (attr (params 255) \"gasPrice\" 263) 169) 169) 169) False 169) (defineLocal \"elements\" (pack (record 172 (a (attr (params 255) \"subscriber\" 258)) (b (attr (params 255) \"publisher\" 259)) (c (attr (params 255) \"tokenAddress\" 260)) (d (attr (params 255) \"tokenAmount\" 261)) (e (attr (params 255) \"periodSeconds\" 262)) (f (attr (params 255) \"gasPrice\" 263)) (g (attr (params 255) \"nonce\" 264))) 171) 257) (verify (check_signature (attr (params 255) \"subs_pub_key\" 267) (attr (params 255) \"userSignature\" 267) (getLocal \"elements\" 267) 267) False 267) (verify (eq (sender) (attr (params 255) \"subscriber\" 258) 268) False 268) (set (attr (getItem (attr (data) \"times\" 269) (getLocal \"elements\" 269) 269) \"nextValidTimeStamp\" 269) (literal (timestamp -1) 269) 269))) (executeSubs True ((set_type (params 215) (record ((gasPrice \"nat\") (nonce \"nat\") (periodSeconds \"int\") (publisher \"address\") (subs_pub_key \"key\") (subscriber \"address\") (tokenAddress \"address\") (tokenAmount \"nat\") (userSignature \"signature\")) (Some ((\"subscriber\") ((\"publisher\") ((\"tokenAddress\") ((\"tokenAmount\") ((\"periodSeconds\") ((\"gasPrice\") ((\"nonce\") ((\"userSignature\") (\"subs_pub_key\"))))))))))) 216) (set_type (record 217 (gasPrice (attr (params 215) \"gasPrice\" 223)) (nonce (attr (params 215) \"nonce\" 224)) (periodSeconds (attr (params 215) \"periodSeconds\" 222)) (publisher (attr (params 215) \"publisher\" 219)) (subscriber (attr (params 215) \"subscriber\" 218)) (tokenAddress (attr (params 215) \"tokenAddress\" 220)) (tokenAmount (attr (params 215) \"tokenAmount\" 221))) (record ((gasPrice \"nat\") (nonce \"nat\") (periodSeconds \"int\") (publisher \"address\") (subscriber \"address\") (tokenAddress \"address\") (tokenAmount \"nat\")) (Some ((\"subscriber\") ((\"publisher\") ((\"tokenAddress\") ((\"tokenAmount\") ((\"periodSeconds\") ((\"gasPrice\") (\"nonce\"))))))))) 164) (verify (or (invert (isVariant (attr (data) \"reqToAddress\" 165) \"Some\" 165) 165) (and (isVariant (attr (data) \"reqToAddress\" 165) \"Some\" 165) (eq (openVariant (attr (data) \"reqToAddress\" 165) \"Some\" 165) (attr (params 215) \"publisher\" 219) 165) 165) 165) False 165) (verify (or (invert (isVariant (attr (data) \"reqTokenAddress\" 166) \"Some\" 166) 166) (and (isVariant (attr (data) \"reqTokenAddress\" 166) \"Some\" 166) (eq (openVariant (attr (data) \"reqTokenAddress\" 166) \"Some\" 166) (attr (params 215) \"tokenAddress\" 220) 166) 166) 166) False 166) (verify (or (invert (isVariant (attr (data) \"reqTokenAmount\" 167) \"Some\" 167) 167) (and (isVariant (attr (data) \"reqTokenAmount\" 167) \"Some\" 167) (eq (openVariant (attr (data) \"reqTokenAmount\" 167) \"Some\" 167) (attr (params 215) \"tokenAmount\" 221) 167) 167) 167) False 167) (verify (or (invert (isVariant (attr (data) \"reqPeriodSeconds\" 168) \"Some\" 168) 168) (and (isVariant (attr (data) \"reqPeriodSeconds\" 168) \"Some\" 168) (eq (openVariant (attr (data) \"reqPeriodSeconds\" 168) \"Some\" 168) (attr (params 215) \"periodSeconds\" 222) 168) 168) 168) False 168) (verify (or (invert (isVariant (attr (data) \"reqGasPrice\" 169) \"Some\" 169) 169) (and (isVariant (attr (data) \"reqGasPrice\" 169) \"Some\" 169) (eq (openVariant (attr (data) \"reqGasPrice\" 169) \"Some\" 169) (attr (params 215) \"gasPrice\" 223) 169) 169) 169) False 169) (defineLocal \"elements\" (pack (record 172 (a (attr (params 215) \"subscriber\" 218)) (b (attr (params 215) \"publisher\" 219)) (c (attr (params 215) \"tokenAddress\" 220)) (d (attr (params 215) \"tokenAmount\" 221)) (e (attr (params 215) \"periodSeconds\" 222)) (f (attr (params 215) \"gasPrice\" 223)) (g (attr (params 215) \"nonce\" 224))) 171) 217) (set_type (record 227 (gasPrice (attr (params 215) \"gasPrice\" 223)) (nonce (attr (params 215) \"nonce\" 224)) (periodSeconds (attr (params 215) \"periodSeconds\" 222)) (publisher (attr (params 215) \"publisher\" 219)) (subs_pub_key (attr (params 215) \"subs_pub_key\" 236)) (subscriber (attr (params 215) \"subscriber\" 218)) (tokenAddress (attr (params 215) \"tokenAddress\" 220)) (tokenAmount (attr (params 215) \"tokenAmount\" 221)) (userSignature (attr (params 215) \"userSignature\" 235))) (record ((gasPrice \"nat\") (nonce \"nat\") (periodSeconds \"int\") (publisher \"address\") (subs_pub_key \"key\") (subscriber \"address\") (tokenAddress \"address\") (tokenAmount \"nat\") (userSignature \"signature\")) (Some ((\"subscriber\") ((\"publisher\") ((\"tokenAddress\") ((\"tokenAmount\") ((\"periodSeconds\") ((\"gasPrice\") ((\"nonce\") ((\"userSignature\") (\"subs_pub_key\"))))))))))) 185) (set_type (record 187 (gasPrice (attr (params 215) \"gasPrice\" 223)) (nonce (attr (params 215) \"nonce\" 224)) (periodSeconds (attr (params 215) \"periodSeconds\" 222)) (publisher (attr (params 215) \"publisher\" 219)) (subscriber (attr (params 215) \"subscriber\" 218)) (tokenAddress (attr (params 215) \"tokenAddress\" 220)) (tokenAmount (attr (params 215) \"tokenAmount\" 221))) (record ((gasPrice \"nat\") (nonce \"nat\") (periodSeconds \"int\") (publisher \"address\") (subscriber \"address\") (tokenAddress \"address\") (tokenAmount \"nat\")) (Some ((\"subscriber\") ((\"publisher\") ((\"tokenAddress\") ((\"tokenAmount\") ((\"periodSeconds\") ((\"gasPrice\") (\"nonce\"))))))))) 164) (verify (or (invert (isVariant (attr (data) \"reqToAddress\" 165) \"Some\" 165) 165) (and (isVariant (attr (data) \"reqToAddress\" 165) \"Some\" 165) (eq (openVariant (attr (data) \"reqToAddress\" 165) \"Some\" 165) (attr (params 215) \"publisher\" 219) 165) 165) 165) False 165) (verify (or (invert (isVariant (attr (data) \"reqTokenAddress\" 166) \"Some\" 166) 166) (and (isVariant (attr (data) \"reqTokenAddress\" 166) \"Some\" 166) (eq (openVariant (attr (data) \"reqTokenAddress\" 166) \"Some\" 166) (attr (params 215) \"tokenAddress\" 220) 166) 166) 166) False 166) (verify (or (invert (isVariant (attr (data) \"reqTokenAmount\" 167) \"Some\" 167) 167) (and (isVariant (attr (data) \"reqTokenAmount\" 167) \"Some\" 167) (eq (openVariant (attr (data) \"reqTokenAmount\" 167) \"Some\" 167) (attr (params 215) \"tokenAmount\" 221) 167) 167) 167) False 167) (verify (or (invert (isVariant (attr (data) \"reqPeriodSeconds\" 168) \"Some\" 168) 168) (and (isVariant (attr (data) \"reqPeriodSeconds\" 168) \"Some\" 168) (eq (openVariant (attr (data) \"reqPeriodSeconds\" 168) \"Some\" 168) (attr (params 215) \"periodSeconds\" 222) 168) 168) 168) False 168) (verify (or (invert (isVariant (attr (data) \"reqGasPrice\" 169) \"Some\" 169) 169) (and (isVariant (attr (data) \"reqGasPrice\" 169) \"Some\" 169) (eq (openVariant (attr (data) \"reqGasPrice\" 169) \"Some\" 169) (attr (params 215) \"gasPrice\" 223) 169) 169) 169) False 169) (defineLocal \"element\" (pack (record 172 (a (attr (params 215) \"subscriber\" 218)) (b (attr (params 215) \"publisher\" 219)) (c (attr (params 215) \"tokenAddress\" 220)) (d (attr (params 215) \"tokenAmount\" 221)) (e (attr (params 215) \"periodSeconds\" 222)) (f (attr (params 215) \"gasPrice\" 223)) (g (attr (params 215) \"nonce\" 224))) 171) 186) (ifBlock (invert (contains (attr (data) \"times\" 269) (getLocal \"element\" 197) 127) 127) ((set (getItem (attr (data) \"times\" 269) (getLocal \"element\" 197) 128) (record 128 (active (literal (bool False) 128)) (nextValidTimeStamp (literal (timestamp -1) 128)) (ready (literal (bool False) 128))) 128)) 127) (set (attr (getItem (attr (data) \"times\" 269) (getLocal \"element\" 198) 198) \"ready\" 198) (literal (bool False) 198) 198) (verify (check_signature (attr (params 215) \"subs_pub_key\" 236) (attr (params 215) \"userSignature\" 235) (getLocal \"element\" 199) 199) False 199) (verify (neq (attr (params 215) \"subscriber\" 218) (attr (params 215) \"publisher\" 219) 200) False 200) (verify (ge (now) (attr (getItem (attr (data) \"times\" 269) (getLocal \"element\" 201) 201) \"nextValidTimeStamp\" 201) 201) False 201) (set (attr (getItem (attr (data) \"times\" 269) (getLocal \"element\" 202) 202) \"ready\" 202) (literal (bool True) 202) 202) (verify (eq (attr (getItem (attr (data) \"times\" 269) (getLocal \"elements\" 239) 239) \"ready\" 239) (literal (bool True) 239) 239) False 239) (set (attr (getItem (attr (data) \"times\" 269) (getLocal \"elements\" 240) 240) \"nextValidTimeStamp\" 240) (add_seconds (now) (attr (params 215) \"periodSeconds\" 222) 240) 240) (ifBlock (invert (contains (attr (data) \"extraNonce\" 131) (attr (params 215) \"subscriber\" 218) 131) 131) ((set (getItem (attr (data) \"extraNonce\" 131) (attr (params 215) \"subscriber\" 218) 132) (record 132 (value (literal (intOrNat 0) 132))) 132)) 131) (ifBlock (gt (attr (params 215) \"nonce\" 224) (attr (getItem (attr (data) \"extraNonce\" 131) (attr (params 215) \"subscriber\" 218) 242) \"value\" 242) 242) ((set (attr (getItem (attr (data) \"extraNonce\" 131) (attr (params 215) \"subscriber\" 218) 243) \"value\" 243) (attr (params 215) \"nonce\" 224) 243)) 242) (set (operations 247) (cons (transfer (record 246 (from_ (attr (params 215) \"subscriber\" 218)) (to_ (attr (params 215) \"publisher\" 219)) (value (attr (params 215) \"tokenAmount\" 221))) (literal (mutez 0) 247) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) None) (attr (params 215) \"tokenAddress\" 220) 245) \"Some\" 245) 247) (operations 247) 247) 247) (ifBlock (gt (attr (params 215) \"gasPrice\" 223) (literal (intOrNat 0) 249) 249) ((set (operations 252) (cons (transfer (record 251 (from_ (attr (params 215) \"subscriber\" 218)) (to_ (sender)) (value (attr (params 215) \"gasPrice\" 223))) (literal (mutez 0) 252) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) None) (attr (params 215) \"tokenAddress\" 220) 250) \"Some\" 250) 252) (operations 252) 252) 252)) 249))) (updateAllowance True ((set_type (params 149) (record ((spender \"address\") (subscriber \"address\") (tokenAddress \"address\")) (Some ((\"spender\") ((\"subscriber\") (\"tokenAddress\"))))) 150) (set (operations 161) (cons (transfer (record 160 (contractAddress (to_address (self) 160)) (owner (attr (params 149) \"subscriber\" 160)) (spender (attr (params 149) \"spender\" 160))) (literal (mutez 0) 161) (openVariant (contract \"getAllowance\" (record ((contractAddress \"address\") (owner \"address\") (spender \"address\")) None) (attr (params 149) \"tokenAddress\" 157) 151) \"Some\" 151) 161) (operations 161) 161) 161))) (updateBalance True ((set_type (params 135) (record ((subscriber \"address\") (tokenAddress \"address\")) (Some ((\"subscriber\") (\"tokenAddress\")))) 136) (set (operations 146) (cons (transfer (record 145 (contractAddress (to_address (self) 145)) (owner (attr (params 135) \"subscriber\" 145))) (literal (mutez 0) 146) (openVariant (contract \"getBalance\" (record ((contractAddress \"address\") (owner \"address\")) None) (attr (params 135) \"tokenAddress\" 142) 137) \"Some\" 137) 146) (operations 146) 146) 146))) (viewAllowance True ((set_type (params 210) \"nat\" 211) (set (attr (data) \"allowance\" 212) (params 210) 212))) (viewBalance True ((set_type (params 205) \"nat\" 206) (set (attr (data) \"balance\" 207) (params 205) 207))))\nflags ()\nglobals ()\nstorage_layout ()\nentry_points_layout ())", "line_no": 313, "show": true, "accept_unknown_types": false}, {"action": "html", "tag": "h1", "inner": "Test 1", "line_no": 321}, {"action": "html", "tag": "h2", "inner": "Mint for Alice First", "line_no": 322}, {"action": "message", "id": 1, "message": "mint", "params": "(record 323 (address (reduce (attr (account_of_seed \"Alice\" 283) \"address\" 283) 283)) (value (literal (intOrNat 1200) 323)))", "line_no": 323, "title": "", "messageClass": "", "source": "none", "sender": "seed:Administrator", "chain_id": "", "time": 0, "amount": "(literal (mutez 0) 1)", "level": 0, "show": true, "valid": true}, {"action": "html", "tag": "h2", "inner": "Approve First", "line_no": 325}, {"action": "message", "id": 1, "message": "approve", "params": "(record 326 (spender (literal (local-address 0) 93)) (value (literal (intOrNat 1200) 326)))", "line_no": 326, "title": "", "messageClass": "", "source": "none", "sender": "seed:Alice", "chain_id": "", "time": 0, "amount": "(literal (mutez 0) 1)", "level": 0, "show": true, "valid": true}, {"action": "html", "tag": "h2", "inner": "Update Balance", "line_no": 328}, {"action": "message", "id": 0, "message": "updateBalance", "params": "(record 329 (subscriber (reduce (attr (account_of_seed \"Alice\" 283) \"address\" 283) 283)) (tokenAddress (literal (local-address 1) 5)))", "line_no": 329, "title": "", "messageClass": "", "source": "none", "sender": "none", "chain_id": "", "time": 0, "amount": "(literal (mutez 0) 1)", "level": 0, "show": true, "valid": true}, {"action": "html", "tag": "h2", "inner": "Update Allowance", "line_no": 331}, {"action": "message", "id": 0, "message": "updateAllowance", "params": "(record 332 (spender (literal (local-address 0) 93)) (subscriber (reduce (attr (account_of_seed \"Alice\" 283) \"address\" 283) 283)) (tokenAddress (literal (local-address 1) 5)))", "line_no": 332, "title": "", "messageClass": "", "source": "none", "sender": "none", "chain_id": "", "time": 0, "amount": "(literal (mutez 0) 1)", "level": 0, "show": true, "valid": true}, {"action": "html", "tag": "h2", "inner": "Execute Subscription", "line_no": 335}, {"action": "message", "id": 0, "message": "executeSubs", "params": "(record 336 (gasPrice (literal (intOrNat 0) 336)) (nonce (literal (intOrNat 1) 336)) (periodSeconds (literal (intOrNat 60) 336)) (publisher (reduce (attr (account_of_seed \"Administrator\" 282) \"address\" 282) 282)) (subs_pub_key (reduce (attr (account_of_seed \"Alice\" 283) \"public_key\" 283) 283)) (subscriber (reduce (attr (account_of_seed \"Alice\" 283) \"address\" 283) 283)) (tokenAddress (literal (local-address 1) 5)) (tokenAmount (literal (intOrNat 100) 336)) (userSignature (reduce (make_signature (reduce (attr (account_of_seed \"Alice\" 283) \"secret_key\" 283) 283) (pack (record 316 (a (reduce (attr (account_of_seed \"Alice\" 283) \"address\" 283) 283)) (b (reduce (attr (account_of_seed \"Administrator\" 282) \"address\" 282) 282)) (c (literal (local-address 1) 5)) (d (literal (intOrNat 100) 316)) (e (literal (intOrNat 60) 316)) (f (literal (intOrNat 0) 316)) (g (literal (intOrNat 1) 316))) 316) \"Raw\" 317) 317)))", "line_no": 336, "title": "", "messageClass": "", "source": "none", "sender": "none", "chain_id": "", "time": 0, "amount": "(literal (mutez 0) 1)", "level": 0, "show": true, "valid": true}, {"action": "html", "tag": "h2", "inner": "Update Balance", "line_no": 338}, {"action": "message", "id": 0, "message": "updateBalance", "params": "(record 339 (subscriber (reduce (attr (account_of_seed \"Alice\" 283) \"address\" 283) 283)) (tokenAddress (literal (local-address 1) 5)))", "line_no": 339, "title": "", "messageClass": "", "source": "none", "sender": "none", "chain_id": "", "time": 0, "amount": "(literal (mutez 0) 1)", "level": 0, "show": true, "valid": true}, {"action": "html", "tag": "h2", "inner": "Update Allowance", "line_no": 341}, {"action": "message", "id": 0, "message": "updateAllowance", "params": "(record 342 (spender (literal (local-address 0) 93)) (subscriber (reduce (attr (account_of_seed \"Alice\" 283) \"address\" 283) 283)) (tokenAddress (literal (local-address 1) 5)))", "line_no": 342, "title": "", "messageClass": "", "source": "none", "sender": "none", "chain_id": "", "time": 0, "amount": "(literal (mutez 0) 1)", "level": 0, "show": true, "valid": true}, {"action": "html", "tag": "h2", "inner": "Execute Subscription - 2", "line_no": 345}, {"action": "message", "id": 0, "message": "executeSubs", "params": "(record 346 (gasPrice (literal (intOrNat 0) 346)) (nonce (literal (intOrNat 1) 346)) (periodSeconds (literal (intOrNat 60) 346)) (publisher (reduce (attr (account_of_seed \"Administrator\" 282) \"address\" 282) 282)) (subs_pub_key (reduce (attr (account_of_seed \"Alice\" 283) \"public_key\" 283) 283)) (subscriber (reduce (attr (account_of_seed \"Alice\" 283) \"address\" 283) 283)) (tokenAddress (literal (local-address 1) 5)) (tokenAmount (literal (intOrNat 100) 346)) (userSignature (reduce (make_signature (reduce (attr (account_of_seed \"Alice\" 283) \"secret_key\" 283) 283) (pack (record 316 (a (reduce (attr (account_of_seed \"Alice\" 283) \"address\" 283) 283)) (b (reduce (attr (account_of_seed \"Administrator\" 282) \"address\" 282) 282)) (c (literal (local-address 1) 5)) (d (literal (intOrNat 100) 316)) (e (literal (intOrNat 60) 316)) (f (literal (intOrNat 0) 316)) (g (literal (intOrNat 1) 316))) 316) \"Raw\" 317) 317)))", "line_no": 346, "title": "", "messageClass": "", "source": "none", "sender": "none", "chain_id": "", "time": 60, "amount": "(literal (mutez 0) 1)", "level": 0, "show": true, "valid": true}, {"action": "html", "tag": "h2", "inner": "Update Balance", "line_no": 348}, {"action": "message", "id": 0, "message": "updateBalance", "params": "(record 349 (subscriber (reduce (attr (account_of_seed \"Alice\" 283) \"address\" 283) 283)) (tokenAddress (literal (local-address 1) 5)))", "line_no": 349, "title": "", "messageClass": "", "source": "none", "sender": "none", "chain_id": "", "time": 60, "amount": "(literal (mutez 0) 1)", "level": 0, "show": true, "valid": true}, {"action": "html", "tag": "h2", "inner": "Update Allowance", "line_no": 351}, {"action": "message", "id": 0, "message": "updateAllowance", "params": "(record 352 (spender (literal (local-address 0) 93)) (subscriber (reduce (attr (account_of_seed \"Alice\" 283) \"address\" 283) 283)) (tokenAddress (literal (local-address 1) 5)))", "line_no": 352, "title": "", "messageClass": "", "source": "none", "sender": "none", "chain_id": "", "time": 60, "amount": "(literal (mutez 0) 1)", "level": 0, "show": true, "valid": true}, {"action": "html", "tag": "h2", "inner": "Cancel Subscription", "line_no": 354}, {"action": "message", "id": 0, "message": "cancelSub", "params": "(record 355 (gasPrice (literal (intOrNat 0) 355)) (nonce (literal (intOrNat 1) 355)) (periodSeconds (literal (intOrNat 60) 355)) (publisher (reduce (attr (account_of_seed \"Administrator\" 282) \"address\" 282) 282)) (subs_pub_key (reduce (attr (account_of_seed \"Alice\" 283) \"public_key\" 283) 283)) (subscriber (reduce (attr (account_of_seed \"Alice\" 283) \"address\" 283) 283)) (tokenAddress (literal (local-address 1) 5)) (tokenAmount (literal (intOrNat 100) 355)) (userSignature (reduce (make_signature (reduce (attr (account_of_seed \"Alice\" 283) \"secret_key\" 283) 283) (pack (record 316 (a (reduce (attr (account_of_seed \"Alice\" 283) \"address\" 283) 283)) (b (reduce (attr (account_of_seed \"Administrator\" 282) \"address\" 282) 282)) (c (literal (local-address 1) 5)) (d (literal (intOrNat 100) 316)) (e (literal (intOrNat 60) 316)) (f (literal (intOrNat 0) 316)) (g (literal (intOrNat 1) 316))) 316) \"Raw\" 317) 317)))", "line_no": 355, "title": "", "messageClass": "", "source": "none", "sender": "seed:Alice", "chain_id": "", "time": 60, "amount": "(literal (mutez 0) 1)", "level": 0, "show": true, "valid": true}, {"action": "html", "tag": "h1", "inner": "Test 2", "line_no": 359}, {"action": "html", "tag": "h2", "inner": "Mint for Alice First", "line_no": 365}, {"action": "message", "id": 1, "message": "mint", "params": "(record 366 (address (reduce (attr (account_of_seed \"Alice\" 283) \"address\" 283) 283)) (value (literal (intOrNat 1200) 366)))", "line_no": 366, "title": "", "messageClass": "", "source": "none", "sender": "seed:Administrator", "chain_id": "", "time": 0, "amount": "(literal (mutez 0) 1)", "level": 0, "show": true, "valid": true}, {"action": "html", "tag": "h2", "inner": "Update Balance", "line_no": 368}, {"action": "message", "id": 0, "message": "updateBalance", "params": "(record 369 (subscriber (reduce (attr (account_of_seed \"Alice\" 283) \"address\" 283) 283)) (tokenAddress (literal (local-address 1) 5)))", "line_no": 369, "title": "", "messageClass": "", "source": "none", "sender": "none", "chain_id": "", "time": 60, "amount": "(literal (mutez 0) 1)", "level": 0, "show": true, "valid": true}, {"action": "html", "tag": "h2", "inner": "Update Allowance", "line_no": 371}, {"action": "message", "id": 0, "message": "updateAllowance", "params": "(record 372 (spender (literal (local-address 0) 93)) (subscriber (reduce (attr (account_of_seed \"Alice\" 283) \"address\" 283) 283)) (tokenAddress (literal (local-address 1) 5)))", "line_no": 372, "title": "", "messageClass": "", "source": "none", "sender": "none", "chain_id": "", "time": 60, "amount": "(literal (mutez 0) 1)", "level": 0, "show": true, "valid": true}, {"action": "html", "tag": "h2", "inner": "Execute Subscription", "line_no": 375}, {"action": "message", "id": 0, "message": "executeSubs", "params": "(record 376 (gasPrice (literal (intOrNat 5) 376)) (nonce (literal (intOrNat 1) 376)) (periodSeconds (literal (intOrNat 60) 376)) (publisher (reduce (attr (account_of_seed \"Administrator\" 282) \"address\" 282) 282)) (subs_pub_key (reduce (attr (account_of_seed \"Alice\" 283) \"public_key\" 283) 283)) (subscriber (reduce (attr (account_of_seed \"Alice\" 283) \"address\" 283) 283)) (tokenAddress (literal (local-address 1) 5)) (tokenAmount (literal (intOrNat 100) 376)) (userSignature (reduce (make_signature (reduce (attr (account_of_seed \"Alice\" 283) \"secret_key\" 283) 283) (pack (record 360 (a (reduce (attr (account_of_seed \"Alice\" 283) \"address\" 283) 283)) (b (reduce (attr (account_of_seed \"Administrator\" 282) \"address\" 282) 282)) (c (literal (local-address 1) 5)) (d (literal (intOrNat 100) 360)) (e (literal (intOrNat 60) 360)) (f (literal (intOrNat 5) 360)) (g (literal (intOrNat 1) 360))) 360) \"Raw\" 361) 361)))", "line_no": 376, "title": "", "messageClass": "", "source": "none", "sender": "none", "chain_id": "", "time": 60, "amount": "(literal (mutez 0) 1)", "level": 0, "show": true, "valid": true}, {"action": "html", "tag": "h2", "inner": "Update Balance", "line_no": 378}, {"action": "message", "id": 0, "message": "updateBalance", "params": "(record 379 (subscriber (reduce (attr (account_of_seed \"Alice\" 283) \"address\" 283) 283)) (tokenAddress (literal (local-address 1) 5)))", "line_no": 379, "title": "", "messageClass": "", "source": "none", "sender": "none", "chain_id": "", "time": 60, "amount": "(literal (mutez 0) 1)", "level": 0, "show": true, "valid": true}, {"action": "html", "tag": "h2", "inner": "Update Allowance", "line_no": 381}, {"action": "message", "id": 0, "message": "updateAllowance", "params": "(record 382 (spender (literal (local-address 0) 93)) (subscriber (reduce (attr (account_of_seed \"Alice\" 283) \"address\" 283) 283)) (tokenAddress (literal (local-address 1) 5)))", "line_no": 382, "title": "", "messageClass": "", "source": "none", "sender": "none", "chain_id": "", "time": 60, "amount": "(literal (mutez 0) 1)", "level": 0, "show": true, "valid": true}, {"action": "html", "tag": "h2", "inner": "Execute Subscription - 2", "line_no": 385}, {"action": "message", "id": 0, "message": "executeSubs", "params": "(record 386 (gasPrice (literal (intOrNat 5) 386)) (nonce (literal (intOrNat 1) 386)) (periodSeconds (literal (intOrNat 60) 386)) (publisher (reduce (attr (account_of_seed \"Administrator\" 282) \"address\" 282) 282)) (subs_pub_key (reduce (attr (account_of_seed \"Alice\" 283) \"public_key\" 283) 283)) (subscriber (reduce (attr (account_of_seed \"Alice\" 283) \"address\" 283) 283)) (tokenAddress (literal (local-address 1) 5)) (tokenAmount (literal (intOrNat 100) 386)) (userSignature (reduce (make_signature (reduce (attr (account_of_seed \"Alice\" 283) \"secret_key\" 283) 283) (pack (record 360 (a (reduce (attr (account_of_seed \"Alice\" 283) \"address\" 283) 283)) (b (reduce (attr (account_of_seed \"Administrator\" 282) \"address\" 282) 282)) (c (literal (local-address 1) 5)) (d (literal (intOrNat 100) 360)) (e (literal (intOrNat 60) 360)) (f (literal (intOrNat 5) 360)) (g (literal (intOrNat 1) 360))) 360) \"Raw\" 361) 361)))", "line_no": 386, "title": "", "messageClass": "", "source": "none", "sender": "none", "chain_id": "", "time": 120, "amount": "(literal (mutez 0) 1)", "level": 0, "show": true, "valid": true}, {"action": "html", "tag": "h2", "inner": "Update Balance", "line_no": 388}, {"action": "message", "id": 0, "message": "updateBalance", "params": "(record 389 (subscriber (reduce (attr (account_of_seed \"Alice\" 283) \"address\" 283) 283)) (tokenAddress (literal (local-address 1) 5)))", "line_no": 389, "title": "", "messageClass": "", "source": "none", "sender": "none", "chain_id": "", "time": 120, "amount": "(literal (mutez 0) 1)", "level": 0, "show": true, "valid": true}, {"action": "html", "tag": "h2", "inner": "Update Allowance", "line_no": 391}, {"action": "message", "id": 0, "message": "updateAllowance", "params": "(record 392 (spender (literal (local-address 0) 93)) (subscriber (reduce (attr (account_of_seed \"Alice\" 283) \"address\" 283) 283)) (tokenAddress (literal (local-address 1) 5)))", "line_no": 392, "title": "", "messageClass": "", "source": "none", "sender": "none", "chain_id": "", "time": 120, "amount": "(literal (mutez 0) 1)", "level": 0, "show": true, "valid": true}, {"action": "html", "tag": "h2", "inner": "Cancel Subscription", "line_no": 394}, {"action": "message", "id": 0, "message": "cancelSub", "params": "(record 395 (gasPrice (literal (intOrNat 5) 395)) (nonce (literal (intOrNat 1) 395)) (periodSeconds (literal (intOrNat 60) 395)) (publisher (reduce (attr (account_of_seed \"Administrator\" 282) \"address\" 282) 282)) (subs_pub_key (reduce (attr (account_of_seed \"Alice\" 283) \"public_key\" 283) 283)) (subscriber (reduce (attr (account_of_seed \"Alice\" 283) \"address\" 283) 283)) (tokenAddress (literal (local-address 1) 5)) (tokenAmount (literal (intOrNat 100) 395)) (userSignature (reduce (make_signature (reduce (attr (account_of_seed \"Alice\" 283) \"secret_key\" 283) 283) (pack (record 360 (a (reduce (attr (account_of_seed \"Alice\" 283) \"address\" 283) 283)) (b (reduce (attr (account_of_seed \"Administrator\" 282) \"address\" 282) 282)) (c (literal (local-address 1) 5)) (d (literal (intOrNat 100) 360)) (e (literal (intOrNat 60) 360)) (f (literal (intOrNat 5) 360)) (g (literal (intOrNat 1) 360))) 360) \"Raw\" 361) 361)))", "line_no": 395, "title": "", "messageClass": "", "source": "none", "sender": "seed:Alice", "chain_id": "", "time": 120, "amount": "(literal (mutez 0) 1)", "level": 0, "show": true, "valid": true}]}]