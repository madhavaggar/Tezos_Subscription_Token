{"version":3,"sources":["dapparatus/contractloader.js","dapparatus/metamask.js","components/subscriber.js","components/publisher.js","back-arrow.png","components/publisherDeploy.js","components/subscriberApprove.js","metamask.png","logo-icon.png","App.test.js","contracts/contracts.js","dapparatus/button.js","dapparatus/gas.js","serviceWorker.js","setupTests.js","dapparatus/scaler.js","components/particles.js","loader.gif","dapparatus/blockie.js","../src sync /^/.//.*$","bkg.jpg","contracts/build/main/Subscription/main.smlse","contracts/build/main/Subscription/main_compiled.tz","contracts/build/main/Subscription/main_pure.py","contracts/build/main/Subscription/main_scenario.sc","contracts/build/main/Subscription/main_storage_init.tz","contracts/build/main/Subscription/main_types.sp","contracts/build/main/WasteToken/main.smlse","contracts/build/main/WasteToken/main_compiled.tz","contracts/build/main/WasteToken/main_pure.py","contracts/build/main/WasteToken/main_scenario.sc","contracts/build/main/WasteToken/main_storage_init.tz","contracts/build/main/WasteToken/main_types.sp","loader.png","App.js","coins.js","ethereum.png","components/mainui.js","particles.png","dapparatus/address.js","index.js"],"names":["json","require","defaultConfig","ContractLoader","props","contractLoader","contractName","customAddress","a","i","DEBUG","state","config","endsWith","startsWith","contractAddress","contractObject","address","console","log","Tezos","setProvider","rpc","contract","at","resultingContract","methods","_address","_contract","componentDidMount","contractList","contracts","c","setState","onReady","bind","deepmerge","this","hide","contractDisplay","push","key","style","margin","padding","Component","interval","float","paddingRight","marginTop","paddingTop","zIndex","textAlign","width","boxStyleBefore","textStyle","fontSize","fontWeight","color","warningStyle","blockieStyle","size","top","right","requiredNetwork","Metamask","checkMetamask","hasRequestedAccess","onUpdate","TezosToolkit","TezBridgeWallet","wallet","setHost","setWalletProvider","getPKH","accountPkh","tz","getBalance","balance","parseFloat","toNumber","status","update","tzstats","account","setInterval","POLLINTERVAL","clearInterval","metamask","target","href","maxHeight","verticalAlign","src","logo","requiredNetworkText","n","showBalance","Math","round","ETHPRECISION","ln","length","displayName","slice","boxStyle","eth","position","onClick","clickBlockie","seed","scale","outerBoxStyle","origin","adjustedZoom","monthOptions","value","text","Subscriber","toAddress","prefilledParams","tokenAmount","timeAmount","timeType","tokenAddress","gasPrice","tokenName","e","data","name","updateUrl","url","window","location","pathname","backendUrl","customContractLoader","subscriptionContract","periodSeconds","storage","get","value1","nonce","undefined","parseInt","Object","keys","parts","realTokenAmount","realGasPrice","toString","prim","args","string","int","type","packData","packed","subscriptionHash","signer","TezBridgeSigner","tezbridge","request","method","sign","signature","prefixSig","postData","axios","post","headers","then","response","catch","error","isLoaded","items","WasteToken","symbol","subscriptionsContract","requiredToAddress","requiredTokenAddress","coins","requiredTokenName","requiredTokenAmount","requiredPeriodSeconds","requiredTimeAmount","requiredTimeType","requiredGasPrice","email","coinOptions","className","Loader","substring","startZoomAt","left","opacity","sendSubscription","image","avatar","imageUrl","onChange","handleInput","selectOnNavigation","selection","options","placeholder","Publisher","loading","maxWidth","deploySubscription","cursor","setMode","Backarrow","module","exports","QRCode","PublisherDeploy","deployedAddress","pollInterval","SubscriberApprove","approved","approve","subscription","crossdomain","err","tokenContract","foundToken","token","load","balances","value2","approvals","from","to","approvedColor","particleRender","Particles","amount","send","op","confirmation","hash","JSON","stringify","it","div","document","createElement","ReactDOM","render","unmountComponentAtNode","Button","clicked","setTimeout","apply","arguments","buttonStyles","display","backgroundColor","border","fontFamily","textTransform","boxShadow","textShadow","click","children","Gas","gwei","checkOnGasPrices","network","hardcodedGwei","average","setMainGasTo","isLocalhost","Boolean","hostname","match","register","navigator","URL","process","addEventListener","swUrl","fetch","contentType","indexOf","serviceWorker","ready","registration","unregister","reload","registerValidSW","checkValidServiceWorker","onupdatefound","installingWorker","installing","onstatechange","controller","onSuccess","message","Scaler","documentElement","clientWidth","height","clientHeight","updateDimensions","removeEventListener","zoom","min","transform","transformOrigin","ParticlesRender","Blockie","map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","Error","code","resolve","App","path","replace","startMode","doingTransaction","mode","contractLink","pkh","admin","originate","times","MichelsonMap","extraNonce","owner","allowance","reqToAddress","reqTokenAddress","reqTokenAmount","reqPeriodSeconds","reqGasPrice","deployingAddress","body","connectedDisplay","contractsDisplay","noTezosDisplay","customLoader","Subscription","Coins","unshift","buttonPress","alert","forkBanner","MainUI","Logo","Address","etherscan","blockie","showBlockie","blockieSize","nameString","showAddress","paddingLeft","getElementById"],"mappings":"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","file":"static/js/main.87b838fc.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport deepmerge from 'deepmerge';\r\nconst json = require('../contracts/config.json');\r\n\r\nlet defaultConfig = {}\r\ndefaultConfig.DEBUG = true;\r\ndefaultConfig.hide = true;\r\nclass ContractLoader extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    let config = defaultConfig\r\n    if(props.config) {\r\n      config = deepmerge(config, props.config)\r\n    }\r\n    this.state = {\r\n      config: config,\r\n      contracts: {}\r\n    }\r\n  }\r\n  contractLoader = async (contractName,customAddress) => {\r\n    let {DEBUG} = this.state.config\r\n    let resultingContract\r\n   \r\n    let contractAddress\r\n    for(var i in json){\r\n      if(i.endsWith(\"ContractAddress\") && i.startsWith(contractName)){\r\n        contractAddress = json[i]\r\n      }\r\n    }\r\n    try{\r\n      let contractObject = {\r\n        address: contractAddress\r\n      }\r\n      if(customAddress){\r\n        contractObject.address = customAddress\r\n      }\r\n      if(DEBUG) console.log(\"ContractLoader - Loading \",contractName,contractObject)\r\n\r\n      this.props.Tezos.setProvider({ rpc: 'https://api.tez.ie/rpc/carthagenet' })\r\n\r\n      let contract = await this.props.Tezos.contract.at(contractObject.address);\r\n\r\n      resultingContract = contract.methods\r\n      resultingContract._address = contractObject.address\r\n      resultingContract._contract = contract\r\n    }catch(e){\r\n      console.log(\"ERROR LOADING CONTRACT \"+contractName,e)\r\n    }\r\n    return resultingContract\r\n  }\r\n  componentDidMount= async () => {\r\n    let {require} = this.props\r\n    let {DEBUG} = this.state.config\r\n    let contractList = require(\"contracts/contracts.js\")\r\n    if(DEBUG) console.log(\"ContractLoader - Loading Contracts\",contractList)\r\n    let contracts = {}\r\n    for(let c in contractList){\r\n      let contractName = contractList[c];\r\n      contracts[contractName] = await this.contractLoader(contractName)\r\n    }\r\n    this.setState({contracts:contracts},()=>{\r\n      this.props.onReady(this.state.contracts,this.contractLoader.bind(this))\r\n    })\r\n  }\r\n  render(){\r\n    if(this.state.config.hide){\r\n      return false\r\n    } else {\r\n      let contractDisplay = []\r\n      if(this.state.contracts){\r\n        for(let c in this.state.contracts){\r\n          contractDisplay.push(\r\n            <div key={\"contract\"+c} style={{margin:5,padding:5}}>\r\n              {c} ({this.state.contracts[c]._address})\r\n            </div>\r\n          )\r\n        }\r\n      }else{\r\n        contractDisplay = \"Loading...\"\r\n      }\r\n      return (\r\n        <div style={{padding:10}}>\r\n          <b>Contracts</b>\r\n          {contractDisplay}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n}\r\nexport default ContractLoader;","import React, { Component } from 'react';\r\nimport deepmerge from 'deepmerge';\r\nimport logo from '../metamask.png';\r\nimport eth from '../ethereum.png';\r\nimport Scaler from './scaler.js';\r\nimport Blockies from 'react-blockies';\r\nimport { TezosToolkit } from '@taquito/taquito';\r\nimport { TezBridgeWallet } from '@taquito/tezbridge-wallet';\r\n\r\nlet interval;\r\nlet defaultConfig = {};\r\ndefaultConfig.DEBUG = false;\r\ndefaultConfig.POLLINTERVAL = 191;\r\ndefaultConfig.showBalance = true;\r\ndefaultConfig.hideNetworks = ['Mainnet'];\r\ndefaultConfig.accountCutoff = 36;\r\ndefaultConfig.outerBoxStyle = {\r\n    float: 'right'\r\n};\r\ndefaultConfig.ETHPRECISION = 10;\r\ndefaultConfig.boxStyle = {\r\n    paddingRight: 75,\r\n    marginTop: 0,\r\n    paddingTop: 0,\r\n    zIndex: 10,\r\n    textAlign: 'right',\r\n    width: 300\r\n};\r\ndefaultConfig.boxStyleBefore = {\r\n    zIndex: 9999,\r\n    marginTop: 3,\r\n    paddingTop: 7,\r\n    zIndex: 10,\r\n    color: '#666666',\r\n    textAlign: 'right',\r\n    width: 450\r\n};\r\ndefaultConfig.textStyle = {\r\n    fontSize: 20,\r\n    fontWeight: 'bold',\r\n    color: '#666666'\r\n};\r\ndefaultConfig.warningStyle = {\r\n    fontWeight: 'bold',\r\n    fontSize: 24\r\n};\r\ndefaultConfig.blockieStyle = {\r\n    size: 6,\r\n    top: 10,\r\n    right: 15\r\n};\r\ndefaultConfig.requiredNetwork = [\r\n    \"carthagenet\"\r\n];\r\nclass Metamask extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        let config = defaultConfig;\r\n        if (props.config) {\r\n            config = deepmerge(config, props.config);\r\n            if (props.config.requiredNetwork && props.config.requiredNetwork[0] != \"\") {\r\n                config.requiredNetwork = props.config.requiredNetwork;\r\n            }\r\n        }\r\n        this.state = {\r\n            status: 'loading',\r\n            account: null,\r\n            tzstats: '',\r\n            config: config,\r\n            hasRequestedAccess: false,\r\n        };\r\n    }\r\n    componentDidUpdate() {\r\n        if (this.props.config) {\r\n            const requiredNetwork = this.props.config.requiredNetwork;\r\n            let config = this.state.config;\r\n            if (requiredNetwork && requiredNetwork[0] != \"\" && config.requiredNetwork != requiredNetwork) {\r\n                config.requiredNetwork = requiredNetwork;\r\n                this.setState({ config: config });\r\n            }\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        interval = setInterval(\r\n            this.checkMetamask.bind(this),\r\n            this.state.config.POLLINTERVAL\r\n        );\r\n        this.checkMetamask();\r\n    }\r\n    componentWillUnmount() {\r\n        clearInterval(interval);\r\n    }\r\n\r\n\r\n    checkMetamask = async () => {\r\n        if (!this.state.hasRequestedAccess) { // Prevent multiple prompts\r\n            if (this.state.config.DEBUG) console.log('THANOS - requesting access from user...');\r\n            this.setState({ hasRequestedAccess: true }, () => {\r\n                this.props.onUpdate(this.state);\r\n            });\r\n            try {\r\n                const Tezos = new TezosToolkit();\r\n                Tezos.setProvider({ rpc: 'https://api.tez.ie/rpc/carthagenet' });\r\n                \r\n                const wallet = await new TezBridgeWallet();\r\n                await wallet.setHost(\"https://api.tez.ie/rpc/carthagenet\")\r\n                await Tezos.setWalletProvider(wallet);\r\n                var accountPkh = await wallet.getPKH();\r\n                \r\n                console.log(\"Checking why its zero\",Tezos.rpc)\r\n\r\n                var balance = await Tezos.tz.getBalance(accountPkh);\r\n                if (balance) {\r\n                    if (typeof balance == 'string') {\r\n                        balance = parseFloat(balance) / 1000000;\r\n                    } else {\r\n                        balance = balance.toNumber() / 1000000;\r\n                    }\r\n                }\r\n                let tzstats = 'https://carthagenet.tzstats.com/';\r\n                if (this.state.config.DEBUG)\r\n                    console.log('Thanos - TzStats', balance);\r\n                if (\r\n                    this.state.status != 'ready' ||\r\n                    this.state.balance != balance\r\n                ) {\r\n                    let update = {\r\n                        status: 'ready',\r\n                        balance: balance,\r\n                        Tezos: Tezos,\r\n                        tzstats: tzstats,\r\n                        account: accountPkh\r\n                    };\r\n                    this.setState(update, () => {\r\n                        this.props.onUpdate(this.state);\r\n                    });\r\n                }\r\n            } catch (e) {\r\n                console.log(e);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    render() {\r\n        let metamask = 'loading.';\r\n        if (this.props.config.hide) {\r\n            metamask = [];\r\n        }\r\n        else if (this.state.status == 'loading') {\r\n            metamask = (\r\n                <a target=\"_blank\" href=\"https://thanoswallet.com/\">\r\n                    <span style={this.state.config.textStyle}>loading...</span>\r\n                    <img\r\n                        style={{ maxHeight: 45, padding: 5, verticalAlign: 'middle' }}\r\n                        src={logo}\r\n                    />\r\n                </a>\r\n            );\r\n        } else if (this.state.status == 'ready') {\r\n            let requiredNetworkText = '';\r\n            for (let n in this.state.config.requiredNetwork) {\r\n                if (this.state.config.requiredNetwork[n] != 'unknown' && this.state.config.requiredNetwork[n] != '') {\r\n                    if (requiredNetworkText != '') requiredNetworkText += 'or ';\r\n                    requiredNetworkText += this.state.config.requiredNetwork[n] + ' ';\r\n                }\r\n            }\r\n            let balance = '';\r\n            if (this.state.config.showBalance) {\r\n                balance =\r\n                Math.round(this.state.balance * this.state.config.ETHPRECISION) /\r\n                this.state.config.ETHPRECISION;\r\n            }\r\n\r\n            const ln = this.state.account.length;\r\n            let displayName = `${this.state.account.slice(0, 7)}...${this.state.account.slice(ln - 4, ln)}`;\r\n\r\n            metamask = (\r\n                <div style={this.state.config.boxStyle}>\r\n                    <a\r\n                        target=\"_blank\"\r\n                        href={this.state.tzstats + this.state.account}\r\n                    >\r\n                        <div>\r\n                            <span style={this.state.config.textStyle}>{displayName}</span>\r\n                        </div>\r\n                        <div>\r\n                            <span style={this.state.config.textStyle}>\r\n                                <img\r\n                                    style={{\r\n                                        maxHeight: 24,\r\n                                        padding: 2,\r\n                                        verticalAlign: 'middle',\r\n                                        marginTop: -4\r\n                                    }}\r\n                                    src={eth}\r\n                                />\r\n                                {balance}\r\n                            </span>\r\n                        </div>\r\n                        <div\r\n                            style={{\r\n                                position: 'absolute',\r\n                                right: this.state.config.blockieStyle.right,\r\n                                top: this.state.config.blockieStyle.top\r\n                            }}\r\n                            onClick={this.clickBlockie}\r\n                        >\r\n                            <Blockies\r\n                                seed={this.state.account}\r\n                                scale={this.state.config.blockieStyle.size}\r\n                            />\r\n                        </div>\r\n                    </a>\r\n                </div>\r\n            );\r\n        } else {\r\n            metamask = 'error unknown state: ' + this.state.status;\r\n        }\r\n\r\n        return (\r\n            <div style={this.state.config.outerBoxStyle}>\r\n                <Scaler config={{ origin: 'top right', adjustedZoom: 1.5 }}>\r\n                    {metamask}\r\n                </Scaler>\r\n            </div>\r\n        );\r\n\r\n    }\r\n}\r\nexport default Metamask;\r\n","import React, { Component } from 'react';\r\nimport Blockie from '../dapparatus/blockie'\r\nimport Scaler from '../dapparatus/scaler'\r\nimport axios from 'axios'\r\nimport Loader from '../loader.gif';\r\nimport Particles from './particles.js';\r\nimport { Dropdown } from 'semantic-ui-react'\r\nimport { TezBridgeSigner } from \"@taquito/tezbridge-signer\";\r\n\r\n\r\nlet monthOptions = [\r\n  { key: 'months', value: 'months', text: 'Month(s)' },\r\n  { key: 'days', value: 'days', text: 'Day(s)' },\r\n  { key: 'hours', value: 'hours', text: 'Hour(s)' },\r\n  { key: 'minutes', value: 'minutes', text: 'Minutes(s)' },\r\n]\r\n\r\nclass Subscriber extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      toAddress: \"\",\r\n\r\n      prefilledParams: false,\r\n      tokenAmount: 1000,\r\n      timeAmount: 1,\r\n      timeType: \"months\",\r\n      tokenAddress: \"KT1Xu7Vp9aXyjHE25KDLbbhZFPiGcB2YjY2a\",\r\n      gasPrice: 25,\r\n      tokenName: \"DAI\",\r\n    };\r\n  }\r\n  handleInput(e, data) {\r\n    let update = {}\r\n    if (data) {\r\n      update[data.name] = data.value\r\n      if (data.name == \"tokenAddress\" && !data.value) {\r\n        update.tokenAmount = \"\"\r\n        update.gasPrice = \"\"\r\n        update.timeAmount = \"\"\r\n      } else {\r\n        if (this.state.tokenAmount == \"\") {\r\n          update.tokenAmount = 1000\r\n        }\r\n        if (this.state.gasPrice == \"\") {\r\n          update.gasPrice = 25\r\n        }\r\n        if (this.state.timeAmount == \"\") {\r\n          update.timeAmount = 1\r\n        }\r\n      }\r\n    } else {\r\n      update[e.target.name] = e.target.value\r\n    }\r\n    //  console.log(\"==== UPDATE\",update)\r\n    this.setState(update, () => {\r\n      this.updateUrl()\r\n    })\r\n  }\r\n  updateUrl() {\r\n    let url = window.location.origin + window.location.pathname +\r\n      \"?timeAmount=\" + this.state.timeAmount +\r\n      \"&timeType=\" + this.state.timeType\r\n    if (this.state.toAddress) url += \"&toAddress=\" + this.state.toAddress\r\n    if (this.state.tokenAddress) url += \"&tokenAddress=\" + this.state.tokenAddress\r\n    if (this.state.tokenAmount) url += \"&tokenAmount=\" + this.state.tokenAmount\r\n    if (this.state.gasPrice) url += \"&gasPrice=\" + this.state.gasPrice\r\n\r\n    this.setState({ url: url })\r\n  }\r\n  async sendSubscription() {\r\n    let { backendUrl, Tezos, account } = this.props\r\n    let { toAddress, timeType, tokenAmount, tokenAddress, gasPrice } = this.state\r\n\r\n    console.log(\"The CONTRACT\", this.props.contract)\r\n\r\n    let subscriptionContract = await this.props.customContractLoader(\"Subscription\", this.props.contract)\r\n\r\n    //let value = 0\r\n    //let gasLimit = 120000\r\n\r\n    let periodSeconds = this.state.timeAmount;\r\n    if (timeType == \"minutes\") {\r\n      periodSeconds *= 60\r\n    } else if (timeType == \"hours\") {\r\n      periodSeconds *= 3600\r\n    } else if (timeType == \"days\") {\r\n      periodSeconds *= 86400\r\n    } else if (timeType == \"months\") {\r\n      periodSeconds *= 2592000\r\n    }\r\n\r\n    if (!gasPrice) gasPrice = 0\r\n\r\n    console.log(\"Address\", subscriptionContract._address)\r\n\r\n    let storage = await subscriptionContract._contract.storage()\r\n    console.log(\"STORAGE-NONCE\", storage['extraNonce'])\r\n    console.log(\"Account\", account)\r\n    let value1 = await storage['extraNonce'].get(account)\r\n    let nonce\r\n    if (value1 == undefined) {\r\n      nonce = 1\r\n    }\r\n    else {\r\n      nonce = parseInt(value1[Object.keys(value1)[0]]) + 1\r\n    }\r\n\r\n    //TODO convert here\r\n    let realTokenAmount = tokenAmount\r\n    let realGasPrice = gasPrice\r\n    /*\r\n    address from, //the subscriber\r\n    address to, //the publisher\r\n    address tokenAddress, //the token address paid to the publisher\r\n    uint256 tokenAmount, //the token amount paid to the publisher\r\n    uint256 periodSeconds, //the period in seconds between payments\r\n    uint256 gasPrice, //the amount of tokens or eth to pay relayer (0 for free)\r\n     */\r\n\r\n    const parts = [\r\n      account,\r\n      toAddress,\r\n      tokenAddress,\r\n      realTokenAmount,\r\n      periodSeconds,\r\n      realGasPrice,\r\n      nonce\r\n    ]\r\n    /*web3.utils.padLeft(\"0x\"+nonce,64),*/\r\n    console.log(\"PARTS\", parts)\r\n    console.log(\"Checking\", tokenAmount.toString())\r\n    try {\r\n\r\n      const data =\r\n      {\r\n        prim: \"Pair\",\r\n        args: [\r\n          { \r\n            prim:\"Pair\",\r\n            args:[\r\n              {string: account },\r\n              {\r\n                prim: \"Pair\",\r\n                args: [{string: toAddress },{ string: tokenAddress }], \r\n              },\r\n            ],\r\n          },\r\n          {\r\n            prim: \"Pair\",\r\n            args: [\r\n              {\r\n                prim: \"Pair\",\r\n                args: [{int: realTokenAmount.toString() },{int: periodSeconds.toString() }],\r\n              },\r\n              {\r\n                prim: \"Pair\",\r\n                args: [{ int: realGasPrice.toString() },{int: nonce.toString()}],\r\n              },         \r\n            ],\r\n          },\r\n        ],\r\n      };\r\n\r\n      const type =\r\n      {\r\n        prim: \"pair\",\r\n        args: [\r\n          { \r\n            prim: \"pair\",\r\n            args: [\r\n              { prim: \"address\" },\r\n              { \r\n                prim: \"pair\",\r\n                args: [{prim: \"address\"},{prim: \"address\"}],\r\n              },\r\n            ],\r\n          },\r\n          {\r\n            prim: \"pair\",\r\n            args: [\r\n              { \r\n                prim: \"pair\",\r\n                args: [ {prim: \"nat\"},{prim: \"int\"} ],\r\n              },\r\n              {\r\n                prim: \"pair\",\r\n                args: [ { prim: \"nat\" },{prim: \"nat\"}],\r\n              },\r\n            ],\r\n          },\r\n        ],\r\n      };\r\n\r\n      /*\r\n           const data = \r\n               {\r\n                 prim: \"Pair\",\r\n                 args: [\r\n                   { string: account },\r\n                   {\r\n                     prim: \"Pair\",\r\n                     args: [\r\n                       { string: toAddress },\r\n                       {\r\n                         prim: \"Pair\",\r\n                         args: [\r\n                           { string: tokenAddress },\r\n                           {\r\n                             prim: \"Pair\",\r\n                             args: [\r\n                               { int: realTokenAmount.toString() },\r\n                               {\r\n                                 prim: \"Pair\",\r\n                                 args: [\r\n                                   { int: periodSeconds.toString() },\r\n                                   {\r\n                                     prim: \"Pair\",\r\n                                     args: [{ int: realGasPrice.toString() }, { int: nonce.toString() }],\r\n                                   },\r\n                                 ],\r\n                               },\r\n                             ],\r\n                           },\r\n                         ],\r\n                       },\r\n                     ],\r\n                   },\r\n                 ],\r\n               };\r\n     \r\n           const type = \r\n               {\r\n                 prim: \"pair\",\r\n                 args: [\r\n                   { prim: \"string\" },\r\n                   {\r\n                     prim: \"pair\",\r\n                     args: [\r\n                       { prim: \"string\" },\r\n                       {\r\n                         prim: \"pair\",\r\n                         args: [\r\n                           { prim: \"string\" },\r\n                           {\r\n                             prim: \"pair\",\r\n                             args: [\r\n                               { prim: \"int\" },\r\n                               {\r\n                                 prim: \"pair\",\r\n                                 args: [\r\n                                   { prim: \"int\" },\r\n                                   {\r\n                                     prim: \"pair\",\r\n                                     args: [{ prim: \"int\" }, { prim: \"int\" }],\r\n                                   },\r\n                                 ],\r\n                               },\r\n                             ],\r\n                           },\r\n                         ],\r\n                       },\r\n                     ],\r\n                   },\r\n                 ],\r\n               };\r\n     \r\n               */\r\n\r\n      const { packed } = await Tezos.rpc.packData({\r\n        data: data,\r\n        type: type,\r\n      })\r\n      console.log(\"Packed\", packed)\r\n\r\n\r\n      /*const packedData = await axios.post(\r\n        `https://carthagenet.SmartPy.io/chains/main/blocks/head/helpers/scripts/pack_data`,\r\n        {\r\n          data: data,\r\n          type: type,\r\n          gas: \"800000\",\r\n        },\r\n        {\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n        }\r\n      );\r\n\r\n      const subscriptionHash = packedData.data.packed;\r\n      */\r\n\r\n\r\n      var subscriptionHash = packed\r\n      console.log(\"subscriptionHash\", subscriptionHash)\r\n\r\n      var signer = new TezBridgeSigner();\r\n      const _address = await window.tezbridge.request({ method: \"get_source\" });\r\n\r\n      let signature\r\n      if (account == _address) {\r\n        signature = await signer.sign(subscriptionHash)\r\n        console.log(\"signature\", signature.prefixSig)\r\n      }\r\n      else {\r\n        throw \"Accounts don't Match\"\r\n      }\r\n\r\n      console.log(\"subscriptionHash\", subscriptionHash)\r\n\r\n      let postData = {\r\n        subscriptionContract: subscriptionContract._address,\r\n        parts: parts,\r\n        subscriptionHash: subscriptionHash,\r\n        signature: signature.prefixSig,\r\n      }\r\n\r\n      console.log(\"postData\", postData)\r\n      axios.post(backendUrl + 'saveSubscription', postData, {\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        }\r\n      }).then((response) => {\r\n        console.log(\"TX RESULT\", response.data.subscriptionHash)\r\n        window.location = \"/subscription-token/HASH\" + response.data.subscriptionHash\r\n      })\r\n        .catch((error) => {\r\n          console.log(error);\r\n        });\r\n    }\r\n    catch (e) {\r\n      console.log(e);\r\n    }\r\n\r\n\r\n  }\r\n\r\n  async componentDidMount() {\r\n    let { contracts } = this.props\r\n    console.log(\"contracts\", contracts)\r\n    this.setState({\r\n      isLoaded: true,\r\n      items: [{\r\n        address: this.props.contracts.WasteToken._address,\r\n        name: \"WasteCoin\",\r\n        symbol: \"WC\"\r\n      }]\r\n    })\r\n    if (this.props.contract) {\r\n      console.log(\"poll contract for values...\")\r\n      let subscriptionsContract = await this.props.customContractLoader(\"Subscription\", this.props.contract)\r\n      let value = await subscriptionsContract._contract.storage()\r\n      console.log(\"subscriptionsContract\", subscriptionsContract)\r\n      let requiredToAddress = await value['reqToAddress']\r\n      let requiredTokenAddress = await value['reqTokenAddress']\r\n\r\n      let requiredTokenName\r\n\r\n      if (requiredTokenAddress) {\r\n        console.log(\"using\", requiredTokenAddress, \"search through\", this.props.coins)\r\n        for (let c in this.props.coins) {\r\n          console.log(\"CHECKING\", this.props.coins[c])\r\n          if (this.props.coins[c] && this.props.coins[c].address && this.props.coins[c].address == requiredTokenAddress) {\r\n            console.log(\"FOUND!!!!!!!!\")\r\n            requiredTokenName = this.props.coins[c].name\r\n          }\r\n        }\r\n        let requiredTokenAmount = await value['reqTokenAmount']\r\n        console.log(\"requiredTokenAmount\", requiredTokenAmount)\r\n        let requiredPeriodSeconds = await value['reqPeriodSeconds']\r\n        let requiredTimeAmount = null\r\n        let requiredTimeType = \"\"\r\n        if (requiredPeriodSeconds) {\r\n          if (requiredPeriodSeconds >= 2592000) {\r\n            requiredTimeAmount = requiredPeriodSeconds / 2592000\r\n            requiredTimeType = \"months\"\r\n          } else if (requiredPeriodSeconds >= 86400) {\r\n            requiredTimeAmount = requiredPeriodSeconds / 86400\r\n            requiredTimeType = \"days\"\r\n          } else if (requiredPeriodSeconds >= 3600) {\r\n            requiredTimeAmount = requiredPeriodSeconds / 3600\r\n            requiredTimeType = \"hours\"\r\n          } else {\r\n            requiredTimeAmount = requiredPeriodSeconds / 60\r\n            requiredTimeType = \"minutes\"\r\n          }\r\n        }\r\n        let requiredGasPrice = await value['reqGasPrice']\r\n        console.log(\"requiredTokenAmount\", requiredTokenAmount)\r\n        console.log(requiredGasPrice);\r\n        this.setState({\r\n          requiredTokenAddress: requiredTokenAddress,\r\n          prefilledParams: true,\r\n          toAddress: requiredToAddress,\r\n          tokenAddress: requiredTokenAddress,\r\n          tokenAmount: requiredTokenAmount,\r\n          tokenName: requiredTokenName,\r\n          timeAmount: requiredTimeAmount,\r\n          timeType: requiredTimeType,\r\n          gasPrice: requiredGasPrice,\r\n        })\r\n      } else {\r\n\r\n        console.log(\"=====---- This is an open ended subscription without parameters...\")\r\n        //this is an open ended model, set some defaults....\r\n        this.setState({\r\n          requiredTokenAddress: requiredTokenAddress,\r\n          toAddress: requiredToAddress,\r\n          prefilledParams: true,\r\n          tokenAmount: 1000,\r\n          timeAmount: 1,\r\n          timeType: \"months\",\r\n          tokenAddress: \"0x89d24a6b4ccb1b6faa2625fe562bdd9a23260359\",\r\n          gasPrice: 25\r\n        }, () => {\r\n          console.log(this.state)\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let { contract, coins } = this.props\r\n    let { items, toAddress, tokenAmount, tokenAddress, timeType, timeAmount, gasPrice, prefilledParams, email, requiredTokenAddress } = this.state\r\n    console.log(\"timeType:\", timeType)\r\n    let coinOptions = []\r\n    for (let i in items) {\r\n      //console.log(items[i].name)\r\n      coinOptions.push(\r\n        <option key={items[i].name} value={items[i].name}>{items[i].name}</option>\r\n      )\r\n    }\r\n    if (contract) {\r\n      if (!prefilledParams && requiredTokenAddress) {\r\n        return (\r\n          <div className=\"center\"><img src={Loader} style={{ marginTop: 100 }} /></div>\r\n        );\r\n      } else {\r\n\r\n        if (!requiredTokenAddress) {\r\n\r\n          let coinOptions = []\r\n\r\n          for (let i = 0; i < coins.length; i++) {\r\n            if (coins[i].symbol != \"*ANY*\") {\r\n              coinOptions.push({\r\n                key: coins[i].address,\r\n                value: coins[i].address,\r\n                image: {\r\n                  avatar: true,\r\n                  src: coins[i].imageUrl,\r\n                },\r\n                text: coins[i].symbol\r\n              })\r\n            }\r\n          }\r\n\r\n          return (\r\n            <Scaler config={{ startZoomAt: 800, origin: \"50px 50px\" }}>\r\n              <Particles left={-2200} opacity={0.45} />\r\n              <div className=\"form-field\">\r\n                <label>To Address:</label>\r\n                <Blockie\r\n                  address={toAddress}\r\n                  config={{ size: 3 }}\r\n                />\r\n                <input type=\"text\" style={{ width: '415px' }} name=\"toAddress\" value={toAddress} onChange={this.handleInput.bind(this)} />\r\n              </div>\r\n              <div className=\"form-field\">\r\n                <label>Token:</label>\r\n                <Dropdown\r\n                  selectOnNavigation={false}\r\n                  selection\r\n                  value={tokenAddress}\r\n                  name='tokenAddress'\r\n                  options={coinOptions}\r\n                  placeholder='Choose Token'\r\n                  onChange={this.handleInput.bind(this)}\r\n                />\r\n\r\n                <label>Amount:</label>\r\n                <input type=\"text\" name=\"tokenAmount\" value={tokenAmount} onChange={this.handleInput.bind(this)} />\r\n              </div>\r\n              <div className=\"form-field\">\r\n                <label>Recurring Every:</label>\r\n                <input type=\"text\" name=\"timeAmount\" value={timeAmount} onChange={this.handleInput.bind(this)} />\r\n                <Dropdown\r\n                  selectOnNavigation={false}\r\n                  selection\r\n                  value={timeType}\r\n                  name=\"timeType\"\r\n                  onChange={this.handleInput.bind(this)}\r\n                  options={monthOptions}\r\n                  placeholder='Choose Term'\r\n                />\r\n              </div>\r\n              <div className=\"form-field\">\r\n                <label>Gas Price:</label>\r\n                <input\r\n                  type=\"text\" name=\"gasPrice\" value={gasPrice} onChange={this.handleInput.bind(this)}\r\n                />\r\n              </div>\r\n              <div className=\"form-field\">\r\n                <label>Email (optional):</label>\r\n                <input\r\n                  type=\"text\" name=\"email\" style={{ width: 240 }} value={email} onChange={this.handleInput.bind(this)}\r\n                />\r\n              </div>\r\n              <button size=\"2\" style={{ marginTop: 50 }} onClick={() => {\r\n                this.sendSubscription()\r\n              }}>\r\n                Sign\r\n              </button>\r\n            </Scaler>\r\n          );\r\n        } else {\r\n\r\n          if (timeAmount == 1) {\r\n            timeType = timeType.substring(0, timeType.length - 1)\r\n          }\r\n\r\n          return (\r\n            <Scaler config={{ startZoomAt: 800, origin: \"50px 50px\" }}>\r\n              <Particles left={-2200} opacity={0.45} />\r\n              <div style={{ marginTop: 110 }} className=\"form-field\">\r\n                <label>To Address:</label>\r\n                <Blockie\r\n                  address={toAddress}\r\n                  config={{ size: 3 }}\r\n                /> {toAddress}\r\n              </div>\r\n              <div className=\"form-field\">\r\n                <label>Token:</label> {tokenAddress}\r\n              </div>\r\n              <div>\r\n                <label>Amount:</label> {parseFloat(tokenAmount) + parseFloat(gasPrice)}\r\n              </div>\r\n              <div className=\"form-field\">\r\n                Recurring Every: {timeAmount} {timeType}\r\n              </div>\r\n              <button size=\"2\" style={{ marginTop: 50 }} onClick={() => {\r\n                this.sendSubscription()\r\n              }}>\r\n                Sign\r\n              </button>\r\n            </Scaler>\r\n          );\r\n        }\r\n\r\n      }\r\n    } else {\r\n      return (\r\n        <div>\r\n          <div className=\"center\"><img src={Loader} style={{ marginTop: 100 }} /></div>\r\n          <div className=\"center\">Loading Contract...</div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n  }\r\n}\r\n\r\nexport default Subscriber;","import React, { Component } from 'react';\r\nimport Blockie from '../dapparatus/blockie'\r\nimport Scaler from '../dapparatus/scaler'\r\nimport { Dropdown } from 'semantic-ui-react'\r\nimport Particles from './particles.js';\r\nimport Backarrow from '../back-arrow.png'\r\nimport Loader from \"../loader.gif\"\r\n\r\nclass Publisher extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      toAddress: props.account,\r\n      tokenAmount: 1000,\r\n      timeAmount: 1,\r\n      timeType:\"months\",\r\n      tokenAddress:\"KT1FKDqbqQ6E25ze5XXTbRSzMKhu11neuR7y\",\r\n      gasPrice:25,\r\n      loading: false\r\n    };\r\n  }\r\n  handleInput(e,data){\r\n    console.log(\"INPUT\",e,data)\r\n    let update = {}\r\n    if(data){\r\n      update[data.name] = data.value\r\n      if(data.name==\"tokenAddress\" && !data.value){\r\n        update.tokenAmount=\"\"\r\n        update.gasPrice=\"\"\r\n        update.timeAmount=\"\"\r\n      }else{\r\n        if(this.state.tokenAmount==\"\"){\r\n          update.tokenAmount=1000\r\n        }\r\n        if(this.state.gasPrice==\"\"){\r\n          update.gasPrice=25\r\n        }\r\n        if(this.state.timeAmount==\"\"){\r\n          update.timeAmount=1\r\n        }\r\n      }\r\n    }else{\r\n      update[e.target.name] = e.target.value\r\n    }\r\n    this.setState(update,()=>{\r\n    //  this.updateUrl()\r\n    })\r\n  }\r\n  updateUrl(){\r\n    let url = window.location.origin+window.location.pathname+\r\n      \"?timeAmount=\"+this.state.timeAmount+\r\n      \"&timeType=\"+this.state.timeType\r\n      if(this.state.toAddress) url+=\"&toAddress=\"+this.state.toAddress\r\n      if(this.state.tokenAddress) url+=\"&tokenAddress=\"+this.state.tokenAddress\r\n      if(this.state.tokenAmount) url+=\"&tokenAmount=\"+this.state.tokenAmount\r\n      if(this.state.gasPrice) url+=\"&gasPrice=\"+this.state.gasPrice\r\n\r\n    this.setState({url:url})\r\n  }\r\n  componentDidMount() {\r\n    let {contracts} = this.props\r\n    console.log(\"contracts\",contracts)\r\n    this.setState({\r\n      isLoaded: true,\r\n      items: [ {\r\n        address: this.props.contracts.WasteToken._address,\r\n        name: \"WasteCoin\",\r\n        symbol: \"WC\",\r\n      } ]\r\n    })\r\n  }\r\n\r\n  render() {\r\n\r\n    let {coins} = this.props\r\n    let {toAddress,tokenAddress,tokenAmount,timeType,timeAmount,gasPrice,email} = this.state\r\n\r\n    let coinOptions = []\r\n\r\n    let loading = \"\"\r\n    if(this.state.loading){\r\n      loading = (\r\n        <img src={Loader} style={{maxWidth:50,verticalAlign:\"middle\"}} />\r\n      )\r\n    }\r\n\r\n    for(let i = 0; i < coins.length; i++){\r\n      coinOptions.push({\r\n         key: coins[i].address,\r\n         value: coins[i].address,\r\n         image:{\r\n           avatar : true,\r\n           src    : coins[i].imageUrl,\r\n         },\r\n         text: coins[i].symbol\r\n       })\r\n    }\r\n\r\n    let monthOptions = [\r\n        {key: 'months', value: 'months', text: 'Month(s)'},\r\n        {key: 'days', value: 'days', text: 'Day(s)'},\r\n        {key: 'hours', value: 'hours', text: 'Hour(s)'},\r\n        {key: 'minutes', value: 'minutes', text: 'Minutes(s)'},\r\n    ]\r\n\r\n    return (\r\n        <Scaler config={{startZoomAt:800,origin:\"50px 50px\"}}>\r\n          <Particles left={-1300} opacity={0.65} />\r\n          <h1 style={{marginTop:50}}>Subscriptions Parameters</h1>\r\n          <div className=\"form-field\">\r\n            <label>To Address:</label>\r\n            <Blockie\r\n              address={toAddress}\r\n              config={{size:3}}\r\n            />\r\n            <input type=\"text\" style={{width: '415px'}} name=\"toAddress\" value={toAddress} onChange={this.handleInput.bind(this)} />\r\n          </div>\r\n          <div className=\"form-field\">\r\n            <label>Token:</label>\r\n              <Dropdown\r\n                selectOnNavigation={false}\r\n                selection\r\n                value={tokenAddress}\r\n                name='tokenAddress'\r\n                options={coinOptions}\r\n                placeholder='Choose Token'\r\n                onChange={this.handleInput.bind(this)}\r\n              />\r\n\r\n             <label>Amount:</label>\r\n             <input type=\"text\" name=\"tokenAmount\" value={tokenAmount} onChange={this.handleInput.bind(this)} />\r\n          </div>\r\n          <div className=\"form-field\">\r\n            <label>Recurring Every:</label>\r\n            <input type=\"text\" name=\"timeAmount\" value={timeAmount} onChange={this.handleInput.bind(this)} />\r\n            <Dropdown\r\n              selectOnNavigation={false}\r\n              selection\r\n              value={timeType}\r\n              name=\"timeType\"\r\n              onChange={this.handleInput.bind(this)}\r\n              options={monthOptions}\r\n              placeholder='Choose Term'\r\n            />\r\n          </div>\r\n          <div className=\"form-field\">\r\n            <label>Gas Price:</label>\r\n            <input\r\n              type=\"text\" name=\"gasPrice\" value={gasPrice} onChange={this.handleInput.bind(this)}\r\n            />\r\n          </div>\r\n          <div className=\"form-field\">\r\n            <label>Email (optional):</label>\r\n            <input\r\n              type=\"text\" name=\"email\" style={{width:240}} value={email} onChange={this.handleInput.bind(this)}\r\n            />\r\n          </div>\r\n          {loading}\r\n          <button size=\"2\" style={{marginTop:50}} onClick={()=>{\r\n              this.setState({loading:true})\r\n              this.props.deploySubscription(toAddress,tokenAddress,tokenAmount,timeType,timeAmount,gasPrice,email)\r\n            }}>\r\n            Deploy Subscription Contract\r\n          </button>\r\n\r\n          <div style={{marginTop:90,cursor:\"pointer\",width:100}} onClick={()=>{this.props.setMode(\"\")}}>\r\n            <img style={{verticalAlign:'middle'}} src={Backarrow}/> <span style={{fontSize:14}}>Previous</span>\r\n          </div>\r\n        </Scaler>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Publisher;","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAYCAYAAACfpi8JAAAACXBIWXMAAAsSAAALEgHS3X78AAAAt0lEQVRIic3XgQmEMAwF0O/hQG5wN4IjOJIbuIq3gW5wI9wGkUDVUqxtwST9EFDbwsNIwIaIUENeBYYBwAxglHC3BYhJAnCEW5Oogc78iajLOFNcVSBSEDXEHUQVEYOoI64gJogQYobwIaYIrn3E88R8iw6seFYAn5IRLxv3ajrXEs7PojX+jY8x+1jNMVcPTTCxBXXM3aIqJrVBDZOzKcT0VpAQM0tAcifrwmMYwNddP546ficAbD35CN9EtKfbAAAAAElFTkSuQmCC\"","import React, { Component } from 'react';\r\nimport Scaler from '../dapparatus/scaler'\r\nimport Loader from '../loader.gif';\r\nimport Particles from './particles.js';\r\nimport Backarrow from '../back-arrow.png'\r\nvar QRCode = require('qrcode.react');\r\n\r\n\r\nclass PublisherDeploy extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n    };\r\n  }\r\n  render() {\r\n\r\n\r\n    let {deployedAddress} = this.props\r\n\r\n    let contractAddress = deployedAddress\r\n\r\n\r\n    let url = window.location.origin+\"/subscription-token/\"+contractAddress\r\n\r\n    let deployed = \"\"\r\n    if(deployedAddress){\r\n      contractAddress=deployedAddress\r\n      url = window.location.origin+\"/subscription-token/\"+contractAddress\r\n      return (\r\n        <Scaler config={{startZoomAt:800,origin:\"50px 50px\"}}>\r\n          <Particles left={-1800} opacity={0.45} />\r\n          <h1 style={{marginTop: '30px'}}>Congratulations, your contract is ready.</h1>\r\n          <h3>You can now accept subscriptions!</h3>\r\n          <p style={{textAlign: 'center'}}>{contractAddress} {deployed}</p>\r\n          <p>Follow the instructions below to share your subscription</p>\r\n          <div>\r\n            <p>Add a link to your website:</p>\r\n            <pre>{\"<a href='\"+url+\"' target='_blank'>Subscribe Now</a>\"}</pre>\r\n            <p>Share Url:</p>\r\n            <pre>{url}</pre>\r\n            <p>QR Code:</p>\r\n            <QRCode value={url} />\r\n            <p>Embed a script on your website:</p>\r\n            <pre>{\"<script type='text/javascript' src='https://tokensubscription.com/coinsubscription.js?contract=\"+contractAddress+\"' id='coinsubscription'></script>\"}</pre>\r\n          </div>\r\n        </Scaler>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nexport default PublisherDeploy;","import React, { Component } from 'react';\r\nimport Address from \"../dapparatus/address\"\r\nimport Scaler from '../dapparatus/scaler'\r\nimport axios from 'axios'\r\nimport Particles from '../particles.png';\r\nimport Loader from \"../loader.gif\"\r\nimport { TezBridgeSigner } from \"@taquito/tezbridge-signer\";\r\n\r\nlet pollInterval\r\nlet pollTime = 1777\r\n\r\nclass SubscriberApprove extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      approved:0,\r\n      approve:12,\r\n      loading:false\r\n    };\r\n  }\r\n  async componentDidMount(){\r\n    axios.get(this.props.backendUrl+\"subscription/\"+this.props.subscription, { crossdomain: true })\r\n    .catch((err)=>{\r\n      console.log(\"Error getting subscription\",err)\r\n    })\r\n    .then(async (response)=>{\r\n      console.log(\"subscription:\",response.data)\r\n      this.setState({subscription:response.data})\r\n      this.props.Tezos.setProvider({signer: new TezBridgeSigner()})\r\n      //let subscriptionContract = this.props.customContractLoader(\"Subscription\",this.props.contract)\r\n      let tokenContract = await this.props.customContractLoader(\"WasteToken\",response.data.parts[2])\r\n      console.log(\"TokenContract\",tokenContract);\r\n      let foundToken\r\n      for(let i = 0; i < this.props.coins.length; i++){\r\n        if(tokenContract._address == this.props.coins[i].address){\r\n          foundToken = this.props.coins[i]\r\n        }\r\n      }\r\n      this.setState({token:foundToken,tokenContract:tokenContract})\r\n    })\r\n    pollInterval = setInterval(this.load.bind(this),pollTime)\r\n    await this.load()\r\n  }\r\n  componentWillUnmount(){\r\n    clearInterval(pollInterval)\r\n  }\r\n  async load(){\r\n    if(this.state.tokenContract){\r\n      let storage = await this.state.tokenContract._contract.storage()\r\n      console.log(\"STORAGE\",storage)\r\n      let value1 = await storage['balances'].get(this.props.account)\r\n      let balances\r\n      if(value1)\r\n        balances = value1['balance']\r\n      if(!balances){\r\n        balances = 0\r\n      }\r\n      else{\r\n        balances = balances.toNumber()\r\n      }\r\n      console.log(\"BALANCES\",balances)\r\n      let value2 = await storage['balances'].get(this.state.subscription.parts[0])\r\n      let approvals\r\n      if(value2){\r\n        approvals = await value2['approvals'].get(this.state.subscription.subscriptionContract)\r\n      }\r\n      if(!approvals){\r\n        approvals=0\r\n      }\r\n      else{\r\n        approvals = approvals.toNumber()\r\n      }\r\n      console.log(\"APPROVAL\",approvals)\r\n      this.setState({\r\n        balance: balances,\r\n        approved: approvals\r\n      })\r\n    }\r\n  }\r\n  handleInput(e){\r\n    let update = {}\r\n    update[e.target.name] = e.target.value\r\n    this.setState(update)\r\n  }\r\n  render() {\r\n    if(!this.state.subscription){\r\n      return (\r\n        <div><img src={Loader} style={{maxWidth:80,verticalAlign:'middle'}} /> Loading Subscription...</div>\r\n      )\r\n    }\r\n    console.log(this.state.subscription)\r\n\r\n    let from = this.state.subscription.parts[0]\r\n    let to = this.state.subscription.parts[1]\r\n    let token = this.state.subscription.parts[2]\r\n\r\n    console.log(\"token\",token)\r\n\r\n    if(!this.state.tokenContract){\r\n      return (\r\n        <div><img src={Loader} style={{maxWidth:80,verticalAlign:'middle'}} /> Connecting to Subscription Contract...</div>\r\n      )\r\n    }\r\n\r\n\r\n    let tokenAmount = parseInt(this.state.subscription.parts[3].toString())\r\n    let periodSeconds = (this.state.subscription.parts[4]).toString()\r\n    let gasPrice = parseInt((this.state.subscription.parts[5]).toString())\r\n\r\n    console.log(\"TOKEN\",this.state.token)\r\n\r\n    let loading = \"\"\r\n    if(this.state.loading){\r\n      loading = (\r\n        <img src={Loader} style={{maxWidth:50,verticalAlign:\"middle\"}} />\r\n      )\r\n    }\r\n\r\n    let approvedColor = \"#fd9653\"\r\n    if(this.state.approved>0){\r\n      approvedColor = \"#5396fd\"\r\n    }\r\n\r\n    let particleRender = (\r\n      <img style={{zIndex:-1,position:\"absolute\",left:-2500,top:400,opacity:0.4}} src={Particles} />\r\n    )\r\n\r\n\r\n\r\n    return (\r\n      <Scaler config={{startZoomAt:800,origin:\"50px 50px\"}}>\r\n        {particleRender}\r\n        <h1>Approve Max Subscription Limit:</h1>\r\n        <div>Subscription: {this.state.subscription.subscriptionHash}</div>\r\n        <div>\r\n          {tokenAmount+gasPrice} <img style={{maxHeight:25}} src={this.state.token.imageUrl}/>{this.state.token.name}\r\n        </div>\r\n        <div>\r\n          From <Address\r\n            {...this.props}\r\n            address={from}\r\n          /> to <Address\r\n            {...this.props}\r\n            address={to}\r\n          />\r\n        </div>\r\n        <div>\r\n          Recurring every {periodSeconds}s\r\n        </div>\r\n        <div style={{marginTop:20}}>\r\n          Token Balance: <span>{this.state.balance}</span>\r\n        </div>\r\n        <div style={{marginTop:20,fontSize:28}}>\r\n          Approved Tokens: <span style={{color:approvedColor}}>{this.state.approved}</span>\r\n        </div>\r\n        <div style={{marginTop:40}} className=\"form-field\">\r\n        {loading}\r\n        <input\r\n          type=\"text\" name=\"approve\" value={this.state.approve} onChange={this.handleInput.bind(this)}\r\n        />\r\n          <button size=\"2\" onClick={async  ()=>{\r\n              let amount = \"\"+(this.state.approve)\r\n              let address = \"\"+(this.state.subscription.subscriptionContract)\r\n              this.setState({loading:true})\r\n              this.state.tokenContract.approve(address,amount).send()\r\n              .then(op=>{\r\n                return op.confirmation().then(() => op.hash);\r\n              })\r\n              .then(hash => {\r\n                this.setState({loading:false})\r\n                console.log(`Operation injected: https://carthagenet.tzstats.com/${hash}`)\r\n              })\r\n              .catch(error => console.log(`Error: ${JSON.stringify(error, null, 2)}`));\r\n            }}>\r\n            Approve Tokens\r\n          </button>\r\n        </div>\r\n      </Scaler>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SubscriberApprove;","module.exports = __webpack_public_path__ + \"static/media/metamask.d36b6235.png\";","module.exports = \"data:image/png;base64,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\"","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nit('renders without crashing', () => {\r\n  const div = document.createElement('div');\r\n  ReactDOM.render(<App />, div);\r\n  ReactDOM.unmountComponentAtNode(div);\r\n});","module.exports = [\"WasteToken\",\"Subscription\"]","import React, { Component } from 'react';\r\nimport \"./dapparatus.css\"\r\n\r\nclass Button extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      clicked:false\r\n    }\r\n  }\r\n  click(){\r\n    if(!this.state.clicked){\r\n      this.setState({clicked:true})\r\n      setTimeout(()=>{\r\n        this.setState({clicked:false})\r\n      },5000)\r\n      this.props.onClick.apply( this, arguments );\r\n    }\r\n  }\r\n  render(){\r\n    let color = this.props.color\r\n\r\n    if(!color || color==\"blue\"){\r\n      color = \"#6081c3\"\r\n    }else if(color==\"green\"){\r\n      color = \"#6ac360\"\r\n    }else if(color==\"orange\"){\r\n      color = \"#f7861c\"\r\n    }else if(color==\"yellow\"){\r\n      color = \"#f7ea1c\"\r\n    }else if(color==\"red\"){\r\n      color = \"#fe2311\"\r\n    }\r\n\r\n    if(this.state&&this.state.clicked){\r\n      color = \"#999999\"\r\n    }\r\n\r\n    const buttonStyles = {\r\n        display: 'inline-block',\r\n        padding: '5px 17px',\r\n        backgroundColor: color,\r\n        border: 'none',\r\n        color: '#ffffff',\r\n        cursor: 'pointer',\r\n        fontFamily: 'Roboto, sans-serif',\r\n        fontSize: '16px',\r\n        fontWeight: '700',\r\n        textTransform: 'uppercase',\r\n        boxShadow: '0 2px 5px 0px rgba(0, 0, 0, 0.25)',\r\n        textShadow: '1px 1px 2px rgba(0,0,0,0.2)',\r\n        margin: 5,\r\n    }\r\n\r\n\r\n    if(this.props.size==\"2\"){\r\n      buttonStyles.padding = '7.5px 25.5px'\r\n      buttonStyles.fontSize = \"24px\"\r\n      buttonStyles.margin = 7.5\r\n    }else if(this.props.size==\"3\"){\r\n      buttonStyles.padding = '10px 34px'\r\n      buttonStyles.fontSize = \"32px\"\r\n      buttonStyles.margin = 10\r\n    }\r\n\r\n    return (\r\n        <button className=\"grow\" style={buttonStyles} onClick={this.click.bind(this)}>\r\n                {this.props.children}\r\n        </button>\r\n    )\r\n  }\r\n\r\n\r\n}\r\n\r\nexport default Button","import React, { Component } from 'react'\nimport axios from \"axios\"\nimport deepmerge from 'deepmerge';\nconst GASBOOSTPRICE = 0.05 //gwei\n\nlet pollInterval\nlet pollTime = 39007\n\nlet defaultConfig = {}\ndefaultConfig.DEBUG = false;\ndefaultConfig.hardcodedGwei = false\ndefaultConfig.hide = true;\ndefaultConfig.gasBoostPrice = GASBOOSTPRICE;\n\nclass Gas extends Component {\n  constructor(props) {\n    super(props);\n    let config = defaultConfig\n    if(props.config) {\n      config = deepmerge(config, props.config)\n    }\n    this.state = {\n      gwei: 21,\n      config: config,\n    }\n  }\n  componentDidMount(){\n    pollInterval = setInterval(this.checkOnGasPrices.bind(this),pollTime)\n    setTimeout(this.checkOnGasPrices.bind(this),3500)\n    setTimeout(this.checkOnGasPrices.bind(this),8500)\n    setTimeout(this.checkOnGasPrices.bind(this),19000)\n    this.checkOnGasPrices()\n  }\n  componentWillUnmount(){\n    clearInterval(pollInterval)\n  }\n  checkOnGasPrices(){\n    if(this.props.network && this.props.network == \"Mainnet\"){\n      if(!this.state.config.hardcodedGwei){\n        axios.get(\"https://ethgasstation.info/json/ethgasAPI.json\", { crossdomain: true })\n        .catch((err)=>{\n          console.log(\"Error getting gas price\",err)\n        })\n        .then((response)=>{\n          if(response && response.data.average>0&&response.data.average<9999){\n            response.data.average=response.data.average + (response.data.average*GASBOOSTPRICE)\n            let setMainGasTo = Math.round(response.data.average*100)/1000\n            if(this.state.gwei!=setMainGasTo){\n              let update = {gwei:setMainGasTo}\n              this.setState(update)\n              this.props.onUpdate(update)\n            }\n          }\n        })\n      }else{\n        let update = {gwei:this.state.config.hardcodedGwei}\n        this.setState(update)\n        this.props.onUpdate(update)\n      }\n    }\n  }\n  render() {\n    if(this.state.config.hide){\n      return false\n    } else {\n      return (\n        <div style={{padding:10}}>\n          <b>Gas</b>\n          <div><i>{this.state.gwei} wei</i></div>\n        </div>\n      );\n    }\n  }\n}\n\nexport default Gas;","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","// jest-dom adds custom jest matchers for asserting on DOM nodes.\r\n// allows you to do things like:\r\n// expect(element).toHaveTextContent(/react/i)\r\n// learn more: https://github.com/testing-library/jest-dom\r\nimport '@testing-library/jest-dom/extend-expect';\r\n","import React, { Component } from 'react';\r\nimport deepmerge from 'deepmerge';\r\nlet defaultConfig = {}\r\ndefaultConfig.DEBUG = false;\r\ndefaultConfig.startZoomAt = 900\r\ndefaultConfig.origin = \"top left\"\r\ndefaultConfig.adjustedZoom = 1.0\r\n\r\nclass Scaler extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    let config = defaultConfig\r\n    if(props.config) {\r\n      config = deepmerge(config, props.config)\r\n      if(props.config.requiredNetwork){ config.requiredNetwork = props.config.requiredNetwork}\r\n    }\r\n    this.state = {\r\n      config:config\r\n    }\r\n  }\r\n  updateDimensions() {\r\n    this.setState({ width: document.documentElement.clientWidth, height: document.documentElement.clientHeight});\r\n  }\r\n  componentDidMount() {\r\n    this.updateDimensions();\r\n    window.addEventListener(\"resize\", this.updateDimensions.bind(this));\r\n  }\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"resize\", this.updateDimensions.bind(this));\r\n  }\r\n  render() {\r\n\r\n\r\n    let zoom = 1.0\r\n    if(document.documentElement.clientWidth<this.state.config.startZoomAt){\r\n      zoom=document.documentElement.clientWidth/this.state.config.startZoomAt\r\n    }\r\n    zoom = Math.min(1.0,this.state.config.adjustedZoom*zoom)\r\n\r\n    return (\r\n      <div style={{transform:\"scale(\"+zoom+\")\",transformOrigin:this.state.config.origin}}>\r\n        {this.props.children}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Scaler;","import React, { Component } from 'react';\r\nimport Particles from '../particles.png';\r\n\r\nclass ParticlesRender extends Component {\r\n  render() {\r\n\r\n    let left = -700\r\n    let opacity = 0.95\r\n    if(this.props.left) left = this.props.left\r\n    if(this.props.opacity) opacity = this.props.opacity\r\n\r\n    return (\r\n      <img style={{zIndex:-1,position:\"absolute\",left:left,top:200,opacity:opacity}} src={Particles} />\r\n    )\r\n  }\r\n}\r\n\r\nexport default ParticlesRender;","module.exports = __webpack_public_path__ + \"static/media/loader.4156fc22.gif\";","import React, { Component } from 'react';\r\nimport deepmerge from 'deepmerge';\r\nimport Blockies from 'react-blockies';\r\nlet defaultConfig = {}\r\ndefaultConfig.DEBUG = false;\r\ndefaultConfig.size = 2\r\n\r\nclass Blockie extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    let config = defaultConfig\r\n    if(props.config) {\r\n      config = deepmerge(config, props.config)\r\n    }\r\n    this.state = {\r\n      config:config\r\n    }\r\n  }\r\n  render() {\r\n\r\n    let address = this.props.address\r\n    if(address && typeof address == \"string\"){\r\n      address = address+\"\"\r\n    }else{\r\n      address = null\r\n    }\r\n\r\n    return (\r\n      <Blockies\r\n        seed={address}\r\n        scale={this.state.config.size}\r\n      />\r\n    )\r\n  }\r\n}\r\n\r\nexport default Blockie;","var map = {\n\t\"./\": 96,\n\t\"./App\": 78,\n\t\"./App.css\": 200,\n\t\"./App.js\": 78,\n\t\"./App.test\": 303,\n\t\"./App.test.js\": 303,\n\t\"./back-arrow.png\": 129,\n\t\"./bkg.jpg\": 625,\n\t\"./coins\": 80,\n\t\"./coins.js\": 80,\n\t\"./components/mainui\": 91,\n\t\"./components/mainui.js\": 91,\n\t\"./components/particles\": 38,\n\t\"./components/particles.js\": 38,\n\t\"./components/publisher\": 128,\n\t\"./components/publisher.js\": 128,\n\t\"./components/publisherDeploy\": 130,\n\t\"./components/publisherDeploy.js\": 130,\n\t\"./components/subscriber\": 125,\n\t\"./components/subscriber.js\": 125,\n\t\"./components/subscriberApprove\": 131,\n\t\"./components/subscriberApprove.js\": 131,\n\t\"./contracts/build/main/Subscription/main.smlse\": 626,\n\t\"./contracts/build/main/Subscription/main_compiled\": 178,\n\t\"./contracts/build/main/Subscription/main_compiled.json\": 178,\n\t\"./contracts/build/main/Subscription/main_compiled.tz\": 627,\n\t\"./contracts/build/main/Subscription/main_pure.py\": 628,\n\t\"./contracts/build/main/Subscription/main_scenario.sc\": 629,\n\t\"./contracts/build/main/Subscription/main_storage_init.tz\": 630,\n\t\"./contracts/build/main/Subscription/main_types.sp\": 631,\n\t\"./contracts/build/main/WasteToken/main.smlse\": 632,\n\t\"./contracts/build/main/WasteToken/main_compiled\": 304,\n\t\"./contracts/build/main/WasteToken/main_compiled.json\": 304,\n\t\"./contracts/build/main/WasteToken/main_compiled.tz\": 633,\n\t\"./contracts/build/main/WasteToken/main_pure.py\": 634,\n\t\"./contracts/build/main/WasteToken/main_scenario.sc\": 635,\n\t\"./contracts/build/main/WasteToken/main_storage_init.tz\": 636,\n\t\"./contracts/build/main/WasteToken/main_types.sp\": 637,\n\t\"./contracts/config\": 139,\n\t\"./contracts/config.json\": 139,\n\t\"./contracts/contracts\": 305,\n\t\"./contracts/contracts.js\": 305,\n\t\"./dapparatus/address\": 93,\n\t\"./dapparatus/address.js\": 93,\n\t\"./dapparatus/blockie\": 49,\n\t\"./dapparatus/blockie.js\": 49,\n\t\"./dapparatus/button\": 306,\n\t\"./dapparatus/button.js\": 306,\n\t\"./dapparatus/contractloader\": 123,\n\t\"./dapparatus/contractloader.js\": 123,\n\t\"./dapparatus/dapparatus.css\": 307,\n\t\"./dapparatus/gas\": 308,\n\t\"./dapparatus/gas.js\": 308,\n\t\"./dapparatus/metamask\": 124,\n\t\"./dapparatus/metamask.js\": 124,\n\t\"./dapparatus/scaler\": 32,\n\t\"./dapparatus/scaler.js\": 32,\n\t\"./ethereum.png\": 90,\n\t\"./index\": 96,\n\t\"./index.css\": 199,\n\t\"./index.js\": 96,\n\t\"./loader.gif\": 39,\n\t\"./loader.png\": 638,\n\t\"./logo-icon.png\": 186,\n\t\"./metamask.png\": 185,\n\t\"./particles.png\": 92,\n\t\"./serviceWorker\": 309,\n\t\"./serviceWorker.js\": 309,\n\t\"./setupTests\": 310,\n\t\"./setupTests.js\": 310\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 624;","module.exports = __webpack_public_path__ + \"static/media/bkg.ba6097cd.jpg\";","module.exports = __webpack_public_path__ + \"static/media/main.fbded7fa.smlse\";","module.exports = __webpack_public_path__ + \"static/media/main_compiled.0aa1915d.tz\";","module.exports = __webpack_public_path__ + \"static/media/main_pure.29d626a5.py\";","module.exports = __webpack_public_path__ + \"static/media/main_scenario.e69ead71.sc\";","module.exports = __webpack_public_path__ + \"static/media/main_storage_init.085f96c0.tz\";","module.exports = __webpack_public_path__ + \"static/media/main_types.2925d497.sp\";","module.exports = __webpack_public_path__ + \"static/media/main.b222453c.smlse\";","module.exports = __webpack_public_path__ + \"static/media/main_compiled.aa6545ec.tz\";","module.exports = __webpack_public_path__ + \"static/media/main_pure.29d626a5.py\";","module.exports = __webpack_public_path__ + \"static/media/main_scenario.942b863d.sc\";","module.exports = __webpack_public_path__ + \"static/media/main_storage_init.27371c83.tz\";","module.exports = __webpack_public_path__ + \"static/media/main_types.8487aa5e.sp\";","module.exports = \"data:image/png;base64,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\"","//logic completely clear. Just handle address and sign sizes and contractLoader\r\nimport React, { Component } from 'react'; \r\nimport './App.css';\r\n//import { Gas } from \"dapparatus\"\r\nimport ContractLoader from './dapparatus/contractloader';\r\nimport Metamask from './dapparatus/metamask';\r\nimport { TezosToolkit, MichelsonMap } from '@taquito/taquito';\r\nimport MainUI from './components/mainui.js'\r\nimport Subscriber from './components/subscriber.js'\r\nimport Publisher from './components/publisher.js'\r\nimport PublisherDeploy from './components/publisherDeploy'\r\nimport SubscriberApprove from './components/subscriberApprove'\r\nimport Coins from './coins.js'\r\nimport axios from 'axios'\r\n\r\nlet backendUrl = \"http://localhost:10003/\"\r\nif(window.location.href.indexOf(\"tokensubscription.com\")>=0)\r\n{\r\n  backendUrl = \"https://relay.tokensubscription.com/\"\r\n}\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    let contract\r\n    let subscription\r\n    let path = window.location.pathname.replace(\"/subscription-token/\",\"\")\r\n\r\n    if(path.length==36 && path.startsWith('KT')){ // length with address\r\n      contract = path\r\n      console.log(\"Subscriber Enters using contract\",contract)\r\n    }else if(path.startsWith('HASH')){ // length with hash \r\n      console.log(\"Subcription Hash with HASH\",path)\r\n      path = path.substring(4)\r\n      subscription = path\r\n      console.log(\"Subcription Hash\",subscription)\r\n    }else{\r\n      console.log(\"PATH LENGTH UNKNWON\",path,path.length)\r\n    }\r\n    let startMode = \"\"\r\n    if(contract||subscription){\r\n      startMode = \"subscriber\"\r\n    }\r\n\r\n    this.state = {\r\n      Tezos: false,\r\n      account: false,\r\n      gwei: 4,\r\n      doingTransaction: false,\r\n      contract: contract,\r\n      subscription: subscription,\r\n      mode: startMode,\r\n      coins:false,\r\n      contractLink:\"\"\r\n    }\r\n  }\r\n\r\n  async deploySubscription(toAddress,tokenName,tokenAmount,timeType,timeAmount,gasPrice,email) {\r\n    let {Tezos} = this.state\r\n    //requiredToAddress,requiredTokenAddress,requiredTokenAmount,requiredPeriodSeconds,requiredGasPrice\r\n    let requiredToAddress = null\r\n    if(toAddress){\r\n      requiredToAddress = toAddress\r\n    }\r\n\r\n    let foundToken\r\n    let requiredTokenAddress = null\r\n    if(tokenName){\r\n      //translate tokenName to tokenAddress\r\n      for(let i = 0; i < this.state.coins.length; i++){\r\n        if(tokenName == this.state.coins[i].address){\r\n          requiredTokenAddress = this.state.coins[i].address\r\n          foundToken = this.state.coins[i]\r\n        }\r\n      }\r\n    }\r\n\r\n    let requiredPeriodSeconds= null\r\n    if(timeAmount){\r\n      //translate timeAmount&timeType to requiredPeriodSeconds\r\n      let periodSeconds = timeAmount;\r\n      if(timeType==\"minutes\"){\r\n        periodSeconds*=60\r\n      }else if(timeType==\"hours\"){\r\n        periodSeconds*=3600\r\n      }else if(timeType==\"days\"){\r\n        periodSeconds*=86400\r\n      }else if(timeType==\"months\"){\r\n        periodSeconds*=2592000\r\n      }\r\n      if(periodSeconds){\r\n        requiredPeriodSeconds=periodSeconds\r\n      }\r\n    }\r\n\r\n    let requiredTokenAmount = null\r\n    let requiredGasPrice = null\r\n    if(tokenAmount && foundToken){\r\n      requiredTokenAmount = tokenAmount * (10**6)\r\n      if(gasPrice && foundToken){\r\n        requiredGasPrice = gasPrice * (10**6)\r\n        requiredTokenAmount -= requiredGasPrice\r\n      }\r\n    }\r\n\r\n\r\n    console.log(\"Deploying Subscription Contract...\")\r\n    let code = require('./contracts/build/main/Subscription/main_compiled.json')\r\n    const admin = await Tezos.wallet.pkh()\r\n\r\n    let args = [\r\n      requiredToAddress,\r\n      requiredTokenAddress,\r\n      requiredTokenAmount,\r\n      requiredPeriodSeconds,\r\n      requiredGasPrice\r\n    ]\r\n\r\n    console.log(\"ARGS\",args)\r\n\r\n    const op = await Tezos.wallet.originate({\r\n      code:code,\r\n      storage:{\r\n        times : new MichelsonMap(),\r\n        extraNonce : new MichelsonMap(),\r\n        owner : admin,\r\n        balance : 0,\r\n        allowance : 0,\r\n        reqToAddress: requiredToAddress,\r\n        reqTokenAddress: requiredTokenAddress,\r\n        reqTokenAmount: requiredTokenAmount,\r\n        reqPeriodSeconds : requiredPeriodSeconds,\r\n        reqGasPrice : requiredGasPrice\r\n      }\r\n      }).send()\r\n    \r\n    const contract = await op.contract();\r\n    const contractAddress = await contract.address;\r\n  \r\n    this.setState({deployedAddress : contractAddress})\r\n    console.log(\"Deployed Address\",this.state.deployedAddress)\r\n\r\n    axios.post(backendUrl+'deploysub',{arguments:args,email:email,deployingAddress: contractAddress}, {\r\n      headers: {\r\n          'Content-Type': 'application/json',\r\n      }\r\n    }).then((response)=>{\r\n      console.log(\"SAVED INFO\",response.data)\r\n    })\r\n    .catch((error)=>{\r\n      console.log(error);\r\n    });\r\n  }\r\n\r\n  setMode(mode){\r\n    this.setState({mode:mode})\r\n  }\r\n\r\n  handleInput(e){\r\n    let update = {}\r\n    update[e.target.name] = e.target.value\r\n    this.setState(update)\r\n  }\r\n\r\n  render() {\r\n    let {Tezos,contracts,mode,deployedAddress} = this.state\r\n    let connectedDisplay = []\r\n    let contractsDisplay = []\r\n    let noTezosDisplay = \"\"\r\n    if(Tezos){\r\n      connectedDisplay.push(\r\n        <ContractLoader\r\n         key=\"ContractLoader\"\r\n         config={{DEBUG:true}}\r\n         Tezos={Tezos}\r\n         require={path => {return require(`${__dirname}/${path}`)}}\r\n         onReady={(contracts,customLoader)=>{\r\n           console.log(\"contracts loaded\",contracts)\r\n\r\n           this.setState({contractLink:contracts.Subscription._address,contracts:contracts,customContractLoader:customLoader},async ()=>{\r\n             console.log(\"Contracts Are Ready:\",this.state.contracts)\r\n             Coins.unshift(\r\n              {\r\n                  address:\"0x0000000000000000000000000000000000000000\",\r\n                  name:\"*ANY*\",\r\n                  symbol:\"*ANY*\",\r\n                  imageUrl:\"https://s2.coinmarketcap.com/static/img/coins/32x32/1896.png\"\r\n              }\r\n            )\r\n             Coins.push(\r\n               {\r\n                address:this.state.contracts.WasteToken._address,\r\n                name:\"WasteCoin\",\r\n                symbol:\"WC\",\r\n                imageUrl:\"https://s3.amazonaws.com/wyowaste.com/wastecoin.png\"\r\n               }\r\n             )\r\n             this.setState({coins:Coins})\r\n           })\r\n         }}\r\n        />\r\n      )\r\n\r\n      if(contracts&&mode){\r\n\r\n        let body\r\n        if(mode==\"subscriber\"){\r\n          if(this.state.subscription){\r\n            body = (\r\n              <SubscriberApprove\r\n                {...this.state}\r\n                backendUrl={backendUrl}\r\n              />\r\n            )\r\n          }else if(deployedAddress){\r\n            body = (\r\n              <div>\r\n                subscriber deploy page {deployedAddress}\r\n              </div>\r\n            )\r\n          }else{\r\n            body = (\r\n              <Subscriber\r\n                {...this.state}\r\n                backendUrl={backendUrl}\r\n                deploySubscription={this.deploySubscription.bind(this)}\r\n              />\r\n            )\r\n          }\r\n\r\n        }else{\r\n          if(deployedAddress){\r\n            body = (\r\n              <PublisherDeploy {...this.state}\r\n                setMode={this.setMode.bind(this)}\r\n                deployedAddress={deployedAddress}\r\n              />\r\n            )\r\n          }else{\r\n            body = (\r\n              <Publisher\r\n                {...this.state}\r\n                deploySubscription={this.deploySubscription.bind(this)}\r\n                setMode={this.setMode.bind(this)}\r\n              />\r\n            )\r\n          }\r\n        }\r\n\r\n        contractsDisplay.push(\r\n          <div key=\"UI\" style={{padding:30}}>\r\n            <div>\r\n              {body}\r\n            </div>\r\n          </div>\r\n        )\r\n      }else{\r\n        connectedDisplay.push(\r\n          <MainUI buttonPress={\r\n            ()=>{\r\n                this.setState({mode:\"publisher\"})\r\n            }\r\n          }/>\r\n        )\r\n      }\r\n    }else{\r\n      noTezosDisplay = (\r\n        <MainUI buttonPress={\r\n          ()=>{\r\n            alert(\"Install Taquito and configure Tezos \")\r\n          }\r\n        }/>\r\n      )\r\n    }\r\n\r\n    let forkBanner = \"\"\r\n    if(!this.state.mode){\r\n      forkBanner = (\r\n        <a href=\"https://github.com/madhavaggar/subscription-token\">\r\n        </a>\r\n      )\r\n    }\r\n\r\n    return (\r\n      <div className=\"App\">\r\n         {forkBanner}\r\n        <Metamask\r\n          config={{\r\n            requiredNetwork:['carthagenet'],\r\n            DEBUG: true,\r\n            boxStyle: {\r\n              paddingRight:75,\r\n              marginTop:0,\r\n              paddingTop:10,\r\n              zIndex:10,\r\n              textAlign:\"right\",\r\n              width:300,\r\n            }\r\n          }}\r\n          onUpdate={(state)=>{\r\n           console.log(\"Tezos state update:\",state)\r\n           if(state.Tezos) {\r\n             this.setState(state)\r\n           }\r\n          }}\r\n        /> \r\n        <div className=\"container\">\r\n          {connectedDisplay}\r\n          {contractsDisplay}\r\n          {noTezosDisplay}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\n\r\nexport default App;","module.exports = [\r\n    {\r\n        address: 'KT1R2QWyDfKRicpNyGzF2yWN8nuCR3x4Leco',\r\n        name: \"TrustCoin\",\r\n        symbol:\"TC\",\r\n        imageUrl:\"https://s2.coinmarketcap.com/static/img/coins/32x32/1104.png\"\r\n    },\r\n]","module.exports = __webpack_public_path__ + \"static/media/ethereum.de51452e.png\";","import React, { Component } from 'react';\r\nimport Scaler from '../dapparatus/scaler'\r\nimport Particles from './particles.js';\r\nimport Logo from '../logo-icon.png';\r\n\r\n\r\nclass MainUI extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      contractLink: \"KT1FKDqbqQ6E25ze5XXTbRSzMKhu11neuR7y\"\r\n    };\r\n  }\r\n  render() {\r\n    return (\r\n        <Scaler config={{startZoomAt:800,origin:\"50px 50px\"}}>\r\n          <div key=\"mainUI\" className=\"center\">\r\n            <Particles />\r\n\r\n            <div style={{marginTop:100}}>\r\n            <img src={Logo} />\r\n            </div>\r\n\r\n            <h1 style={{margin: '30px 0 0 0'}}><i>Token Subscriptions</i></h1>\r\n            <h3 style={{margin: '0 0 45px 0'}}>\r\n              <div>Recurring subscriptions on the Tezos blockchain</div>\r\n              <div style={{opacity:0.75}}><i>set it and forget it token transfers</i></div>\r\n            </h3>\r\n\r\n            <button size=\"2\" onClick={this.props.buttonPress}>\r\n              Start Accepting Token Subscriptions</button>\r\n\r\n              <div style={{marginTop:200,opacity:0.7,fontSize:15}}>\r\n              <div>Disclaimer: <span style={{color:\"#FFFFFF\"}}>We built this in a weekend!</span></div>\r\n              <div>You should inspect <a style={{color:\"#dddddd\"}} href={\"https://carthagenet.tzstats.com/\"+this.state.contractLink}>our smart contract</a> before using.</div>\r\n              <div>100% free and open source! Please <a style={{color:\"#dddddd\"}} href=\"https://github.com/madhavaggar/subscription-token\">contribute</a>!</div>\r\n              </div>\r\n          </div>\r\n        </Scaler>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MainUI;","module.exports = __webpack_public_path__ + \"static/media/particles.ebd5588c.png\";","import React, { Component } from 'react';\r\nimport deepmerge from 'deepmerge';\r\nimport eth from '../ethereum.png';\r\nimport Blockie from './blockie.js';\r\nimport { TezosToolkit } from '@taquito/taquito';\r\n\r\nlet interval;\r\nlet defaultConfig = {};\r\ndefaultConfig.DEBUG = false;\r\ndefaultConfig.POLLINTERVAL = 1337;\r\ndefaultConfig.showBalance = true;\r\ndefaultConfig.showBlockie = true;\r\ndefaultConfig.blockieSize = 2;\r\ndefaultConfig.showAddress = true;\r\ndefaultConfig.ETHPRECISION = 10000;\r\n\r\nclass Address extends Component {\r\n    constructor(props) {\r\n        console.log('ADDRESS constructor', props);\r\n        super(props);\r\n        let config = defaultConfig;\r\n        if (props.config) {\r\n            config = deepmerge(config, props.config);\r\n        }\r\n        this.state = {\r\n            etherscan: '',\r\n            config: config,\r\n        };\r\n    }\r\n    async componentDidMount() {\r\n        interval = setInterval(\r\n            this.load.bind(this),\r\n            this.state.config.POLLINTERVAL\r\n        );\r\n        this.load();\r\n\r\n    }\r\n    componentWillUnmount() {\r\n        clearInterval(interval);\r\n    }\r\n    load = async () => {\r\n        try {\r\n            let Tezos = new TezosToolkit();\r\n            Tezos.setProvider({ rpc: 'https://api.tez.ie/rpc/carthagenet' });\r\n\r\n\r\n            var balance = await Tezos.tz.getBalance(this.props.address);\r\n            if (balance) {\r\n                if (typeof balance == 'string') {\r\n                    balance = parseFloat(balance) / 1000000;\r\n                } else {\r\n                    balance = balance.toNumber() / 1000000;\r\n                }\r\n                this.setState({ balance: balance });\r\n            }\r\n        }\r\n        catch (e) {\r\n            console.log(e, 'Error');\r\n        }\r\n    }\r\n    render() {\r\n        let balance = '';\r\n        if (this.state.config.showBalance) {\r\n            balance = (\r\n                <span>\r\n                    <img\r\n                        style={{\r\n                            maxHeight: 24,\r\n                            padding: 2,\r\n                            verticalAlign: 'middle',\r\n                            marginTop: -4\r\n                        }}\r\n                        src={eth}\r\n                    />\r\n                    {Math.round(this.state.balance * this.state.config.ETHPRECISION) /\r\n                        this.state.config.ETHPRECISION}\r\n                </span>\r\n            );\r\n        }\r\n\r\n        let displayName = this.props.address; //.substr(0,this.state.config.accountCutoff)\r\n\r\n        let blockie = '';\r\n        if (this.state.config.showBlockie) {\r\n            blockie = (\r\n                <Blockie\r\n                    config={{ size: this.state.config.blockieSize }}\r\n                    address={this.props.address}\r\n                />\r\n            );\r\n        }\r\n\r\n        let nameString = '';\r\n        if (this.state.config.showAddress) {\r\n            nameString = (\r\n                <span style={{ paddingLeft: 7, paddingRight: 2 }}>{displayName}</span>\r\n            );\r\n        }\r\n\r\n        return (\r\n            <a\r\n                target=\"_blank\"\r\n                href={this.props.tzstats + this.props.address}\r\n            >\r\n                {blockie}\r\n                {nameString}\r\n                {balance}\r\n            </a>\r\n        );\r\n    }\r\n}\r\nexport default Address;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}