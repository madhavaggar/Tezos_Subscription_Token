[{"shortname": "Subscription", "longname": "Subscription", "scenario": [{"action": "html", "tag": "h1", "inner": "Subscription based Token", "line_no": 294}, {"action": "html", "tag": "p", "inner": "[[TABLEOFCONTENTS]]", "line_no": 296}, {"action": "html", "tag": "h1", "inner": "Accounts", "line_no": 304}, {"action": "show", "html": true, "stripStrings": false, "expression": "(list 305 (account_of_seed \"Administrator\" 299) (account_of_seed \"Alice\" 300) (account_of_seed \"Robert\" 301))", "line_no": 305}, {"action": "html", "tag": "h1", "inner": "Contract", "line_no": 307}, {"action": "html", "tag": "h1", "inner": "Entry points", "line_no": 311}, {"action": "newContract", "id": 1, "export": "(storage (record 5 (administrator (reduce (attr (account_of_seed \"Administrator\" 299) \"address\" 299) 299)) (balances (type_annotation (big_map 5 ) (bigmap (unknown 6) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 5)) (paused (literal (bool False) 5)) (totalSupply (literal (intOrNat 0) 5)))\nstorage_type (())\nmessages ((approve True ((set_type (params 22) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 23) (verify (invert (attr (data) \"paused\" 88) 24) False 24) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 25) (sender) 25) \"approvals\" 25) (attr (params 22) \"spender\" 25) (literal (intOrNat 0) 25) 25) (literal (intOrNat 0) 26) 26) (eq (attr (params 22) \"value\" 26) (literal (intOrNat 0) 26) 26) 26) \"UnsafeAllowanceChange\" 26) (set (getItem (attr (getItem (attr (data) \"balances\" 25) (sender) 27) \"approvals\" 27) (attr (params 22) \"spender\" 25) 27) (attr (params 22) \"value\" 26) 27))) (burn True ((set_type (params 64) (record ((address \"address\") (value \"nat\")) None) 65) (verify (eq (sender) (attr (data) \"administrator\" 73) 73) False 66) (verify (ge (attr (getItem (attr (data) \"balances\" 25) (attr (params 64) \"address\" 67) 67) \"balance\" 67) (attr (params 64) \"value\" 67) 67) False 67) (set (attr (getItem (attr (data) \"balances\" 25) (attr (params 64) \"address\" 67) 68) \"balance\" 68) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 25) (attr (params 64) \"address\" 67) 68) \"balance\" 68) (attr (params 64) \"value\" 67) 68) 68) \"Some\" 68) 68) (set (attr (data) \"totalSupply\" 69) (openVariant (isNat (sub (attr (data) \"totalSupply\" 69) (attr (params 64) \"value\" 67) 69) 69) \"Some\" 69) 69))) (getAdministrator True ((seq \"__s5\" ((set_type (first (params 82) 5) \"unit\" 83) (result (attr (data) \"administrator\" 73) 84)) 5) (bind \"__s5\" ((set (operations 5) (cons (transfer (getLocal \"__s5\" 5) (literal (mutez 0) 5) (openVariant (contract \"\" \"address\" (second (params 82) 5) 5) \"Some\" 5) 5) (operations 5) 5) 5)) 5))) (getAllowance True ((seq \"__s6\" ((result (getItem (attr (getItem (attr (data) \"balances\" 25) (attr (first (params 38) 5) \"owner\" 39) 39) \"approvals\" 39) (attr (first (params 38) 5) \"spender\" 39) 39) 39)) 5) (bind \"__s6\" ((set (operations 5) (cons (transfer (getLocal \"__s6\" 5) (literal (mutez 0) 5) (openVariant (contract \"\" \"nat\" (second (params 38) 5) 5) \"Some\" 5) 5) (operations 5) 5) 5)) 5))) (getBalance True ((seq \"__s7\" ((result (attr (getItem (attr (data) \"balances\" 25) (first (params 34) 5) 35) \"balance\" 35) 35)) 5) (bind \"__s7\" ((set (operations 5) (cons (transfer (getLocal \"__s7\" 5) (literal (mutez 0) 5) (openVariant (contract \"\" \"nat\" (second (params 34) 5) 5) \"Some\" 5) 5) (operations 5) 5) 5)) 5))) (getTotalSupply True ((seq \"__s8\" ((set_type (first (params 42) 5) \"unit\" 43) (result (attr (data) \"totalSupply\" 69) 44)) 5) (bind \"__s8\" ((set (operations 5) (cons (transfer (getLocal \"__s8\" 5) (literal (mutez 0) 5) (openVariant (contract \"\" \"nat\" (second (params 42) 5) 5) \"Some\" 5) 5) (operations 5) 5) 5)) 5))) (mint True ((set_type (params 56) (record ((address \"address\") (value \"nat\")) None) 57) (verify (eq (sender) (attr (data) \"administrator\" 73) 73) False 58) (ifBlock (invert (contains (attr (data) \"balances\" 25) (attr (params 56) \"address\" 59) 30) 30) ((set (getItem (attr (data) \"balances\" 25) (attr (params 56) \"address\" 59) 31) (record 31 (approvals (map 31 )) (balance (literal (intOrNat 0) 31))) 31)) 30) (set (attr (getItem (attr (data) \"balances\" 25) (attr (params 56) \"address\" 59) 60) \"balance\" 60) (add (attr (getItem (attr (data) \"balances\" 25) (attr (params 56) \"address\" 59) 60) \"balance\" 60) (attr (params 56) \"value\" 60) 60) 60) (set (attr (data) \"totalSupply\" 69) (add (attr (data) \"totalSupply\" 69) (attr (params 56) \"value\" 60) 61) 61))) (setAdministrator True ((set_type (params 76) \"address\" 77) (verify (eq (sender) (attr (data) \"administrator\" 73) 73) False 78) (set (attr (data) \"administrator\" 73) (params 76) 79))) (setPause True ((set_type (params 91) \"bool\" 92) (verify (eq (sender) (attr (data) \"administrator\" 73) 73) False 93) (set (attr (data) \"paused\" 88) (params 91) 94))) (transfer True ((set_type (params 8) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_\") ((\"to_\") (\"value\"))))) 9) (verify (or (eq (sender) (attr (data) \"administrator\" 73) 73) (and (invert (attr (data) \"paused\" 88) 11) (or (eq (attr (params 8) \"from_\" 12) (sender) 12) (ge (getItem (attr (getItem (attr (data) \"balances\" 25) (attr (params 8) \"from_\" 12) 13) \"approvals\" 13) (sender) 13) (attr (params 8) \"value\" 13) 13) 12) 11) 10) False 10) (ifBlock (invert (contains (attr (data) \"balances\" 25) (attr (params 8) \"to_\" 14) 30) 30) ((set (getItem (attr (data) \"balances\" 25) (attr (params 8) \"to_\" 14) 31) (record 31 (approvals (map 31 )) (balance (literal (intOrNat 0) 31))) 31)) 30) (verify (ge (attr (getItem (attr (data) \"balances\" 25) (attr (params 8) \"from_\" 12) 15) \"balance\" 15) (attr (params 8) \"value\" 13) 15) False 15) (set (attr (getItem (attr (data) \"balances\" 25) (attr (params 8) \"from_\" 12) 16) \"balance\" 16) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 25) (attr (params 8) \"from_\" 12) 16) \"balance\" 16) (attr (params 8) \"value\" 13) 16) 16) \"Some\" 16) 16) (set (attr (getItem (attr (data) \"balances\" 25) (attr (params 8) \"to_\" 14) 17) \"balance\" 17) (add (attr (getItem (attr (data) \"balances\" 25) (attr (params 8) \"to_\" 14) 17) \"balance\" 17) (attr (params 8) \"value\" 13) 17) 17) (ifBlock (and (neq (attr (params 8) \"from_\" 12) (sender) 18) (invert (eq (sender) (attr (data) \"administrator\" 73) 73) 18) 18) ((set (getItem (attr (getItem (attr (data) \"balances\" 25) (attr (params 8) \"from_\" 12) 19) \"approvals\" 19) (sender) 19) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 25) (attr (params 8) \"from_\" 12) 19) \"approvals\" 19) (sender) 19) (attr (params 8) \"value\" 13) 19) 19) \"Some\" 19) 19)) 18))))\nflags ()\nglobals ()\nstorage_layout ()\nentry_points_layout ())", "line_no": 329, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": 0, "export": "(storage (record 110 (allowance (literal (intOrNat 0) 110)) (balance (literal (intOrNat 0) 110)) (extraNonce (type_annotation (map 119 ) (map (unknown 2) (record ((value \"nat\")) None)) 119)) (owner (reduce (attr (account_of_seed \"Administrator\" 299) \"address\" 299) 299)) (reqGasPrice (variant \"None\" (unit) -1)) (reqPeriodSeconds (variant \"None\" (unit) -1)) (reqToAddress (variant \"None\" (unit) -1)) (reqTokenAddress (variant \"None\" (unit) -1)) (reqTokenAmount (variant \"None\" (unit) -1)) (times (type_annotation (big_map 111 ) (bigmap \"bytes\" (record ((active \"bool\") (nextValidTimeStamp \"timestamp\") (ready \"bool\")) None)) 111)))\nstorage_type (())\nmessages ((cancelSub True ((set_type (params 272) (record ((gasPrice \"nat\") (nonce \"nat\") (periodSeconds \"int\") (publisher \"address\") (subs_pub_key \"key\") (subscriber \"address\") (tokenAddress \"address\") (tokenAmount \"nat\") (userSignature \"signature\")) (Some ((\"subscriber\") ((\"publisher\") ((\"tokenAddress\") ((\"tokenAmount\") ((\"periodSeconds\") ((\"gasPrice\") ((\"nonce\") ((\"userSignature\") (\"subs_pub_key\"))))))))))) 273) (set_type (record 274 (gasPrice (attr (params 272) \"gasPrice\" 280)) (nonce (attr (params 272) \"nonce\" 281)) (periodSeconds (attr (params 272) \"periodSeconds\" 279)) (publisher (attr (params 272) \"publisher\" 276)) (subscriber (attr (params 272) \"subscriber\" 275)) (tokenAddress (attr (params 272) \"tokenAddress\" 277)) (tokenAmount (attr (params 272) \"tokenAmount\" 278))) (record ((gasPrice \"nat\") (nonce \"nat\") (periodSeconds \"int\") (publisher \"address\") (subscriber \"address\") (tokenAddress \"address\") (tokenAmount \"nat\")) (Some ((\"subscriber\") ((\"publisher\") ((\"tokenAddress\") ((\"tokenAmount\") ((\"periodSeconds\") ((\"gasPrice\") (\"nonce\"))))))))) 181) (verify (or (invert (isVariant (attr (data) \"reqToAddress\" 182) \"Some\" 182) 182) (and (isVariant (attr (data) \"reqToAddress\" 182) \"Some\" 182) (eq (openVariant (attr (data) \"reqToAddress\" 182) \"Some\" 182) (attr (params 272) \"publisher\" 276) 182) 182) 182) False 182) (verify (or (invert (isVariant (attr (data) \"reqTokenAddress\" 183) \"Some\" 183) 183) (and (isVariant (attr (data) \"reqTokenAddress\" 183) \"Some\" 183) (eq (openVariant (attr (data) \"reqTokenAddress\" 183) \"Some\" 183) (attr (params 272) \"tokenAddress\" 277) 183) 183) 183) False 183) (verify (or (invert (isVariant (attr (data) \"reqTokenAmount\" 184) \"Some\" 184) 184) (and (isVariant (attr (data) \"reqTokenAmount\" 184) \"Some\" 184) (eq (openVariant (attr (data) \"reqTokenAmount\" 184) \"Some\" 184) (attr (params 272) \"tokenAmount\" 278) 184) 184) 184) False 184) (verify (or (invert (isVariant (attr (data) \"reqPeriodSeconds\" 185) \"Some\" 185) 185) (and (isVariant (attr (data) \"reqPeriodSeconds\" 185) \"Some\" 185) (eq (openVariant (attr (data) \"reqPeriodSeconds\" 185) \"Some\" 185) (attr (params 272) \"periodSeconds\" 279) 185) 185) 185) False 185) (verify (or (invert (isVariant (attr (data) \"reqGasPrice\" 186) \"Some\" 186) 186) (and (isVariant (attr (data) \"reqGasPrice\" 186) \"Some\" 186) (eq (openVariant (attr (data) \"reqGasPrice\" 186) \"Some\" 186) (attr (params 272) \"gasPrice\" 280) 186) 186) 186) False 186) (defineLocal \"elements\" (pack (record 189 (a (attr (params 272) \"subscriber\" 275)) (b (attr (params 272) \"publisher\" 276)) (c (attr (params 272) \"tokenAddress\" 277)) (d (attr (params 272) \"tokenAmount\" 278)) (e (attr (params 272) \"periodSeconds\" 279)) (f (attr (params 272) \"gasPrice\" 280)) (g (attr (params 272) \"nonce\" 281))) 188) 274) (verify (check_signature (attr (params 272) \"subs_pub_key\" 284) (attr (params 272) \"userSignature\" 284) (getLocal \"elements\" 284) 284) False 284) (verify (eq (sender) (attr (params 272) \"subscriber\" 275) 285) False 285) (set (attr (getItem (attr (data) \"times\" 286) (getLocal \"elements\" 286) 286) \"nextValidTimeStamp\" 286) (literal (timestamp -1) 286) 286))) (executeSubs True ((set_type (params 232) (record ((gasPrice \"nat\") (nonce \"nat\") (periodSeconds \"int\") (publisher \"address\") (subs_pub_key \"key\") (subscriber \"address\") (tokenAddress \"address\") (tokenAmount \"nat\") (userSignature \"signature\")) (Some ((\"subscriber\") ((\"publisher\") ((\"tokenAddress\") ((\"tokenAmount\") ((\"periodSeconds\") ((\"gasPrice\") ((\"nonce\") ((\"userSignature\") (\"subs_pub_key\"))))))))))) 233) (set_type (record 234 (gasPrice (attr (params 232) \"gasPrice\" 240)) (nonce (attr (params 232) \"nonce\" 241)) (periodSeconds (attr (params 232) \"periodSeconds\" 239)) (publisher (attr (params 232) \"publisher\" 236)) (subscriber (attr (params 232) \"subscriber\" 235)) (tokenAddress (attr (params 232) \"tokenAddress\" 237)) (tokenAmount (attr (params 232) \"tokenAmount\" 238))) (record ((gasPrice \"nat\") (nonce \"nat\") (periodSeconds \"int\") (publisher \"address\") (subscriber \"address\") (tokenAddress \"address\") (tokenAmount \"nat\")) (Some ((\"subscriber\") ((\"publisher\") ((\"tokenAddress\") ((\"tokenAmount\") ((\"periodSeconds\") ((\"gasPrice\") (\"nonce\"))))))))) 181) (verify (or (invert (isVariant (attr (data) \"reqToAddress\" 182) \"Some\" 182) 182) (and (isVariant (attr (data) \"reqToAddress\" 182) \"Some\" 182) (eq (openVariant (attr (data) \"reqToAddress\" 182) \"Some\" 182) (attr (params 232) \"publisher\" 236) 182) 182) 182) False 182) (verify (or (invert (isVariant (attr (data) \"reqTokenAddress\" 183) \"Some\" 183) 183) (and (isVariant (attr (data) \"reqTokenAddress\" 183) \"Some\" 183) (eq (openVariant (attr (data) \"reqTokenAddress\" 183) \"Some\" 183) (attr (params 232) \"tokenAddress\" 237) 183) 183) 183) False 183) (verify (or (invert (isVariant (attr (data) \"reqTokenAmount\" 184) \"Some\" 184) 184) (and (isVariant (attr (data) \"reqTokenAmount\" 184) \"Some\" 184) (eq (openVariant (attr (data) \"reqTokenAmount\" 184) \"Some\" 184) (attr (params 232) \"tokenAmount\" 238) 184) 184) 184) False 184) (verify (or (invert (isVariant (attr (data) \"reqPeriodSeconds\" 185) \"Some\" 185) 185) (and (isVariant (attr (data) \"reqPeriodSeconds\" 185) \"Some\" 185) (eq (openVariant (attr (data) \"reqPeriodSeconds\" 185) \"Some\" 185) (attr (params 232) \"periodSeconds\" 239) 185) 185) 185) False 185) (verify (or (invert (isVariant (attr (data) \"reqGasPrice\" 186) \"Some\" 186) 186) (and (isVariant (attr (data) \"reqGasPrice\" 186) \"Some\" 186) (eq (openVariant (attr (data) \"reqGasPrice\" 186) \"Some\" 186) (attr (params 232) \"gasPrice\" 240) 186) 186) 186) False 186) (defineLocal \"elements\" (pack (record 189 (a (attr (params 232) \"subscriber\" 235)) (b (attr (params 232) \"publisher\" 236)) (c (attr (params 232) \"tokenAddress\" 237)) (d (attr (params 232) \"tokenAmount\" 238)) (e (attr (params 232) \"periodSeconds\" 239)) (f (attr (params 232) \"gasPrice\" 240)) (g (attr (params 232) \"nonce\" 241))) 188) 234) (set_type (record 244 (gasPrice (attr (params 232) \"gasPrice\" 240)) (nonce (attr (params 232) \"nonce\" 241)) (periodSeconds (attr (params 232) \"periodSeconds\" 239)) (publisher (attr (params 232) \"publisher\" 236)) (subs_pub_key (attr (params 232) \"subs_pub_key\" 253)) (subscriber (attr (params 232) \"subscriber\" 235)) (tokenAddress (attr (params 232) \"tokenAddress\" 237)) (tokenAmount (attr (params 232) \"tokenAmount\" 238)) (userSignature (attr (params 232) \"userSignature\" 252))) (record ((gasPrice \"nat\") (nonce \"nat\") (periodSeconds \"int\") (publisher \"address\") (subs_pub_key \"key\") (subscriber \"address\") (tokenAddress \"address\") (tokenAmount \"nat\") (userSignature \"signature\")) (Some ((\"subscriber\") ((\"publisher\") ((\"tokenAddress\") ((\"tokenAmount\") ((\"periodSeconds\") ((\"gasPrice\") ((\"nonce\") ((\"userSignature\") (\"subs_pub_key\"))))))))))) 202) (set_type (record 204 (gasPrice (attr (params 232) \"gasPrice\" 240)) (nonce (attr (params 232) \"nonce\" 241)) (periodSeconds (attr (params 232) \"periodSeconds\" 239)) (publisher (attr (params 232) \"publisher\" 236)) (subscriber (attr (params 232) \"subscriber\" 235)) (tokenAddress (attr (params 232) \"tokenAddress\" 237)) (tokenAmount (attr (params 232) \"tokenAmount\" 238))) (record ((gasPrice \"nat\") (nonce \"nat\") (periodSeconds \"int\") (publisher \"address\") (subscriber \"address\") (tokenAddress \"address\") (tokenAmount \"nat\")) (Some ((\"subscriber\") ((\"publisher\") ((\"tokenAddress\") ((\"tokenAmount\") ((\"periodSeconds\") ((\"gasPrice\") (\"nonce\"))))))))) 181) (verify (or (invert (isVariant (attr (data) \"reqToAddress\" 182) \"Some\" 182) 182) (and (isVariant (attr (data) \"reqToAddress\" 182) \"Some\" 182) (eq (openVariant (attr (data) \"reqToAddress\" 182) \"Some\" 182) (attr (params 232) \"publisher\" 236) 182) 182) 182) False 182) (verify (or (invert (isVariant (attr (data) \"reqTokenAddress\" 183) \"Some\" 183) 183) (and (isVariant (attr (data) \"reqTokenAddress\" 183) \"Some\" 183) (eq (openVariant (attr (data) \"reqTokenAddress\" 183) \"Some\" 183) (attr (params 232) \"tokenAddress\" 237) 183) 183) 183) False 183) (verify (or (invert (isVariant (attr (data) \"reqTokenAmount\" 184) \"Some\" 184) 184) (and (isVariant (attr (data) \"reqTokenAmount\" 184) \"Some\" 184) (eq (openVariant (attr (data) \"reqTokenAmount\" 184) \"Some\" 184) (attr (params 232) \"tokenAmount\" 238) 184) 184) 184) False 184) (verify (or (invert (isVariant (attr (data) \"reqPeriodSeconds\" 185) \"Some\" 185) 185) (and (isVariant (attr (data) \"reqPeriodSeconds\" 185) \"Some\" 185) (eq (openVariant (attr (data) \"reqPeriodSeconds\" 185) \"Some\" 185) (attr (params 232) \"periodSeconds\" 239) 185) 185) 185) False 185) (verify (or (invert (isVariant (attr (data) \"reqGasPrice\" 186) \"Some\" 186) 186) (and (isVariant (attr (data) \"reqGasPrice\" 186) \"Some\" 186) (eq (openVariant (attr (data) \"reqGasPrice\" 186) \"Some\" 186) (attr (params 232) \"gasPrice\" 240) 186) 186) 186) False 186) (defineLocal \"element\" (pack (record 189 (a (attr (params 232) \"subscriber\" 235)) (b (attr (params 232) \"publisher\" 236)) (c (attr (params 232) \"tokenAddress\" 237)) (d (attr (params 232) \"tokenAmount\" 238)) (e (attr (params 232) \"periodSeconds\" 239)) (f (attr (params 232) \"gasPrice\" 240)) (g (attr (params 232) \"nonce\" 241))) 188) 203) (ifBlock (invert (contains (attr (data) \"times\" 286) (getLocal \"element\" 214) 144) 144) ((set (getItem (attr (data) \"times\" 286) (getLocal \"element\" 214) 145) (record 145 (active (literal (bool False) 145)) (nextValidTimeStamp (literal (timestamp -1) 145)) (ready (literal (bool False) 145))) 145)) 144) (set (attr (getItem (attr (data) \"times\" 286) (getLocal \"element\" 215) 215) \"ready\" 215) (literal (bool False) 215) 215) (verify (check_signature (attr (params 232) \"subs_pub_key\" 253) (attr (params 232) \"userSignature\" 252) (getLocal \"element\" 216) 216) False 216) (verify (neq (attr (params 232) \"subscriber\" 235) (attr (params 232) \"publisher\" 236) 217) False 217) (verify (ge (now) (attr (getItem (attr (data) \"times\" 286) (getLocal \"element\" 218) 218) \"nextValidTimeStamp\" 218) 218) False 218) (set (attr (getItem (attr (data) \"times\" 286) (getLocal \"element\" 219) 219) \"ready\" 219) (literal (bool True) 219) 219) (verify (eq (attr (getItem (attr (data) \"times\" 286) (getLocal \"elements\" 256) 256) \"ready\" 256) (literal (bool True) 256) 256) False 256) (set (attr (getItem (attr (data) \"times\" 286) (getLocal \"elements\" 257) 257) \"nextValidTimeStamp\" 257) (add_seconds (now) (attr (params 232) \"periodSeconds\" 239) 257) 257) (ifBlock (invert (contains (attr (data) \"extraNonce\" 148) (attr (params 232) \"subscriber\" 235) 148) 148) ((set (getItem (attr (data) \"extraNonce\" 148) (attr (params 232) \"subscriber\" 235) 149) (record 149 (value (literal (intOrNat 0) 149))) 149)) 148) (ifBlock (gt (attr (params 232) \"nonce\" 241) (attr (getItem (attr (data) \"extraNonce\" 148) (attr (params 232) \"subscriber\" 235) 259) \"value\" 259) 259) ((set (attr (getItem (attr (data) \"extraNonce\" 148) (attr (params 232) \"subscriber\" 235) 260) \"value\" 260) (attr (params 232) \"nonce\" 241) 260)) 259) (set (operations 264) (cons (transfer (record 263 (from_ (attr (params 232) \"subscriber\" 235)) (to_ (attr (params 232) \"publisher\" 236)) (value (attr (params 232) \"tokenAmount\" 238))) (literal (mutez 0) 264) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) None) (attr (params 232) \"tokenAddress\" 237) 262) \"Some\" 262) 264) (operations 264) 264) 264) (ifBlock (gt (attr (params 232) \"gasPrice\" 240) (literal (intOrNat 0) 266) 266) ((set (operations 269) (cons (transfer (record 268 (from_ (attr (params 232) \"subscriber\" 235)) (to_ (sender)) (value (attr (params 232) \"gasPrice\" 240))) (literal (mutez 0) 269) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) None) (attr (params 232) \"tokenAddress\" 237) 267) \"Some\" 267) 269) (operations 269) 269) 269)) 266))) (updateAllowance True ((set_type (params 166) (record ((spender \"address\") (subscriber \"address\") (tokenAddress \"address\")) (Some ((\"spender\") ((\"subscriber\") (\"tokenAddress\"))))) 167) (set (operations 178) (cons (transfer (record 177 (contractAddress (to_address (self) 177)) (owner (attr (params 166) \"subscriber\" 177)) (spender (attr (params 166) \"spender\" 177))) (literal (mutez 0) 178) (openVariant (contract \"getAllowance\" (record ((contractAddress \"address\") (owner \"address\") (spender \"address\")) None) (attr (params 166) \"tokenAddress\" 174) 168) \"Some\" 168) 178) (operations 178) 178) 178))) (updateBalance True ((set_type (params 152) (record ((subscriber \"address\") (tokenAddress \"address\")) (Some ((\"subscriber\") (\"tokenAddress\")))) 153) (set (operations 163) (cons (transfer (record 162 (contractAddress (to_address (self) 162)) (owner (attr (params 152) \"subscriber\" 162))) (literal (mutez 0) 163) (openVariant (contract \"getBalance\" (record ((contractAddress \"address\") (owner \"address\")) None) (attr (params 152) \"tokenAddress\" 159) 154) \"Some\" 154) 163) (operations 163) 163) 163))) (viewAllowance True ((set_type (params 227) \"nat\" 228) (set (attr (data) \"allowance\" 229) (params 227) 229))) (viewBalance True ((set_type (params 222) \"nat\" 223) (set (attr (data) \"balance\" 224) (params 222) 224))))\nflags ()\nglobals ()\nstorage_layout ()\nentry_points_layout ())", "line_no": 330, "show": true, "accept_unknown_types": false}, {"action": "html", "tag": "h1", "inner": "Test 1", "line_no": 338}, {"action": "html", "tag": "h2", "inner": "Mint for Alice First", "line_no": 339}, {"action": "message", "id": 1, "message": "mint", "params": "(record 340 (address (reduce (attr (account_of_seed \"Alice\" 300) \"address\" 300) 300)) (value (literal (intOrNat 1200) 340)))", "line_no": 340, "title": "", "messageClass": "", "source": "none", "sender": "seed:Administrator", "chain_id": "", "time": 0, "amount": "(literal (mutez 0) 1)", "level": 0, "show": true, "valid": true}, {"action": "html", "tag": "h2", "inner": "Approve First", "line_no": 342}, {"action": "message", "id": 1, "message": "approve", "params": "(record 343 (spender (literal (local-address 0) 110)) (value (literal (intOrNat 1200) 343)))", "line_no": 343, "title": "", "messageClass": "", "source": "none", "sender": "seed:Alice", "chain_id": "", "time": 0, "amount": "(literal (mutez 0) 1)", "level": 0, "show": true, "valid": true}, {"action": "html", "tag": "h2", "inner": "Execute Subscription", "line_no": 345}, {"action": "message", "id": 0, "message": "executeSubs", "params": "(record 346 (gasPrice (literal (intOrNat 0) 346)) (nonce (literal (intOrNat 1) 346)) (periodSeconds (literal (intOrNat 60) 346)) (publisher (reduce (attr (account_of_seed \"Administrator\" 299) \"address\" 299) 299)) (subs_pub_key (reduce (attr (account_of_seed \"Alice\" 300) \"public_key\" 300) 300)) (subscriber (reduce (attr (account_of_seed \"Alice\" 300) \"address\" 300) 300)) (tokenAddress (literal (local-address 1) 5)) (tokenAmount (literal (intOrNat 100) 346)) (userSignature (reduce (make_signature (reduce (attr (account_of_seed \"Alice\" 300) \"secret_key\" 300) 300) (pack (record 333 (a (reduce (attr (account_of_seed \"Alice\" 300) \"address\" 300) 300)) (b (reduce (attr (account_of_seed \"Administrator\" 299) \"address\" 299) 299)) (c (literal (local-address 1) 5)) (d (literal (intOrNat 100) 333)) (e (literal (intOrNat 60) 333)) (f (literal (intOrNat 0) 333)) (g (literal (intOrNat 1) 333))) 333) \"Raw\" 334) 334)))", "line_no": 346, "title": "", "messageClass": "", "source": "none", "sender": "none", "chain_id": "", "time": 0, "amount": "(literal (mutez 0) 1)", "level": 0, "show": true, "valid": true}, {"action": "html", "tag": "h2", "inner": "Execute Subscription - 2", "line_no": 349}, {"action": "message", "id": 0, "message": "executeSubs", "params": "(record 350 (gasPrice (literal (intOrNat 0) 350)) (nonce (literal (intOrNat 1) 350)) (periodSeconds (literal (intOrNat 60) 350)) (publisher (reduce (attr (account_of_seed \"Administrator\" 299) \"address\" 299) 299)) (subs_pub_key (reduce (attr (account_of_seed \"Alice\" 300) \"public_key\" 300) 300)) (subscriber (reduce (attr (account_of_seed \"Alice\" 300) \"address\" 300) 300)) (tokenAddress (literal (local-address 1) 5)) (tokenAmount (literal (intOrNat 100) 350)) (userSignature (reduce (make_signature (reduce (attr (account_of_seed \"Alice\" 300) \"secret_key\" 300) 300) (pack (record 333 (a (reduce (attr (account_of_seed \"Alice\" 300) \"address\" 300) 300)) (b (reduce (attr (account_of_seed \"Administrator\" 299) \"address\" 299) 299)) (c (literal (local-address 1) 5)) (d (literal (intOrNat 100) 333)) (e (literal (intOrNat 60) 333)) (f (literal (intOrNat 0) 333)) (g (literal (intOrNat 1) 333))) 333) \"Raw\" 334) 334)))", "line_no": 350, "title": "", "messageClass": "", "source": "none", "sender": "none", "chain_id": "", "time": 60, "amount": "(literal (mutez 0) 1)", "level": 0, "show": true, "valid": true}, {"action": "html", "tag": "h2", "inner": "Cancel Subscription", "line_no": 352}, {"action": "message", "id": 0, "message": "cancelSub", "params": "(record 353 (gasPrice (literal (intOrNat 0) 353)) (nonce (literal (intOrNat 1) 353)) (periodSeconds (literal (intOrNat 60) 353)) (publisher (reduce (attr (account_of_seed \"Administrator\" 299) \"address\" 299) 299)) (subs_pub_key (reduce (attr (account_of_seed \"Alice\" 300) \"public_key\" 300) 300)) (subscriber (reduce (attr (account_of_seed \"Alice\" 300) \"address\" 300) 300)) (tokenAddress (literal (local-address 1) 5)) (tokenAmount (literal (intOrNat 100) 353)) (userSignature (reduce (make_signature (reduce (attr (account_of_seed \"Alice\" 300) \"secret_key\" 300) 300) (pack (record 333 (a (reduce (attr (account_of_seed \"Alice\" 300) \"address\" 300) 300)) (b (reduce (attr (account_of_seed \"Administrator\" 299) \"address\" 299) 299)) (c (literal (local-address 1) 5)) (d (literal (intOrNat 100) 333)) (e (literal (intOrNat 60) 333)) (f (literal (intOrNat 0) 333)) (g (literal (intOrNat 1) 333))) 333) \"Raw\" 334) 334)))", "line_no": 353, "title": "", "messageClass": "", "source": "none", "sender": "seed:Alice", "chain_id": "", "time": 60, "amount": "(literal (mutez 0) 1)", "level": 0, "show": true, "valid": true}, {"action": "html", "tag": "h1", "inner": "Test 2", "line_no": 356}, {"action": "html", "tag": "h2", "inner": "Mint for Alice First", "line_no": 362}, {"action": "message", "id": 1, "message": "mint", "params": "(record 363 (address (reduce (attr (account_of_seed \"Alice\" 300) \"address\" 300) 300)) (value (literal (intOrNat 1200) 363)))", "line_no": 363, "title": "", "messageClass": "", "source": "none", "sender": "seed:Administrator", "chain_id": "", "time": 0, "amount": "(literal (mutez 0) 1)", "level": 0, "show": true, "valid": true}, {"action": "html", "tag": "h2", "inner": "Execute Subscription", "line_no": 366}, {"action": "message", "id": 0, "message": "executeSubs", "params": "(record 367 (gasPrice (literal (intOrNat 5) 367)) (nonce (literal (intOrNat 1) 367)) (periodSeconds (literal (intOrNat 60) 367)) (publisher (reduce (attr (account_of_seed \"Administrator\" 299) \"address\" 299) 299)) (subs_pub_key (reduce (attr (account_of_seed \"Alice\" 300) \"public_key\" 300) 300)) (subscriber (reduce (attr (account_of_seed \"Alice\" 300) \"address\" 300) 300)) (tokenAddress (literal (local-address 1) 5)) (tokenAmount (literal (intOrNat 100) 367)) (userSignature (reduce (make_signature (reduce (attr (account_of_seed \"Alice\" 300) \"secret_key\" 300) 300) (pack (record 357 (a (reduce (attr (account_of_seed \"Alice\" 300) \"address\" 300) 300)) (b (reduce (attr (account_of_seed \"Administrator\" 299) \"address\" 299) 299)) (c (literal (local-address 1) 5)) (d (literal (intOrNat 100) 357)) (e (literal (intOrNat 60) 357)) (f (literal (intOrNat 5) 357)) (g (literal (intOrNat 1) 357))) 357) \"Raw\" 358) 358)))", "line_no": 367, "title": "", "messageClass": "", "source": "none", "sender": "none", "chain_id": "", "time": 60, "amount": "(literal (mutez 0) 1)", "level": 0, "show": true, "valid": true}, {"action": "html", "tag": "h2", "inner": "Execute Subscription - 2", "line_no": 369}, {"action": "message", "id": 0, "message": "executeSubs", "params": "(record 370 (gasPrice (literal (intOrNat 5) 370)) (nonce (literal (intOrNat 1) 370)) (periodSeconds (literal (intOrNat 60) 370)) (publisher (reduce (attr (account_of_seed \"Administrator\" 299) \"address\" 299) 299)) (subs_pub_key (reduce (attr (account_of_seed \"Alice\" 300) \"public_key\" 300) 300)) (subscriber (reduce (attr (account_of_seed \"Alice\" 300) \"address\" 300) 300)) (tokenAddress (literal (local-address 1) 5)) (tokenAmount (literal (intOrNat 100) 370)) (userSignature (reduce (make_signature (reduce (attr (account_of_seed \"Alice\" 300) \"secret_key\" 300) 300) (pack (record 357 (a (reduce (attr (account_of_seed \"Alice\" 300) \"address\" 300) 300)) (b (reduce (attr (account_of_seed \"Administrator\" 299) \"address\" 299) 299)) (c (literal (local-address 1) 5)) (d (literal (intOrNat 100) 357)) (e (literal (intOrNat 60) 357)) (f (literal (intOrNat 5) 357)) (g (literal (intOrNat 1) 357))) 357) \"Raw\" 358) 358)))", "line_no": 370, "title": "", "messageClass": "", "source": "none", "sender": "none", "chain_id": "", "time": 120, "amount": "(literal (mutez 0) 1)", "level": 0, "show": true, "valid": true}, {"action": "html", "tag": "h2", "inner": "Cancel Subscription", "line_no": 372}, {"action": "message", "id": 0, "message": "cancelSub", "params": "(record 373 (gasPrice (literal (intOrNat 5) 373)) (nonce (literal (intOrNat 1) 373)) (periodSeconds (literal (intOrNat 60) 373)) (publisher (reduce (attr (account_of_seed \"Administrator\" 299) \"address\" 299) 299)) (subs_pub_key (reduce (attr (account_of_seed \"Alice\" 300) \"public_key\" 300) 300)) (subscriber (reduce (attr (account_of_seed \"Alice\" 300) \"address\" 300) 300)) (tokenAddress (literal (local-address 1) 5)) (tokenAmount (literal (intOrNat 100) 373)) (userSignature (reduce (make_signature (reduce (attr (account_of_seed \"Alice\" 300) \"secret_key\" 300) 300) (pack (record 357 (a (reduce (attr (account_of_seed \"Alice\" 300) \"address\" 300) 300)) (b (reduce (attr (account_of_seed \"Administrator\" 299) \"address\" 299) 299)) (c (literal (local-address 1) 5)) (d (literal (intOrNat 100) 357)) (e (literal (intOrNat 60) 357)) (f (literal (intOrNat 5) 357)) (g (literal (intOrNat 1) 357))) 357) \"Raw\" 358) 358)))", "line_no": 373, "title": "", "messageClass": "", "source": "none", "sender": "seed:Alice", "chain_id": "", "time": 120, "amount": "(literal (mutez 0) 1)", "level": 0, "show": true, "valid": true}]}]